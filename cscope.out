cscope 15 $HOME/Workspace/libmdadm -q 0000004495 0000303498
	@FilesystemManager.cpp

1 
	~"Fesy¡emMªag”.h
"

3 #ifdeà
NUUO


4 
	~"commÚ/fe.h
"

5 
	~"commÚ/nusy¦og.h
"

6 
	~"commÚ/¡ršg.h
"

7 
	~"commÚ/sy¡em.h
"

9 
	~"‹¡_uts.h
"

12 
	~<®gÜ™hm
>

13 
	~<sys/mouÁ.h
>

14 
	~<sys/¡©.h
>

15 
	~<”ºo.h
>

17 
	#LOG_LABEL
 "FSMªag”"

	)

19 
	gFesy¡emMªag”
::
	$Fesy¡emMªag”
(cÚ¡ 
¡ršg
& 
dev
)

20 : 
	`m_¡rMouÁPošt
("")

21 , 
	`m_¡rDevNode
(
dev
)

22 , 
	`m_¡rUUID
("")

23 , 
	`m_¡rFSTy³
("")

24 , 
	`m_iVŞumeNum
(-1)

25 , 
	`m_iFÜm©šgS‹
(
WRITE_INODE_TABLES_UNKNOWN
)

26 , 
	`m_iFÜm©Prog»ss
(0)

27 , 
	`m_bFÜm©
(
çl£
)

28 , 
	`m_bMouÁ
(
çl£
)

29 , 
	$m_bIn™Ÿlized
(
çl£
)

31 
	`In™Ÿlize
();

32 
	}
}

34 
	gFesy¡emMªag”
::
	$Fesy¡emMªag”
()

35 : 
	`m_¡rMouÁPošt
("")

36 , 
	`m_¡rDevNode
("")

37 , 
	`m_¡rUUID
("")

38 , 
	`m_¡rFSTy³
("")

39 , 
	`m_iVŞumeNum
(-1)

40 , 
	`m_iFÜm©šgS‹
(
WRITE_INODE_TABLES_UNKNOWN
)

41 , 
	`m_iFÜm©Prog»ss
(0)

42 , 
	`m_bFÜm©
(
çl£
)

43 , 
	`m_bMouÁ
(
çl£
)

44 , 
	$m_bIn™Ÿlized
(
çl£
)

46 
	}
}

48 
	gFesy¡emMªag”
::~
	$Fesy¡emMªag”
()

50 
Cr™iÿlSeùiÚLock
 
	`cs
(&
m_csIn™Ÿlized
);

51 
m_bIn™Ÿlized
 = 
çl£
;

52 
	}
}

54 
boŞ
 
	gFesy¡emMªag”
::
	$S‘DeviûNode
(cÚ¡ 
¡ršg
 &
dev
)

56 
m_¡rDevNode
 = 
dev
;

57  
	`In™Ÿlize
();

58 
	}
}

60 
boŞ
 
	gFesy¡emMªag”
::
	$In™Ÿlize
()

62 ià(
m_¡rDevNode
.
	`em±y
()) {

63 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_ERR
, 
LOG_LABEL
,

65  
çl£
;

68 ià(!
	`CheckBlockDeviû
(
m_¡rDevNode
)) {

69 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_ERR
, 
LOG_LABEL
,

71 
m_¡rDevNode
.
	`c_¡r
());

72  
çl£
;

75 ià(
	`blkid
() != 0) {

76 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_ERR
, 
LOG_LABEL
,

78 
m_¡rDevNode
.
	`c_¡r
());

79  
çl£
;

82 
Cr™iÿlSeùiÚLock
 
	`cs
(&
m_csIn™Ÿlized
);

83 
m_bIn™Ÿlized
 = 
Œue
;

84  
Œue
;

85 
	}
}

87 
boŞ
 
	gFesy¡emMªag”
::
	$IsIn™Ÿlized
()

89 
Cr™iÿlSeùiÚLock
 
	`cs
(&
m_csIn™Ÿlized
);

90  
m_bIn™Ÿlized
;

91 
	}
}

93 
	gFesy¡emMªag”
::
	$S‘MouÁPošt
(cÚ¡ 
¡ršg
 &
mouÁpošt
)

95 
m_¡rMouÁPošt
 = 
mouÁpošt
;

96 
	}
}

98 #ifdeà
NUUO


99 
	gFesy¡emMªag”
::
	$Th»adProc
()

101 
	`FÜm©
();

112 
	}
}

115 
boŞ
 
	gFesy¡emMªag”
::
	$FÜm©
(
boŞ
 
fÜû
)

117 
»t
 = 0;

119 ià(
m_¡rDevNode
.
	`em±y
()) {

120 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_ERR
, 
LOG_LABEL
,

122  
çl£
;

125 
Cr™iÿlSeùiÚLock
 
	`cs
(&
m_csFÜm©
);

127 ià(
m_bFÜm©
 && !
fÜû
)

128 
fÜm©_dÚe
;

130 
	`In™ŸlizeMke2fsHªdË
();

131 
»t
 = 
	`mke2fs
(&
m_mkfsHªdË
);

132 ià(0 !ğ
»t
) {

133 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_ERR
, 
LOG_LABEL
,

134 "FaØfÜm© % [%d]\n", 
m_¡rDevNode
.
	`c_¡r
(), 
»t
);

135  
çl£
;

138 
fÜm©_dÚe
:

139 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_INFO
, 
LOG_LABEL
,

140 "FÜm© % sucûssfuÎy.\n", 
m_¡rDevNode
.
	`c_¡r
());

141  
Œue
;

142 
	}
}

144 
boŞ
 
	gFesy¡emMªag”
::
	$MouÁ
()

146  
	`MouÁ
(
m_¡rMouÁPošt
);

147 
	}
}

149 
boŞ
 
	gFesy¡emMªag”
::
	$MouÁ
(cÚ¡ 
¡ršg
& 
¡rMouÁPošt
)

151 
¡ršg
 
¡rE¼ÜLog
;

153 ià(
¡rMouÁPošt
.
	`em±y
()) {

154 
¡rE¼ÜLog
 = "Invalid mount…oint.";

155 
mouÁ_check_”r
;

158 ià(
m_¡rDevNode
.
	`em±y
()) {

159 
¡rE¼ÜLog
 = "Invalid device.";

160 
mouÁ_check_”r
;

163 
m_csFÜm©
.
	`Lock
();

164 ià(!
m_bFÜm©
) {

165 
¡rE¼ÜLog
 = "The device isn't formated.";

166 
m_csFÜm©
.
	`UÆock
();

167 
mouÁ_check_”r
;

169 
m_csFÜm©
.
	`UÆock
();

171 ià(!
	`CheckBlockDeviû
(
m_¡rDevNode
)) {

172 
¡rE¼ÜLog
 = "The device is‚ot‡ block device.";

173 
mouÁ_check_”r
;

176 
m_csMouÁ
.
	`Lock
();

177 ià(
m_bMouÁ


178 && !
m_¡rMouÁPošt
.
	`em±y
()

179 && 
m_¡rMouÁPošt
 =ğ
¡rMouÁPošt


180 && 
	`CheckDœeùÜyExi¡
(
m_¡rMouÁPošt
)

181 #ifdeà
NUUO


182 && 
	`ROOTFS_PROTECT
(
m_¡rMouÁPošt
.
	`c_¡r
())

185 
mouÁ_ok
;

188 ià(
m_bMouÁ
 &&

189 !
m_¡rMouÁPošt
.
	`em±y
() &&

190 
m_¡rMouÁPošt
 !ğ
¡rMouÁPošt
) {

193 
¡rE¼ÜLog
 = "The device has‡lready be mounted. Why„equesto mount‡gain with‡ different mount…oint?";

194 
mouÁ_”r
;

197 ià(!
	`CheckDœeùÜyExi¡
(
¡rMouÁPošt
)) {

198 ià(!
	`MakeDœeùÜy
(
¡rMouÁPošt
)) {

199 
¡rE¼ÜLog
 = "Failo create mount…oint.";

200 
mouÁ_”r
;

202 } ià(
	`IsMouÁPošt
(
¡rMouÁPošt
)) {

205 
¡rE¼ÜLog
 = "The mount…oint is using by‡nother device..";

206 
mouÁ_”r
;

209 ià(
	`mouÁ
(
m_¡rDevNode
.
	`c_¡r
(), 
¡rMouÁPošt
.c_str(),

210 
m_¡rFSTy³
.
	`c_¡r
(), 0, "") < 0) {

212 
	`SË•MS
(2000);

214 ià(
	`mouÁ
(
m_¡rDevNode
.
	`c_¡r
(), 
¡rMouÁPošt
.c_str(),

215 
m_¡rFSTy³
.
	`c_¡r
(), 0, "") < 0) {

216 
¡rE¼ÜLog
 = 
	`¡ršg_fÜm©
("Failo mount %so %s. (%s)",

217 
m_¡rDevNode
.
	`c_¡r
(),

218 
m_¡rMouÁPošt
.
	`c_¡r
(),

219 
	`¡»¼Ü
(
”ºo
));

220 
mouÁ_”r
;

224 
mouÁ_ok
:

225 
m_bMouÁ
 = 
Œue
;

226 
m_¡rMouÁPošt
 = 
¡rMouÁPošt
;

227 
m_csMouÁ
.
	`UÆock
();

228 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_INFO
, 
LOG_LABEL
,

230 
m_¡rDevNode
.
	`c_¡r
(),

231 
m_¡rMouÁPošt
.
	`c_¡r
());

233  
Œue
;

235 
mouÁ_”r
:

236 
m_csMouÁ
.
	`UÆock
();

237 
mouÁ_check_”r
:

238 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_ERR
, 
LOG_LABEL
,

239 "%s", 
¡rE¼ÜLog
.
	`c_¡r
());

240  
çl£
;

241 
	}
}

243 
boŞ
 
	gFesy¡emMªag”
::
	$UnmouÁ
()

245 
Cr™iÿlSeùiÚLock
 
	`cs
(&
m_csMouÁ
);

247 ià(!
m_bMouÁ
)

248 
unmouÁ_dÚe
;

250 ià(
m_¡rMouÁPošt
.
	`em±y
())

251 
unmouÁ_dÚe
;

253 ià(!
	`CheckDœeùÜyExi¡
(
m_¡rMouÁPošt
))

254 
unmouÁ_dÚe
;

256 ià(!
	`IsMouÁPošt
(
m_¡rMouÁPošt
))

257 
unmouÁ_dÚe
;

259 ià(
	`umouÁ2
(
m_¡rMouÁPošt
.
	`c_¡r
(), 
UMOUNT_NOFOLLOW
 | 
MNT_DETACH
) < 0) {

260 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_ERR
, 
LOG_LABEL
, "Failo unmount %s (%s)\n",

261 
m_¡rMouÁPošt
.
	`c_¡r
(), 
	`¡»¼Ü
(
”ºo
));

262  
çl£
;

269 
unmouÁ_dÚe
:

270 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_INFO
, 
LOG_LABEL
,

272 
m_¡rMouÁPošt
.
	`c_¡r
());

273 
m_bMouÁ
 = 
çl£
;

277  
Œue
;

278 
	}
}

280 
boŞ
 
	gFesy¡emMªag”
::
	$IsFÜm©ed
()

282  
m_bFÜm©
;

283 
	}
}

285 
boŞ
 
	gFesy¡emMªag”
::
	$IsFÜm©šg
(& 
´og»ss
, & 
¡©
)

287 
´og»ss
 = 
m_iFÜm©Prog»ss
;

288 
¡©
 = 
m_iFÜm©šgS‹
;

289 ià(
m_iFÜm©šgS‹
 =ğ
WRITE_INODE_TABLES_WRITING
 ||

290 
m_iFÜm©šgS‹
 =ğ
WRITE_INODE_TABLES_WRITING_DONE
 ||

291 
m_iFÜm©šgS‹
 =ğ
WRITE_INODE_TABLES_INIT
)

292  
Œue
;

294  
çl£
;

295 
	}
}

297 
boŞ
 
	gFesy¡emMªag”
::
	$IsMouÁed
(
¡ršg
& 
¡rMouÁPošt
)

299 
Cr™iÿlSeùiÚLock
 
	`cs
(&
m_csMouÁ
);

300 
¡rMouÁPošt
 = 
m_¡rMouÁPošt
;

301  
m_bMouÁ
;

302 
	}
}

304 
boŞ
 
	gFesy¡emMªag”
::
	$IsMouÁed
(& 
num
)

306 
Cr™iÿlSeùiÚLock
 
	`cs
(&
m_csMouÁ
);

307 
num
 = 
m_iVŞumeNum
;

308  
m_bMouÁ
;

309 
	}
}

311 
boŞ
 
	gFesy¡emMªag”
::
	$IsMouÁed
()

313 
Cr™iÿlSeùiÚLock
 
	`cs
(&
m_csMouÁ
);

314  
m_bMouÁ
;

315 
	}
}

317 
	gFesy¡emMªag”
::
	$S‘FÜm©Info
(
boŞ
 
fÜm©
, 
´og»ss
, 
¡©
)

319 
m_bFÜm©
 = 
fÜm©
;

320 
m_iFÜm©Prog»ss
 = 
´og»ss
;

321 
m_iFÜm©šgS‹
 = 
¡©
;

322 
	}
}

324 
	gFesy¡emMªag”
::
	$MakeFesy¡emProg»ss
(*
pD©a
, 
¡©
,

325 
cu¼’t
, 
tÙ®
)

327 ià(
pD©a
 =ğ
NULL
)

329 
Fesy¡emMªag”
 *
pFSMgr
 = (Fesy¡emMªag”*è
pD©a
;

331 
¡©
) {

332 
WRITE_INODE_TABLES_INIT
:

333 
pFSMgr
->
	`S‘FÜm©Info
(
çl£
, 0, 
¡©
);

335 
WRITE_INODE_TABLES_WRITING
:

336 
WRITE_INODE_TABLES_WRITING_DONE
:

337 
pFSMgr
->
	`S‘FÜm©Info
(
çl£
, ()(()
cu¼’t
 / ()
tÙ®
 * 100), 
¡©
);

339 
WRITE_INODE_TABLES_DONE
:

340 
pFSMgr
->
	`S‘FÜm©Info
(
Œue
, 100, 
¡©
);

342 
WRITE_INODE_TABLES_ERROR
:

343 
pFSMgr
->
	`S‘FÜm©Info
(
çl£
, 0, 
¡©
);

346 
	}
}

348 
	gFesy¡emMªag”
::
	$G’”©eUUIDFe
()

350 
Cr™iÿlSeùiÚLock
 
	`cs_mouÁ
(&
m_csMouÁ
);

352 ià(!
m_bMouÁ
 || 
m_¡rMouÁPošt
.
	`em±y
() ||

353 !
	`CheckDœeùÜyExi¡
(
m_¡rMouÁPošt
)

354 #ifdeà
NUUO


355 || !
	`ROOTFS_PROTECT
(
m_¡rMouÁPošt
.
	`c_¡r
())

360 
¡ršg
 
¡rUUIDFeName
 = 
m_¡rMouÁPošt
 + "/uuid";

361 ià(
	`CheckFeExi¡
(
¡rUUIDFeName
) &&

362 
	`G‘FeStÜageSize
(
¡rUUIDFeName
) == 32)

365 
Cr™iÿlSeùiÚLock
 
	`cs_fÜm©
(&
m_csFÜm©
);

367 ià(
m_¡rUUID
.
	`em±y
())

370 
FILE
 *
pf
 = 
	`fİ’
(
¡rUUIDFeName
.
	`c_¡r
(), "w+");

371 ià(
pf
) {

372 
	`årštf
(
pf
, "%s", 
m_¡rUUID
.
	`c_¡r
());

373 
	`fşo£
(
pf
);

375 
	}
}

377 
boŞ
 
	gFesy¡emMªag”
::
	$C»©eDeçuÉFŞd”s
()

379 
Cr™iÿlSeùiÚLock
 
	`cs
(&
m_csMouÁ
);

381 ià(!
m_bMouÁ
 || 
m_¡rMouÁPošt
.
	`em±y
() ||

382 !
	`CheckDœeùÜyExi¡
(
m_¡rMouÁPošt
)

383 #ifdeà
NUUO


384 || !
	`ROOTFS_PROTECT
(
m_¡rMouÁPošt
.
	`c_¡r
())

387  
çl£
;

389 
¡ršg
 
¡rFŞd”Name
 = 
m_¡rMouÁPošt
 + "/VIDEODATA";

390 ià(!
	`CheckDœeùÜyExi¡
(
¡rFŞd”Name
)) {

391 ià(!
	`MakeDœeùÜy
(
¡rFŞd”Name
))

392  
çl£
;

395 
¡rFŞd”Name
 = 
m_¡rMouÁPošt
 + "/LOG";

396 ià(!
	`CheckDœeùÜyExi¡
(
¡rFŞd”Name
)) {

397 ià(!
	`MakeDœeùÜy
(
¡rFŞd”Name
))

398  
çl£
;

401  
Œue
;

402 
	}
}

404 
	gFesy¡emMªag”
::
	$blkid
()

406 
blkid_ÿche
 
ÿche
 = 
NULL
;

407 
»tv®
 = 0;

409 ià(
»tv®
 = 
	`blkid_g‘_ÿche
(&
ÿche
, 
NULL
) < 0) {

410 
	`Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_ERR
, 
LOG_LABEL
,

411 "[%d] FaØg‘ blkid cache.", 
__LINE__
);

412  
MKE2FS_FAIL_TO_GET_BLKID_CACHE
;

415 
m_csFÜm©
.
	`Lock
();

416 
blkid_dev
 
dev
 = 
	`blkid_g‘_dev
(
ÿche
, 
m_¡rDevNode
.
	`c_¡r
(), 
BLKID_DEV_NORMAL
);

417 cÚ¡ *
devÇme
 = 
	`blkid_dev_devÇme
(
dev
);

418 ià(!
	`CheckBlockDeviû
(
m_¡rDevNode
)) {

419 
	`Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_ERR
, 
LOG_LABEL
,

420 "[%d] % i nÙ‡ block deviû.", 
__LINE__
, 
m_¡rDevNode
.
	`c_¡r
());

421 
m_csFÜm©
.
	`UÆock
();

422  
MKE2FS_NOT_BLOCK_DEV
;

425 
blkid_g_™”©e
 
™”
;

426 cÚ¡ * 
ty³
 = 
NULL
;

427 cÚ¡ * 
v®ue
 = 
NULL
;

428 
™”
 = 
	`blkid_g_™”©e_begš
(
dev
);

429 
	`blkid_g_Ãxt
(
™”
, &
ty³
, &
v®ue
) == 0) {

430 ià(!
	`¡rcmp
(
ty³
, "UUID")) {

431 
m_¡rUUID
 = 
v®ue
;

432 
m_¡rUUID
.
	`”a£
(
¡d
::
	`»move
(m_¡rUUID.
	`begš
(), m_¡rUUID.
	`’d
(), '-'), m_strUUID.end());

434 ià(!
	`¡rcmp
(
ty³
, "TYPE")) {

435 
m_¡rFSTy³
 = 
v®ue
;

436 ià(
m_¡rFSTy³
 == "ext4" ||

437 
m_¡rFSTy³
 == "ext3")

438 
m_bFÜm©
 = 
Œue
;

439 } ià(!
	`¡rcmp
(
ty³
, "LABEL"))

442 
	`blkid_g_™”©e_’d
(
™”
);

443 
m_csFÜm©
.
	`UÆock
();

445 
mt
[256];

446 
mouÁ_æags
 = 0;

447 
mt
[0] = '\0';

448 
»tv®
 = 
	`ext2fs_check_mouÁ_pošt
(
m_¡rDevNode
.
	`c_¡r
(), &
mouÁ_æags
,

449 
mt
, (mtpt));

450 ià(
»tv®
 == 0) {

451 
Cr™iÿlSeùiÚLock
 
	`cs
(&
m_csMouÁ
);

452 
»t
 = 0;

453 
m_¡rMouÁPošt
 = 
mt
;

454 ià(
mouÁ_æags
 & 
EXT2_MF_MOUNTED
) {

455 
m_bMouÁ
 = 
Œue
;

456 } ià(
mouÁ_æags
 & 
EXT2_MF_BUSY
) {

457 
m_bMouÁ
 = 
Œue
;

459 
m_bMouÁ
 = 
çl£
;

466 ià(
m_bMouÁ
) {

467 
»t
 = 
	`ssÿnf
(
mt
, "/mÁ/VOLUME%d", &
m_iVŞumeNum
);

468 ià(
»t
 < 0 ||„‘ =ğ
EOF
 || 
m_iVŞumeNum
 > 128 ||

469 
m_iVŞumeNum
 < 1) {

470 
m_iVŞumeNum
 = -1;

471 ià(
	`umouÁ2
(
m_¡rMouÁPošt
.
	`c_¡r
(),

472 
UMOUNT_NOFOLLOW
 | 
MNT_DETACH
) < 0) {

473 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_ERR
, 
LOG_LABEL
, "Failo unmount %s (%s)\n",

474 
m_¡rMouÁPošt
.
	`c_¡r
(),

475 
	`¡»¼Ü
(
”ºo
));

477 
m_bMouÁ
 = 
çl£
;

478 
m_¡rMouÁPošt
 = "";

485 
m_iVŞumeNum
--;

489 
	`Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_ERR
, 
LOG_LABEL
,

490 "[%d] FaØcheck mouÁ…ošt.", 
__LINE__
);

491  
MKE2FS_CHECK_MOUNT_POINT_FAIL
;

495 
	}
}

497 
	gFesy¡emMªag”
::
	$Dump
()

499 
	`årštf
(
¡dout
, "\tMount Point: %s(%s), Filesystem: %s(%s)\n"

501 
m_¡rMouÁPošt
.
	`c_¡r
(), 
m_bMouÁ
?"Mounted":"Not mounted",

502 
m_¡rFSTy³
.
	`c_¡r
(), 
m_bFÜm©
?"Formated":"Not Formated",

503 
m_¡rUUID
.
	`c_¡r
());

504 
	}
}

506 
boŞ
 
	gFesy¡emMªag”
::
	$do¡©
(cÚ¡ 
¡ršg
& 
·th
, 
¡©
 *
¡
,

507 
do_l¡©
, 
qu›t
)

509 
n
 = 0;

511 ià(
do_l¡©
)

512 
n
 = 
	`l¡©
(
·th
.
	`c_¡r
(), 
¡
);

514 
n
 = 
	`¡©
(
·th
.
	`c_¡r
(), 
¡
);

516 ià(
n
 != 0) {

517 ià(!
qu›t
)

518 
	`årštf
(
¡d”r
, "mountpoint: %s: %s\n",

519 
·th
.
	`c_¡r
(), 
	`¡»¼Ü
(
”ºo
));

520  
çl£
;

523  
Œue
;

524 
	}
}

526 
boŞ
 
	gFesy¡emMªag”
::
	$IsMouÁPošt
(cÚ¡ 
¡ršg
& 
·th
)

528 
¡©
 
¡
, 
¡2
;

529 ià(!
	`do¡©
(
·th
, &
¡
, 1, 0))

530  
çl£
;

532 ià(!
	`do¡©
(
·th
 + "/..", &
¡2
, 1, 0))

533  
çl£
;

535 ià((
¡
.
¡_dev
 !ğ
¡2
.st_dev) ||

536 (
¡
.
¡_dev
 =ğ
¡2
.¡_dev && st.
¡_šo
 == st2.st_ino)) {

537  
Œue
;

540  
çl£
;

541 
	}
}

543 
	gFesy¡emMªag”
::
	$In™ŸlizeMke2fsHªdË
()

545 
	`mem£t
(&
m_mkfsHªdË
.
cfg
, 0x00, (
e2fs_cfg
));

546 
	`¡ºıy
(
m_mkfsHªdË
.
deviû_Çme
, 
m_¡rDevNode
.
	`c_¡r
(),

547 (
m_mkfsHªdË
.
deviû_Çme
));

548 
m_mkfsHªdË
.
cb_func
 = 
MakeFesy¡emProg»ss
;

549 
m_mkfsHªdË
.
buf
 = 
NULL
;

550 
m_mkfsHªdË
.
pD©a
 = 
this
;

552 
m_mkfsHªdË
.
cfg
.
blocksize
 = 4096;

553 
m_mkfsHªdË
.
cfg
.
»£rved_¿tio
 = 1;

554 
m_mkfsHªdË
.
cfg
.
r_İt
 = -1;

555 
m_mkfsHªdË
.
cfg
.
fÜû
 = 1;

556 
m_mkfsHªdË
.
cfg
.
qu›t
 = 1;

557 #ifdeà
DEBUG


558 
m_mkfsHªdË
.
cfg
.
v”bo£
 = 1;

560 
m_mkfsHªdË
.
cfg
.
v”bo£
 = 0;

562 
m_mkfsHªdË
.
cfg
.
ü—tÜ_os
 = 
EXT2_OS_LINUX
;

563 
	`¡ºıy
(
m_mkfsHªdË
.
cfg
.
fs_ty³
, "ext4", 
	`¡¾’
("ext4"));

564 
	}
}

566 
	gFesy¡emMªag”
::
	$S‘VŞumeNum
(cÚ¡ &
num
)

568 
m_iVŞumeNum
 = 
num
;

569 
m_¡rMouÁPošt
 = 
	`¡ršg_fÜm©
("/mÁ/VOLUME%d", 
m_iVŞumeNum
 + 1);

570 
	}
}

572 
	gFesy¡emMªag”
::
	$G‘VŞumeNum
()

574  
m_iVŞumeNum
;

575 
	}
}

577 
¡ršg
 
	gFesy¡emMªag”
::
	$G‘MouÁPošt
()

579  
m_¡rMouÁPošt
;

580 
	}
}

582 
¡ršg
 
	gFesy¡emMªag”
::
	$G‘MouÁPošt
(cÚ¡ & 
num
)

584 
	`S‘VŞumeNum
(
num
);

585  
m_¡rMouÁPošt
;

586 
	}
}

	@FilesystemManager.h

1 #iâdeà
__FILESYSTEM_MANAGER_H__


2 
	#__FILESYSTEM_MANAGER_H__


	)

4 #ifdeà
__ılu¥lus


8 
	~"libmke2fs/mke2fs.h
"

9 
	~"blkid/blkid.h
"

10 #ifdeà
__ılu¥lus


14 
	~<¡ršg
>

16 
usšg
 
Çme¥aû
 
¡d
;

18 #ifdeà
NUUO


19 
	~"­r/­r_th»ad_wÜk”.h
"

20 
	~"commÚ/ü™iÿl_£ùiÚ.h
"

21 
usšg
 
Çme¥aû
 
	gSYSUTILS_SPACE
;

23 
şass
 
	gFesy¡emMªag”
: 
public
 
A´Th»adWÜk”


25 
	~"‹¡_uts.h
"

27 
şass
 
Fesy¡emMªag”


30 
´iv©e
:

31 
Cr™iÿlSeùiÚ
 
m_csFÜm©
;

32 
Cr™iÿlSeùiÚ
 
	gm_csMouÁ
;

33 
Cr™iÿlSeùiÚ
 
	gm_csIn™Ÿlized
;

34 
mke2fs_hªdË
 
	gm_mkfsHªdË
;

37 
¡ršg
 
	gm_¡rMouÁPošt
;

38 
¡ršg
 
	gm_¡rDevNode
;

39 
¡ršg
 
	gm_¡rUUID
;

40 
¡ršg
 
	gm_¡rFSTy³
;

41 
	gm_iVŞumeNum
;

42 
	gm_iFÜm©šgS‹
;

43 
	gm_iFÜm©Prog»ss
;

44 
boŞ
 
	gm_bFÜm©
;

45 
boŞ
 
	gm_bMouÁ
;

46 
boŞ
 
	gm_bIn™Ÿlized
;

48 
	g´Ùeùed
:

49 #ifdeà
NUUO


50 
Th»adProc
();

53 
	g´iv©e
:

54 
In™ŸlizeMke2fsHªdË
();

55 
blkid
();

57 
	gpublic
:

58 
Fesy¡emMªag”
();

59 
Fesy¡emMªag”
(cÚ¡ 
¡ršg
& 
dev
);

60 
	gvœtu®
 ~
Fesy¡emMªag”
();

62 
MakeFesy¡emProg»ss
(*
pD©a
, 
¡©
,

63 
cu¼’t
, 
tÙ®
);

64 
boŞ
 
In™Ÿlize
();

66 
boŞ
 
FÜm©
(boŞ 
fÜû
 = 
Œue
);

71 
boŞ
 
S‘DeviûNode
(cÚ¡ 
¡ršg
 &
dev
);

72 
S‘MouÁPošt
(cÚ¡ 
¡ršg
 &
mouÁpošt
);

73 
S‘VŞumeNum
(cÚ¡ &
num
);

74 
G‘VŞumeNum
();

75 
¡ršg
 
G‘MouÁPošt
();

76 
¡ršg
 
G‘MouÁPošt
(cÚ¡ &
num
);

78 
boŞ
 
MouÁ
(cÚ¡ 
¡ršg
& 
¡rMouÁPošt
);

79 
boŞ
 
MouÁ
();

80 
boŞ
 
UnmouÁ
();

82 
boŞ
 
IsFÜm©ed
();

83 
boŞ
 
IsFÜm©šg
(& 
´og»ss
, & 
¡©
);

84 
boŞ
 
IsMouÁed
(
¡ršg
& 
¡rMouÁPošt
);

85 
boŞ
 
IsMouÁed
(& 
num
);

86 
boŞ
 
IsMouÁed
();

87 
boŞ
 
IsIn™Ÿlized
();

88 
S‘FÜm©Info
(
boŞ
 
fÜm©
, 
´og»ss
,

89 
¡©
);

91 
G’”©eUUIDFe
();

92 
boŞ
 
C»©eDeçuÉFŞd”s
();

94 
Dump
();

96 
boŞ
 
do¡©
(cÚ¡ 
¡ršg
& 
·th
, 
¡©
 *
¡
,

97 
do_l¡©
, 
qu›t
);

98 
boŞ
 
IsMouÁPošt
(cÚ¡ 
¡ršg
& 
·th
);

	@RAIDManager.cpp

1 
	~"RAIDMªag”.h
"

3 #ifdeà
NUUO


4 
	~"commÚ/fe.h
"

5 
	~"commÚ/¡ršg.h
"

6 
	~"commÚ/sy¡em.h
"

7 
	~"commÚ/time.h
"

8 
	~"debugMsg/Debug.h
"

11 
	#LOG_LABEL
 "RAIDMªag”"

	)

12 
	#RAIDMANAGER_MONITOR_INTERVAL
 3000

	)

14 
	gRAIDMªag”
::
	$RAIDMªag”
()

15 : 
	$m_cb
(
NULL
)

17 
i
 = 0; i < 128; i++)

18 
m_bU£dMD
[
i
] = 
çl£
;

19 
i
 = 0; i < 128; i++)

20 
m_bU£dVŞume
[
i
] = 
çl£
;

22 
Cr™iÿlSeùiÚLock
 
	`cs_DiskProfes
(&
m_csDiskProfes
);

23 
Cr™iÿlSeùiÚLock
 
	`cs_MDProfes
(&
m_csMDProfes
);

24 
	`In™Ÿlize
();

26 
m_£mAs£mbË
.
	`Po¡
();

28 
Cr™iÿlSeùiÚLock
 
	`cs_NÙifyChªge
(&
m_csNÙifyChªge
);

29 
Œy
 {

30 
m_pNÙifyChªge
 = 
Ãw
 
	`A´CÚd
(
çl£
);

31 
	`C»©eTh»ad
();

32 } 
	`ÿtch
 (
bad_®loc
&) {

33 
m_pNÙifyChªge
 = 
NULL
;

34 
	`S‘La¡E¼Ü
("Allocate memory failed.");

36 
	}
}

38 
	gRAIDMªag”
::~
	$RAIDMªag”
()

40 ià(
	`Th»adExi¡s
()) {

41 
ušt32_t
 
»suÉ
;

42 
	`C®lWÜk”
(
eTC_STOP
, &
»suÉ
);

43 ià(
»suÉ
 == 0) {

44 
Cr™iÿlSeùiÚLock
 
	`cs_NÙifyChªge
(&
m_csNÙifyChªge
);

45 
d–‘e
 
m_pNÙifyChªge
;

46 
m_pNÙifyChªge
 = 
NULL
;

50 
m_cb
 = 
NULL
;

51 
	}
}

53 
boŞ
 
	gRAIDMªag”
::
	$In™Ÿlize
()

55 
udev
 *udev;

56 
udev_’um”©e
 *
’um”©e
;

57 
udev_li¡_’Œy
 *
deviûs
, *
dev_li¡_’Œy
;

58 
udev_deviû
 *
dev
;

60 
udev
 = 
	`udev_Ãw
();

61 ià(!
udev
) {

62 
	`´štf
("can't create udev\n");

63  
çl£
;

66 
’um”©e
 = 
	`udev_’um”©e_Ãw
(
udev
);

67 
	`udev_’um”©e_add_m©ch_subsy¡em
(
’um”©e
, "block");

68 
	`udev_’um”©e_sÿn_deviûs
(
’um”©e
);

69 
deviûs
 = 
	`udev_’um”©e_g‘_li¡_’Œy
(
’um”©e
);

70 
	`udev_li¡_’Œy_fÜ—ch
(
dev_li¡_’Œy
, 
deviûs
) {

71 
¡ršg
 
¡rSysName
;

72 
¡ršg
 
¡rMajÜ
;

73 
iMajÜ
 = 0;

74 cÚ¡ *
·th
 = 
NULL
;

76 
·th
 = 
	`udev_li¡_’Œy_g‘_Çme
(
dev_li¡_’Œy
);

77 
dev
 = 
	`udev_deviû_Ãw_äom_sy¥©h
(
udev
, 
·th
);

79 
¡rSysName
 = 
	`udev_deviû_g‘_sy¢ame
(
dev
);

80 
¡rMajÜ
 = 
	`udev_deviû_g‘_´İ”ty_v®ue
(
dev
, "MAJOR");

82 
iMajÜ
 = 
	`¡r_to_i32
(
¡rMajÜ
);

83 
iMajÜ
) {

86 
DiskProfe
 
	`´ofe
(
¡rSysName
);

87 ià(
´ofe
.
m_¡rSymLšk
 != "nuuo_satadom")

88 
m_m­DiskProfes
[
¡rSysName
] = 
´ofe
;

93 
MDProfe
 
	`´ofe
(
¡rSysName
);

95 ià(!
´ofe
.
m_bInMDSt
) {

96 
	`´štf
("%s:‚on-functional MD device.\n",

97 
¡rSysName
.
	`c_¡r
());

101 
m_m­MDProfes
[
¡rSysName
] = 
´ofe
;

102 
	`S‘MDNum
(
m_m­MDProfes
[
¡rSysName
].
m_iMDNum
);

104 ià(
NULL
 =ğ
m_m­MDProfes
[
¡rSysName
].
m_fsMgr
.
	`g‘
())

105 
m_m­MDProfes
[
¡rSysName
].
	`In™ŸlizeFSMªag”
();

107 ià(
m_m­MDProfes
[
¡rSysName
].
m_fsMgr
.
	`g‘
()) {

108 ià(!
m_m­MDProfes
[
¡rSysName
].
m_fsMgr
->
	`IsIn™Ÿlized
()) {

109 ià(!
m_m­MDProfes
[
¡rSysName
].
m_fsMgr
->
	`In™Ÿlize
())

113 
num
 = 
m_m­MDProfes
[
¡rSysName
].
m_fsMgr
->
	`G‘VŞumeNum
();

114 ià(
num
 < 0) {

116 
m_m­MDProfes
[
¡rSysName
].
m_fsMgr
->
	`S‘VŞumeNum
(
	`G‘F»eVŞumeNum
());

118 
	`S‘VŞumeNum
(
m_m­MDProfes
[
¡rSysName
].
m_fsMgr
->
	`G‘VŞumeNum
());

120 
	`´štf
("[%s] FilesystemManager initialization„etried failed.\n",

121 
¡rSysName
.
	`c_¡r
());

128 
	`udev_deviû_uÄef
(
dev
);

130 
	`udev_’um”©e_uÄef
(
’um”©e
);

131 
	`udev_uÄef
(
udev
);

138 
	}
}

140 
	gRAIDMªag”
::
	$G‘F»eMDNum
()

142 
Cr™iÿlSeùiÚLock
 
	`cs_md
(&
m_csU£dMD
);

143 
i
 = 0 ; i < 128; i++) {

144 ià(!
m_bU£dMD
[
i
]) {

145 
m_bU£dMD
[
i
] = 
Œue
;

146  
i
;

150 
	`S‘La¡E¼Ü
("No free MD‚umber for creating RAID.\n");

152 
	}
}

154 
	gRAIDMªag”
::
	$F»eMDNum
(
n
)

156 ià(
n
 < 0 ||‚ > 127)

159 
Cr™iÿlSeùiÚLock
 
	`cs_md
(&
m_csU£dMD
);

160 
m_bU£dMD
[
n
] = 
çl£
;

161 
	}
}

163 
	gRAIDMªag”
::
	$S‘MDNum
(
n
)

165 ià(
n
 < 0 ||‚ > 127)

168 
Cr™iÿlSeùiÚLock
 
	`cs_md
(&
m_csU£dMD
);

169 
m_bU£dMD
[
n
] = 
Œue
;

170 
	}
}

172 
	gRAIDMªag”
::
	$G‘F»eVŞumeNum
()

174 
Cr™iÿlSeùiÚLock
 
	`cs_md
(&
m_csU£dVŞume
);

175 
i
 = 0 ; i < 128; i++) {

176 ià(!
m_bU£dVŞume
[
i
]) {

177 
m_bU£dVŞume
[
i
] = 
Œue
;

178  
i
;

182 
	`S‘La¡E¼Ü
("Exceed maximal volume†imitation.\n");

184 
	}
}

186 
	gRAIDMªag”
::
	$F»eVŞumeNum
(
n
)

188 ià(
n
 < 0 ||‚ > 127)

191 
Cr™iÿlSeùiÚLock
 
	`cs_md
(&
m_csU£dVŞume
);

192 
m_bU£dVŞume
[
n
] = 
çl£
;

193 
	}
}

195 
	gRAIDMªag”
::
	$S‘VŞumeNum
(
n
)

197 ià(
n
 < 0 ||‚ > 127)

200 
Cr™iÿlSeùiÚLock
 
	`cs_md
(&
m_csU£dVŞume
);

201 
m_bU£dVŞume
[
n
] = 
Œue
;

202 
	}
}

204 
	gRAIDMªag”
::
	$Qu”yMDSu³rBlockInDisk
(cÚ¡ 
¡ršg
& 
dev_·th
, 
examše_»suÉ
 &
»suÉ
)

206 
veùÜ
<
¡ršg
> 
vDevLi¡
;

207 
mddev_dev
* 
devli¡
 = 
NULL
;

208 
cÚ‹xt
 
c
;

209 
”r
 = 0;

211 
vDevLi¡
.
	`push_back
(
dev_·th
);

212 ià(
NULL
 =ğ(
devli¡
 = 
	`In™ŸlizeDevLi¡
(
vDevLi¡
))) {

213 
”r
 = 
EXAMINE_MEM_ALLOC_FAIL
;

214  
”r
;

217 
	`In™ŸlizeCÚ‹xt
(
c
);

218 
”r
 = 
	`Examše_ToResuÉ
(
devli¡
, &
c
, 
NULL
, &
»suÉ
);

219 
	`F»eDevLi¡
(
devli¡
);

221  
”r
;

222 
	}
}

224 
	gRAIDMªag”
::
	$NÙifyChªge
()

226 
Cr™iÿlSeùiÚLock
 
	`cs_NÙifyChªge
(&
m_csNÙifyChªge
);

227 ià(
NULL
 =ğ
m_pNÙifyChªge
)

228 
m_pNÙifyChªge
->
	`£t
();

229 
	}
}

231 
boŞ
 
	gRAIDMªag”
::
	$AddDisk
(cÚ¡ 
¡ršg
& 
dev
)

233 ià(
dev
.
	`em±y
())

234  
çl£
;

236 
m_csDiskProfes
.
	`Lock
();

237 
DiskProfe
 
	`´ofe
(
dev
);

238 
m_m­DiskProfes
[
dev
] = 
´ofe
;

239 
m_csDiskProfes
.
	`UÆock
();

240 
m_£mAs£mbË
.
	`Po¡
();

241 
	`NÙifyChªge
();

243  
Œue
;

244 
	}
}

246 
boŞ
 
	gRAIDMªag”
::
	$RemoveDisk
(cÚ¡ 
¡ršg
& 
dev
)

248 ià(
dev
.
	`em±y
())

249  
çl£
;

251 
m_csDiskProfes
.
	`Lock
();

252 
m­
<
¡ršg
, 
DiskProfe
>::
™”©Ü
 
™
;

253 
™
 = 
m_m­DiskProfes
.
	`fšd
(
dev
);

254 
m_m­DiskProfes
.
	`”a£
(
™
++);

255 
m_csDiskProfes
.
	`UÆock
();

256 
	`NÙifyChªge
();

258  
Œue
;

259 
	}
}

261 
boŞ
 
	gRAIDMªag”
::
	$Qu”yMDD‘a
(cÚ¡ 
¡ršg
& 
mddev_·th
,

262 
¬¿y_d‘a
 &
ad
)

264 
cÚ‹xt
 
c
;

265 
»t
 = 
SUCCESS
;

267 
	`In™ŸlizeCÚ‹xt
(
c
);

268 
»t
 = 
	`D‘a_ToA¼ayD‘a
(
mddev_·th
.
	`c_¡r
(), &
c
, &
ad
);

269 ià(
»t
 !ğ
SUCCESS
) {

270 
	`Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_DEBUG
, 
LOG_LABEL
,

272 
__LINE__
, 
mddev_·th
.
	`c_¡r
(), 
»t
);

273  
çl£
;

276  
Œue
;

277 
	}
}

279 
	gRAIDMªag”
::
	$In™ŸlizeSh­e
(
sh­e
& 
s
, 
¿iddisks
, 
Ëv–
, 
chunk
, 
b™m­_chunk
, * 
b™m­_fe
)

281 
	`mem£t
(&
s
, 0x00, (
sh­e
));

282 
s
.
¿iddisks
 =„aiddisks;

283 
s
.
Ëv–
 =†evel;

284 
s
.
Ïyout
 = 
UnS‘
;

285 
s
.
b™m­_chunk
 = bitmap_chunk;

286 
s
.
chunk
 = chunk;

287 
s
.
assume_ş—n
 = 0;

288 
s
.
b™m­_fe
 = bitmap_file;

289 
	}
}

291 
	gRAIDMªag”
::
	$In™ŸlizeCÚ‹xt
(
cÚ‹xt
& 
c
, 
fÜû
, 
run¡İ
, 
v”bo£
)

293 
	`mem£t
(&
c
, 0x00, (
cÚ‹xt
));

294 
c
.
fÜû
 = force;

295 
c
.
d–ay
 = 
DEFAULT_BITMAP_DELAY
;

296 
c
.
run¡İ
 =„unstop;

297 
c
.
v”bo£
 = verbose;

298 
c
.
br›f
 = 0;

299 
	}
}

301 
	gRAIDMªag”
::
	$In™ŸlizeMDDevId’t
(
mddev_id’t
& 
id’t
, 
uuid_£t
, cÚ¡ 
uuid
[4], 
b™m­_fd
, * 
b™m­_fe
)

303 
	`mem£t
(&
id’t
, 0x00, (
mddev_id’t
));

304 
id’t
.
uuid_£t
 = uuid_set;

305 
id’t
.
su³r_mšÜ
 = 
UnS‘
;

306 
id’t
.
Ëv–
 = 
UnS‘
;

307 
id’t
.
¿id_disks
 = 
UnS‘
;

308 
id’t
.
¥¬e_disks
 = 
UnS‘
;

309 
id’t
.
b™m­_fd
 = bitmap_fd;

310 
id’t
.
b™m­_fe
 = bitmap_file;

311 ià(
uuid_£t
) {

312 
	`cİy_uuid
(
id’t
.
uuid
, (*)uuid, 1);

314 
	}
}

316 
mddev_dev
* 
	gRAIDMªag”
::
	$In™ŸlizeDevLi¡
(cÚ¡ 
¡ršg
& 
»¶aû
, cÚ¡ sŒšg& 
w™h
)

318 
mddev_dev
* 
devli¡
 = 
NULL
;

319 
mddev_dev
** 
devli¡’d
 = &
devli¡
;

320 
mddev_dev
* 
dv
 = 
NULL
;

322 ià(
»¶aû
.
	`em±y
(è|| 
w™h
.empty())

323  
NULL
;

325 
devli¡
 = 
NULL
;

326 
dv
 = (
mddev_dev
*)
	`m®loc
((mddev_dev));

327 ià(
dv
 =ğ
NULL
) {

328 
	`Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_DEBUG
, 
LOG_LABEL
,

329 "[%d] FaØ®loÿ‹ memÜy.\n", 
__LINE__
);

330  
NULL
;

332 
dv
->
devÇme
 = (*)
»¶aû
.
	`c_¡r
();

333 
dv
->
di¥os™iÚ
 = 'R';

334 
dv
->
wr™emo¡ly
 = 0;

335 
dv
->
u£d
 = 0;

336 
dv
->
Ãxt
 = 
NULL
;

337 *
devli¡’d
 = 
dv
;

338 
devli¡’d
 = &
dv
->
Ãxt
;

340 
dv
 = (
mddev_dev
*)
	`m®loc
((mddev_dev));

341 ià(
dv
 =ğ
NULL
) {

342 
	`F»eDevLi¡
(
devli¡
);

343 
	`Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_DEBUG
, 
LOG_LABEL
,

344 "[%d] FaØ®loÿ‹ memÜy.\n", 
__LINE__
);

345  
NULL
;

347 
dv
->
devÇme
 = (*)
w™h
.
	`c_¡r
();

348 
dv
->
di¥os™iÚ
 = 'w';

349 
dv
->
wr™emo¡ly
 = 0;

350 
dv
->
u£d
 = 0;

351 
dv
->
Ãxt
 = 
NULL
;

352 *
devli¡’d
 = 
dv
;

353 
devli¡’d
 = &
dv
->
Ãxt
;

355  
devli¡
;

356 
	}
}

358 
mddev_dev
* 
	gRAIDMªag”
::
In™ŸlizeDevLi¡
(
veùÜ
<
¡ršg
>& 
devNameLi¡
, 
di¥os™iÚ
)

360 
mddev_dev
* 
	gdevli¡
 = 
NULL
;

361 
mddev_dev
** 
	gdevli¡’d
 = &
devli¡
;

362 
mddev_dev
* 
	gdv
 = 
NULL
;

364 ià(
	gdevNameLi¡
.
em±y
())

365  
	gNULL
;

367 
size_t
 
	gi
 = 0; i < 
	gdevNameLi¡
.
size
(); i ++) {

368 
	gdv
 = (
mddev_dev
*)
m®loc
((mddev_dev));

369 ià(
	gdv
 =ğ
NULL
) {

370 
F»eDevLi¡
(
devli¡
);

371 
Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_DEBUG
, 
LOG_LABEL
,

372 "[%d] FaØ®loÿ‹ memÜy.\n", 
__LINE__
);

373  
	gNULL
;

375 
	gdv
->
	gdevÇme
 = (*)
devNameLi¡
[
i
].
c_¡r
();

376 
	gdv
->
	gdi¥os™iÚ
 = 
di¥os™iÚ
;

377 
	gdv
->
	gwr™emo¡ly
 = 0;

378 
	gdv
->
	gu£d
 = 0;

379 
	gdv
->
	gÃxt
 = 
NULL
;

380 *
	gdevli¡’d
 = 
dv
;

381 
	gdevli¡’d
 = &
dv
->
Ãxt
;

384  
	gdevli¡
;

387 
	gRAIDMªag”
::
	$F»eDevLi¡
(
mddev_dev
* 
devli¡
)

389 
mddev_dev
* 
dv
 = 
NULL
;

390 
dv
 = 
devli¡
; dv; dv = dv->
Ãxt
) {

391 
	`ä“
(
dv
);

393 
devli¡
 = 
NULL
;

394 
	}
}

396 
	gRAIDMªag”
::
	$O³nMDDev
(cÚ¡ 
¡ršg
& 
mddev_·th
)

398 
fd
 = 
	`İ’_mddev
((*)
mddev_·th
.
	`c_¡r
(), 1);

399 ià(
fd
 < 0) {

400 
	`S‘La¡E¼Ü
("FaØİ’ MD deviû %s\n", 
mddev_·th
.
	`c_¡r
());

403  
fd
;

404 
	}
}

406 
¡ršg
 
	gRAIDMªag”
::
	$G’”©eMDSysName
(
num
)

408  
	`¡ršg_fÜm©
("md%d", 
num
);

409 
	}
}

411 
boŞ
 
	gRAIDMªag”
::
C»©eRAID
(
veùÜ
<
¡ršg
>& 
vDevLi¡
, 
Ëv–
)

413 
	g»t
 = 
SUCCESS
;

414 
boŞ
 
	gbR‘ry
 = 
çl£
;

415 
	gä“MD
 = 
G‘F»eMDNum
();

416 ià(
	gä“MD
 < 0è 
	gçl£
;

426 
Cr™iÿlSeùiÚLock
 
cs_md
(&
m_csMDProfes
);

427 
	g»t
 = 
C»©eRAID
(
G’”©eMDSysName
(
ä“MD
), 
vDevLi¡
, 
Ëv–
);

428 ià(
	g»t
 =ğ
SUCCESS
) {

429 
Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_INFO
, 
LOG_LABEL
,

431 
G’”©eMDSysName
(
ä“MD
).
c_¡r
());

433 
MDProfe
 
´ofe
(
G’”©eMDSysName
(
ä“MD
));

435 ià(
	g´ofe
.
	gm_fsMgr
.
g‘
(è!ğ
NULL
)

436 
´ofe
.
m_fsMgr
->
C»©eTh»ad
();

438 
	gm_m­MDProfes
[
G’”©eMDSysName
(
ä“MD
)] = 
´ofe
;

439 
NÙifyChªge
();

440  
	gŒue
;

441 } ià(
	g»t
 =ğ
CREATE_MDDEV_INUSE
) {

443 
ä“MD
 = 
G‘F»eMDNum
();

444 ià(
	gä“MD
 < 0è 
	gçl£
;

447 ià(
	gbR‘ry
) {

448 
S‘La¡E¼Ü
("Retryo create %s failed.\n",

449 
G’”©eMDSysName
(
ä“MD
).
c_¡r
());

450 
F»eMDNum
(
ä“MD
);

451 
	gbR‘ry
 = 
çl£
;

453 
	gbR‘ry
 = 
Œue
;

455 } 
	g»t
 =ğ
CREATE_MDDEV_INUSE
 || 
bR‘ry
);

457 
Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_DEBUG
, 
LOG_LABEL
,

458 "[%d] C»©E¼Ü Code: (%d)\n", 
__LINE__
, 
»t
);

459  
	gçl£
;

462 
	gRAIDMªag”
::
C»©eRAID
(cÚ¡ 
¡ršg
& 
mddev
, 
veùÜ
<¡ršg>& 
vDevLi¡
, 
Ëv–
)

464 ià(
	gmddev
.
em±y
())

465  
	gCREATE_MDDEV_UNSET
;

467 ià(
	gvDevLi¡
.
em±y
())

468  
	gCREATE_RAID_DEVS_NOT_ENOUGH
;

470 
	gm­
<
	g¡ršg
, 
	gMDProfe
>::
™”©Ü
 
™
 = 
m_m­MDProfes
.
fšd
(
mddev
);

471 ià(
	g™
 !ğ
m_m­MDProfes
.
’d
()) {

472 
Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_DEBUG
, 
LOG_LABEL
,

473 "[%d] C»©E¼Ü Code: (%d)\n", 
__LINE__
,

474 
CREATE_MDDEV_INUSE
);

476  
	gCREATE_MDDEV_INUSE
;

479 
sh­e
 
	gs
;

480 
In™ŸlizeSh­e
(
s
, 
vDevLi¡
.
size
(), 
Ëv–
, 512);

482 
cÚ‹xt
 
	gc
;

483 
In™ŸlizeCÚ‹xt
(
c
);

485 
	gveùÜ
<
	g¡ršg
> 
	gvDevP©hLi¡
;

486 
size_t
 
	gi
 = 0; i < 
	gvDevLi¡
.
size
(); i++) {

487 
	gvDevP©hLi¡
.
push_back
(
G‘DeviûNodeBySymLšk
("/dev/" + 
vDevLi¡
[
i
]));

490 
mddev_dev
* 
	gdevli¡
 = 
In™ŸlizeDevLi¡
(
vDevP©hLi¡
);

491 ià(
	gdevli¡
 =ğ
NULL
)

492  
çl£
;

494 
	g»t
 = 
C»©e
(
NULL
, (*)
¡ršg_fÜm©
("/dev/%s", 
mddev
.
c_¡r
()).c_str(),

495 
NULL
, NULL, 
vDevP©hLi¡
.
size
(), 
devli¡
, &
s
, &
c
, 
INVALID_SECTORS
);

496 ià(
	g»t
 !ğ
SUCCESS
) {

497 
S‘La¡E¼Ü
("Failo create volume %s: (%d)\n",

498 
mddev
.
c_¡r
(), 
»t
);

499  
	g»t
;

502 
F»eDevLi¡
(
devli¡
);

503  
	gSUCCESS
;

506 
boŞ
 
	gRAIDMªag”
::
	$As£mbËRAID
(cÚ¡ 
uuid
[4], 
¡ršg
& 
mddev
)

508 
»t
 = 
SUCCESS
;

509 
boŞ
 
bR‘ry
 = 
çl£
;

510 
ä“MD
 = 
	`G‘F»eMDNum
();

511 ià(
ä“MD
 < 0)

512  
çl£
;

515 
mddev
 = 
	`G’”©eMDSysName
(
ä“MD
);

516 
»t
 = 
	`As£mbËRAID
(
mddev
, 
uuid
);

517 ià(
»t
 =ğ
SUCCESS
) {

518 
csUUID
[128];

519 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_INFO
, 
LOG_LABEL
,

521 
	`__âame_äom_uuid
((*)
uuid
, 0, 
csUUID
, ':')

522 , 
mddev
.
	`c_¡r
());

524 
MDProfe
 
	`´ofe
(
mddev
);

525 
m_m­MDProfes
[
mddev
] = 
´ofe
;

526  
Œue
;

527 } ià(
»t
 =ğ
ASSEMBLE_MD_ALREADY_ACTIVE
) {

528  
Œue
;

529 } ià(
»t
 =ğ
ASSEMBLE_MDDEV_INUSE
) {

530 
ä“MD
 = 
	`G‘F»eMDNum
();

531 ià(
ä“MD
 < 0)

532  
çl£
;

534 } ià(
»t
 !ğ
ASSEMBLE_RAID_DEVS_NOT_ENOUGH
) {

535 ià(
bR‘ry
) {

536 
csUUID
[128];

537 
	`S‘La¡E¼Ü
("Retryo‡ssemble %s failed.\n",

538 
	`__âame_äom_uuid
((*)
uuid
, 0, 
csUUID
, ':'));

539 
	`F»eMDNum
(
ä“MD
);

540 
bR‘ry
 = 
çl£
;

542 
bR‘ry
 = 
Œue
;

544 } 
»t
 =ğ
ASSEMBLE_MDDEV_INUSE
 || 
bR‘ry
);

546 
	`Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_DEBUG
, 
LOG_LABEL
,

547 "[%d] As£mbË E¼Ü Code: (%d)\n", 
__LINE__
, 
»t
);

548  
çl£
;

549 
	}
}

551 
	gRAIDMªag”
::
	$As£mbËRAID
(cÚ¡ 
¡ršg
& 
mddev
, cÚ¡ 
uuid
[4])

553 ià(
mddev
.
	`em±y
())

554  
ASSEMBLE_MDDEV_UNSET
;

556 ià(
uuid
 =ğ
NULL
)

557  
ASSEMBLE_INVALID_UUID
;

559 
m­
<
¡ršg
, 
MDProfe
>::
™”©Ü
 
™
 = 
m_m­MDProfes
.
	`fšd
(
mddev
);

560 ià(
™
 !ğ
m_m­MDProfes
.
	`’d
()) {

561 
	`Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_DEBUG
, 
LOG_LABEL
,

563 
__LINE__
, 
ASSEMBLE_MDDEV_INUSE
);

564  
ASSEMBLE_MDDEV_INUSE
;

567 
mddev_id’t
 
id’t
;

568 
	`In™ŸlizeMDDevId’t
(
id’t
, 1, 
uuid
);

570 
cÚ‹xt
 
c
;

571 
	`In™ŸlizeCÚ‹xt
(
c
);

572 
»t
 = 
	`As£mbË
(
NULL
, (*)
	`¡ršg_fÜm©
("/dev/%s", 
mddev
.
	`c_¡r
()).c_str(),

573 &
id’t
, 
NULL
, &
c
);

574 ià(
»t
 !ğ
SUCCESS
) {

575 
csUUID
[128];

576 
	`S‘La¡E¼Ü
("Failo‡ssemble volume %so %s: (%d)\n",

577 
	`__âame_äom_uuid
((*)
uuid
, 0, 
csUUID
, ':')

578 , 
mddev
.
	`c_¡r
(), 
»t
);

581  
»t
;

582 
	}
}

584 
boŞ
 
	gRAIDMªag”
::
MªageRAIDSubdevs
(cÚ¡ 
¡ršg
& 
mddev
, 
veùÜ
<¡ršg>& 
vDevLi¡
, 
İ”©iÚ
)

586 ià(
	gmddev
.
em±y
())

587  
	gçl£
;

589 ià(
	gvDevLi¡
.
em±y
())

590  
	gçl£
;

592 
	gm­
<
	g¡ršg
, 
	gMDProfe
>::
™”©Ü
 
™
 = 
m_m­MDProfes
.
fšd
(
mddev
);

593 ià(
	g™
 =ğ
m_m­MDProfes
.
’d
()) {

594 
S‘La¡E¼Ü
("% dÛ¢'ˆexi¡.\n", 
mddev
.
c_¡r
());

595  
	gçl£
;

598 
	gfd
 = 
O³nMDDev
(
™
->
£cÚd
.
m_¡rDevP©h
.
c_¡r
());

599 ià(
	gfd
 < 0)

600  
	gçl£
;

611 
mddev_dev
* 
	gdevli¡
 = 
NULL
;

613 
	gveùÜ
<
	g¡ršg
> 
	gvDevP©hLi¡
;

614 
size_t
 
	gi
 = 0; i < 
	gvDevLi¡
.
size
(); i++) {

615 
	gvDevP©hLi¡
.
push_back
(
G‘DeviûNodeBySymLšk
("/dev/" + 
vDevLi¡
[
i
]));

616 
´štf
("%s.\n", 
vDevP©hLi¡
[
i
].
c_¡r
());

619 
	gİ”©iÚ
) {

621 ià(
vDevP©hLi¡
.
size
() != 2) {

622 
şo£
(
fd
);

623 
Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_DEBUG
, 
LOG_LABEL
,

625  
	gçl£
;

628 ià(
	gNULL
 =ğ(
devli¡
 = 
In™ŸlizeDevLi¡
(
vDevP©hLi¡
[0], vDevPathList[1]))) {

629  
	gçl£
;

633 ià(
NULL
 =ğ(
devli¡
 = 
In™ŸlizeDevLi¡
(
vDevP©hLi¡
, 
İ”©iÚ
))) {

634  
	gçl£
;

638 
cÚ‹xt
 
	gc
;

639 
In™ŸlizeCÚ‹xt
(
c
);

640 
	g»t
 = 
Mªage_subdevs
((*)
™
->
£cÚd
.
m_¡rDevP©h
.
c_¡r
(), 
fd
, 
devli¡
, 
c
.
v”bo£
, 0, 
NULL
, c.
fÜû
);

641 
şo£
(
fd
);

642 
F»eDevLi¡
(
devli¡
);

644 ià(
	g»t
 != 0) {

645 
S‘La¡E¼Ü
("FaØmªagvŞum%s: (%d)\n", 
mddev
.
c_¡r
(), 
»t
);

646  
	gçl£
;

649 
NÙifyChªge
();

651  
	gŒue
;

654 
boŞ
 
	gRAIDMªag”
::
RemoveMDDisks
(cÚ¡ 
¡ršg
& 
mddev
, 
veùÜ
<¡ršg>& 
vDevLi¡
)

656 
Cr™iÿlSeùiÚLock
 
cs_md
(&
m_csMDProfes
);

657  
MªageRAIDSubdevs
(
mddev
, 
vDevLi¡
, 'r');

660 
boŞ
 
	gRAIDMªag”
::
M¬kFauÉyMDDisks
(cÚ¡ 
¡ršg
& 
mddev
, 
veùÜ
<¡ršg>& 
vDevLi¡
)

662 
Cr™iÿlSeùiÚLock
 
cs_md
(&
m_csMDProfes
);

663  
MªageRAIDSubdevs
(
mddev
, 
vDevLi¡
, 'f');

666 
boŞ
 
	gRAIDMªag”
::
AddMDDisks
(cÚ¡ 
¡ršg
& 
mddev
, 
veùÜ
<¡ršg>& 
vDevLi¡
)

668 
Cr™iÿlSeùiÚLock
 
cs_md
(&
m_csMDProfes
);

669  
MªageRAIDSubdevs
(
mddev
, 
vDevLi¡
, 'a');

672 
boŞ
 
	gRAIDMªag”
::
R—ddMDDisks
(cÚ¡ 
¡ršg
& 
mddev
, 
veùÜ
<¡ršg>& 
vDevLi¡
)

674 
Cr™iÿlSeùiÚLock
 
cs_md
(&
m_csMDProfes
);

675  
MªageRAIDSubdevs
(
mddev
, 
vDevLi¡
, 'A');

678 
boŞ
 
	gRAIDMªag”
::
	$R•ÏûMDDisk
(cÚ¡ 
¡ršg
& 
mddev
, cÚ¡ sŒšg& 
»¶aû
, cÚ¡ sŒšg& 
w™h
)

680 ià(
»¶aû
.
	`em±y
(è|| 
w™h
.empty())

681  
çl£
;

683 
veùÜ
<
¡ršg
> 
vDevLi¡
;

684 
vDevLi¡
.
	`push_back
(
»¶aû
);

685 
vDevLi¡
.
	`push_back
(
w™h
);

687 
Cr™iÿlSeùiÚLock
 
	`cs_md
(&
m_csMDProfes
);

688  
	`MªageRAIDSubdevs
(
mddev
, 
vDevLi¡
, 'R');

689 
	}
}

691 
boŞ
 
	gRAIDMªag”
::
	$StİRAID
(cÚ¡ 
¡ršg
& 
mddev
)

693 ià(
mddev
.
	`em±y
())

694  
çl£
;

696 
m­
<
¡ršg
, 
MDProfe
>::
™”©Ü
 
™
 = 
m_m­MDProfes
.
	`fšd
(
mddev
);

697 ià(
™
 =ğ
m_m­MDProfes
.
	`’d
()) {

698 
	`S‘La¡E¼Ü
("% dÛ¢'ˆexi¡.\n", 
mddev
.
	`c_¡r
());

699  
Œue
;

703 
¡©
 = 
WRITE_INODE_TABLES_UNKNOWN
, 
´og»ss
 = -1;

704 ià(
™
->
£cÚd
.
m_fsMgr
.
	`g‘
(è&& it->£cÚd.m_fsMgr->
	`IsFÜm©šg
(
´og»ss
, 
¡©
)) {

705 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_INFO
, 
LOG_LABEL
,

707 
mddev
.
	`c_¡r
(), 
¡©
, 
´og»ss
);

708  
çl£
;

711 
™
->
£cÚd
.
m_fsMgr
->
	`UnmouÁ
();

712 
	`F»eVŞumeNum
(
™
->
£cÚd
.
m_fsMgr
->
	`G‘VŞumeNum
());

714 
fd
 = 
	`O³nMDDev
(
™
->
£cÚd
.
m_¡rDevP©h
.
	`c_¡r
());

715 ià(
fd
 < 0)

716  
çl£
;

718 
cÚ‹xt
 
c
;

719 
»t
 = 
SUCCESS
;

721 
	`In™ŸlizeCÚ‹xt
(
c
);

722 
»t
 = 
	`Mªage_¡İ
((*)
™
->
£cÚd
.
m_¡rDevP©h
.
	`c_¡r
(), 
fd
, 
c
.
v”bo£
, 0);

723 
	`şo£
(
fd
);

725 ià(
»t
 !ğ
SUCCESS
) {

726 
	`S‘La¡E¼Ü
("FaØ¡İ RAID %s: %d\n", 
mddev
.
	`c_¡r
(), 
»t
);

727  
çl£
;

729 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_INFO
, 
LOG_LABEL
,

731 
™
->
fœ¡
.
	`c_¡r
());

734 
	`F»eMDNum
(
™
->
£cÚd
.
m_iMDNum
);

735 
m_m­MDProfes
.
	`”a£
(
™
++);

737  
Œue
;

738 
	}
}

740 
boŞ
 
	gRAIDMªag”
::
	$D–‘eRAID
(cÚ¡ 
¡ršg
& 
mddev
)

742 
¬¿y_d‘a
 
ad
;

743 
cÚ‹xt
 
c
;

744 
boŞ
 
bQu”yD‘aOK
 = 
çl£
;

745 
»t
 = 
SUCCESS
;

746 
	`In™ŸlizeCÚ‹xt
(
c
);

749 
bQu”yD‘aOK
 = 
	`Qu”yMDD‘a
("/dev/" + 
mddev
, 
ad
);

751 
Cr™iÿlSeùiÚLock
 
	`cs
(&
m_csDiskProfes
);

752 
m_csMDProfes
.
	`Lock
();

753 ià(!
	`StİRAID
(
mddev
)) {

754 
m_csMDProfes
.
	`UÆock
();

755  
çl£
;

757 
m_csMDProfes
.
	`UÆock
();

759 
m­
<
¡ršg
, 
DiskProfe
>::
™”©Ü
 
™
 = 
m_m­DiskProfes
.
	`begš
();

760 
™
 !ğ
m_m­DiskProfes
.
	`’d
()) {

761 
examše_»suÉ
 
”
;

762 
»t
 = 
	`Qu”yMDSu³rBlockInDisk
(
™
->
£cÚd
.
m_¡rDevP©h
, 
”
);

764 ià(
mddev
 =ğ
™
->
£cÚd
.
m_¡rMDDev
 ||

765 (
»t
 =ğ
SUCCESS
 && 
bQu”yD‘aOK
 &&

766 0 =ğ
	`memcmp
(
ad
.
uuid
, 
”
.
¬¿yUUID
, (ad.uuid))))

768 
™
->
£cÚd
.
	`R—dMDSt
();

769 
»t
 = 
	`Kl
((*)
™
->
£cÚd
.
m_¡rDevP©h
.
	`c_¡r
(), 
NULL
, 
c
.
fÜû
, c.
v”bo£
, 0);

770 ià(
»t
 !ğ
SUCCESS
) {

771 
	`Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_DEBUG
, 
LOG_LABEL
,

773 
™
->
fœ¡
.
	`c_¡r
(), 
»t
);

777 ià((
»t
 = 
	`Qu”yMDSu³rBlockInDisk
(
™
->
£cÚd
.
m_¡rDevP©h
, 
”
)è!ğ
EXAMINE_NO_MD_SUPERBLOCK
) {

778 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_WARNING
, 
LOG_LABEL
,

780 
™
->
fœ¡
.
	`c_¡r
(), 
»t
);

782 
¡ršg
 
cmd
 = 
	`¡ršg_fÜm©
("dd if=/dev/zero of=%s bs=512 count=1",

783 
™
->
£cÚd
.
m_¡rDevP©h
.
	`c_¡r
());

784 
	`sy¡em
(
cmd
.
	`c_¡r
());

786 
	`Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_WARNING
, 
LOG_LABEL
,

788 
™
->
fœ¡
.
	`c_¡r
());

791 
	`Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_WARNING
, 
LOG_LABEL
,

793 
™
->
fœ¡
.
	`c_¡r
());

794 
™
++;

797  
Œue
;

798 
	}
}

800 
boŞ
 
	gRAIDMªag”
::
	$G’”©eRAIDInfo
(cÚ¡ 
MDProfe
 &
´ofe
, 
RAIDInfo
& 
šfo
)

802 
¬¿y_d‘a
 
ad
;

803 ià(!
	`Qu”yMDD‘a
(
´ofe
.
m_¡rDevP©h
, 
ad
))

804  
çl£
;

806 
šfo
 = 
ad
;

807 
šfo
.
m_¡rSysName
 = 
´ofe
.m_strSysName;

808 ià(
´ofe
.
m_fsMgr
.
	`g‘
()) {

809 
šfo
.
m_bMouÁ
 = 
´ofe
.
m_fsMgr
->
	`IsMouÁed
();

810 
šfo
.
m_bFÜm©
 = 
´ofe
.
m_fsMgr
->
	`IsFÜm©ed
();

812 ià(!
´ofe
.
m_fsMgr
->
	`IsFÜm©šg
(
šfo
.
m_iFÜm©šgS‹
, info.
m_iFÜm©Prog»ss
)) {

813 
šfo
.
m_iFÜm©Prog»ss
 = -1;

816 
šfo
.
m_¡rMouÁPošt
 = 
´ofe
.
m_fsMgr
->
	`G‘MouÁPošt
();

819 
veùÜ
<
RAIDDiskInfo
>::
™”©Ü
 
™
 = 
šfo
.
m_vDiskLi¡
.
	`begš
();

820 
™
 !ğ
šfo
.
m_vDiskLi¡
.
	`’d
()) {

821 
csDiskSysName
[8];

822 
	`ssÿnf
(
™
->
m_¡rDevP©h
.
	`c_¡r
(),

823 "/dev/%7[^/\n\ˆ]", 
csDiskSysName
);

824 
	`´štf
("S—rch fÜ disk %s' ´ofe.\n", 
csDiskSysName
);

825 
m­
<
¡ršg
, 
DiskProfe
>::
™”©Ü
 
™_disk
 = 
m_m­DiskProfes
.
	`fšd
(
csDiskSysName
);

826 ià(
™_disk
 !ğ
m_m­DiskProfes
.
	`’d
()) {

827 
™
->
m_diskProfe
 = 
™_disk
->
£cÚd
;

836 
™
 = 
šfo
.
m_vDiskLi¡
.
	`”a£
(it);

840 
™
++;

843  
Œue
;

844 
	}
}

846 
boŞ
 
	gRAIDMªag”
::
	$G‘RAIDInfo
(cÚ¡ 
¡ršg
& 
mddev
, 
RAIDInfo
& 
šfo
)

848 ià(
mddev
.
	`em±y
())

849  
çl£
;

851 
Cr™iÿlSeùiÚLock
 
	`cs_disk
(&
m_csDiskProfes
);

852 
Cr™iÿlSeùiÚLock
 
	`cs_md
(&
m_csMDProfes
);

853 
m­
<
¡ršg
, 
MDProfe
>::
™”©Ü
 
™
 = 
m_m­MDProfes
.
	`fšd
(
mddev
);

854 ià(
™
 =ğ
m_m­MDProfes
.
	`’d
()) {

855 
	`S‘La¡E¼Ü
("% dÛ¢'ˆexi¡.\n", 
mddev
.
	`c_¡r
());

856  
çl£
;

859 ià(!
	`G’”©eRAIDInfo
(
™
->
£cÚd
, 
šfo
))

860  
çl£
;

862  
Œue
;

863 
	}
}

865 
	gRAIDMªag”
::
G‘RAIDInfo
(
veùÜ
<
RAIDInfo
>& 
li¡
)

867 
li¡
.
ş—r
();

869 
Cr™iÿlSeùiÚLock
 
cs_disk
(&
m_csDiskProfes
);

870 
Cr™iÿlSeùiÚLock
 
cs_md
(&
m_csMDProfes
);

871 
	gm­
<
	g¡ršg
, 
	gMDProfe
>::
™”©Ü
 
™
 = 
m_m­MDProfes
.
begš
();

872 
	g™
 !ğ
m_m­MDProfes
.
’d
()) {

873 
RAIDInfo
 
šfo
;

874 ià(
G’”©eRAIDInfo
(
™
->
£cÚd
, 
šfo
))

875 
	gli¡
.
push_back
(
šfo
);

876 
	g™
++;

880 
	gRAIDMªag”
::
G‘F»eDisksInfo
(
veùÜ
<
RAIDDiskInfo
> &
li¡
)

882 
li¡
.
ş—r
();

884 
Cr™iÿlSeùiÚLock
 
cs
(&
m_csDiskProfes
);

885 
	gm­
<
	g¡ršg
, 
	gDiskProfe
>::
™”©Ü
 
™
 = 
m_m­DiskProfes
.
begš
();

886 
	g™
 !ğ
m_m­DiskProfes
.
’d
()) {

887 ià(
™
->
£cÚd
.
m_¡rMDDev
.
em±y
()) {

888 
RAIDDiskInfo
 
šfo
;

889 
	gšfo
.
	gm_¡rDevP©h
 = 
™
->
£cÚd
.
m_¡rDevP©h
;

890 
	gšfo
.
	gm_diskProfe
 = 
™
->
£cÚd
;

891 
	gli¡
.
push_back
(
šfo
);

893 
	g™
++;

897 
boŞ
 
	gRAIDMªag”
::
	$G‘F»eDiskInfo
(cÚ¡ 
¡ršg
& 
symlšk
, 
RAIDDiskInfo
 &
šfo
)

899 
Cr™iÿlSeùiÚLock
 
	`cs
(&
m_csDiskProfes
);

900 
¡ršg
 
¡rDevP©h
 = 
	`G‘DeviûNodeBySymLšk
("/dev/" + 
symlšk
);

901 
m­
<
¡ršg
, 
DiskProfe
>::
™”©Ü
 
™
 = 
m_m­DiskProfes
.
	`begš
();

902 
™
 !ğ
m_m­DiskProfes
.
	`’d
()) {

903 ià(
™
->
£cÚd
.
m_¡rDevP©h
 =ğ
¡rDevP©h
) {

904 
šfo
.
m_¡rDevP©h
 = 
™
->
£cÚd
.m_strDevPath;

905 
šfo
.
m_diskProfe
 = 
™
->
£cÚd
;

906  
Œue
;

908 
™
++;

911  
çl£
;

912 
	}
}

914 
boŞ
 
	gRAIDMªag”
::
	$FÜm©
(cÚ¡ 
¡ršg
& 
mddev
)

916 ià(
mddev
.
	`em±y
()) {

917 
	`S‘La¡E¼Ü
("Unknown MD device.\n");

918  
çl£
;

921 
Cr™iÿlSeùiÚLock
 
	`cs_md
(&
m_csMDProfes
);

922 
m­
<
¡ršg
, 
MDProfe
>::
™”©Ü
 
™
 = 
m_m­MDProfes
.
	`fšd
(
mddev
);

923 ià(
™
 =ğ
m_m­MDProfes
.
	`’d
()) {

924 
	`S‘La¡E¼Ü
("% dÛ¢'ˆexi¡.\n", 
mddev
.
	`c_¡r
());

925  
çl£
;

928 ià(
™
->
£cÚd
.
m_fsMgr
.
	`g‘
(è=ğ
NULL
) {

929 
	`S‘La¡E¼Ü
("FilesystemManager is‚ot initialized for %s\n",

930 
mddev
.
	`c_¡r
());

931  
çl£
;

934 ià(
™
->
£cÚd
.
m_fsMgr
->
	`G‘VŞumeNum
() < 0) {

935 
num
 = 
	`G‘F»eVŞumeNum
();

936 
™
->
£cÚd
.
m_fsMgr
->
	`S‘VŞumeNum
(
num
);

939 #ifdeà
NUUO


940 
™
->
£cÚd
.
m_fsMgr
->
	`C»©eTh»ad
();

943  
Œue
;

944 
	}
}

946 
boŞ
 
	gRAIDMªag”
::
	$MouÁ
(cÚ¡ 
¡ršg
& 
mddev
)

948 ià(
mddev
.
	`em±y
()) {

949 
	`S‘La¡E¼Ü
("Unknown MD device.\n");

950  
çl£
;

953 
Cr™iÿlSeùiÚLock
 
	`cs_md
(&
m_csMDProfes
);

954 
m­
<
¡ršg
, 
MDProfe
>::
™”©Ü
 
™
 = 
m_m­MDProfes
.
	`fšd
(
mddev
);

955 ià(
™
 =ğ
m_m­MDProfes
.
	`’d
()) {

956 
	`S‘La¡E¼Ü
("% dÛ¢'ˆexi¡.\n", 
mddev
.
	`c_¡r
());

957  
çl£
;

960 ià(
™
->
£cÚd
.
m_fsMgr
.
	`g‘
(è=ğ
NULL
) {

961 
	`S‘La¡E¼Ü
("FilesystemManager is‚ot initialized for %s\n",

962 
mddev
.
	`c_¡r
());

963  
çl£
;

966 ià(!
™
->
£cÚd
.
m_fsMgr
->
	`IsFÜm©ed
()) {

967 
	`S‘La¡E¼Ü
("%s is‚ot formated.\n",

968 
mddev
.
	`c_¡r
());

969  
çl£
;

972 
num
 = -1;

973 ià(!
™
->
£cÚd
.
m_fsMgr
->
	`IsMouÁed
(
num
)) {

974 ià(
num
 < 0) {

975 
num
 = 
	`G‘F»eVŞumeNum
();

976 ià(
num
 < 0è 
çl£
;

978 
™
->
£cÚd
.
m_fsMgr
->
	`S‘VŞumeNum
(
num
);

979 ià(!
™
->
£cÚd
.
m_fsMgr
->
	`MouÁ
()) {

980  
çl£
;

986 
™
->
£cÚd
.
m_fsMgr
->
	`G’”©eUUIDFe
();

987 
™
->
£cÚd
.
m_fsMgr
->
	`C»©eDeçuÉFŞd”s
();

989  
Œue
;

990 
	}
}

992 
boŞ
 
	gRAIDMªag”
::
	$UnmouÁ
(cÚ¡ 
¡ršg
& 
mddev
)

994 ià(
mddev
.
	`em±y
()) {

995 
	`S‘La¡E¼Ü
("Unknown MD device.\n");

996  
çl£
;

999 
Cr™iÿlSeùiÚLock
 
	`cs_md
(&
m_csMDProfes
);

1000 
m­
<
¡ršg
, 
MDProfe
>::
™”©Ü
 
™
 = 
m_m­MDProfes
.
	`fšd
(
mddev
);

1001 ià(
™
 =ğ
m_m­MDProfes
.
	`’d
()) {

1002 
	`S‘La¡E¼Ü
("% dÛ¢'ˆexi¡.\n", 
mddev
.
	`c_¡r
());

1003  
çl£
;

1006 ià(
™
->
£cÚd
.
m_fsMgr
.
	`g‘
(è=ğ
NULL
) {

1007 
	`S‘La¡E¼Ü
("FilesystemManager is‚ot initialized for %s\n",

1008 
mddev
.
	`c_¡r
());

1009  
çl£
;

1012 ià(
™
->
£cÚd
.
m_fsMgr
->
	`IsMouÁed
()) {

1013 ià(!
™
->
£cÚd
.
m_fsMgr
->
	`UnmouÁ
()) {

1014  
çl£
;

1018  
Œue
;

1019 
	}
}

1021 
boŞ
 
	gRAIDMªag”
::
	$G‘FÜm©Prog»ss
(cÚ¡ 
¡ršg
& 
mddev
,

1022 & 
¡©
, & 
´og»ss
)

1024 ià(
mddev
.
	`em±y
()) {

1025 
	`S‘La¡E¼Ü
("Unknown MD device.\n");

1026  
çl£
;

1029 
Cr™iÿlSeùiÚLock
 
	`cs_md
(&
m_csMDProfes
);

1030 
m­
<
¡ršg
, 
MDProfe
>::
™”©Ü
 
™
 = 
m_m­MDProfes
.
	`fšd
(
mddev
);

1031 ià(
™
 =ğ
m_m­MDProfes
.
	`’d
()) {

1032 
	`S‘La¡E¼Ü
("% dÛ¢'ˆexi¡.\n", 
mddev
.
	`c_¡r
());

1033  
çl£
;

1036 ià(
™
->
£cÚd
.
m_fsMgr
.
	`g‘
(è=ğ
NULL
) {

1037 
	`S‘La¡E¼Ü
("FilesystemManager is‚ot initialized for %s\n",

1038 
mddev
.
	`c_¡r
());

1039  
çl£
;

1042  
™
->
£cÚd
.
m_fsMgr
->
	`IsFÜm©šg
(
´og»ss
, 
¡©
);

1043 
	}
}

1045 
boŞ
 
	gRAIDMªag”
::
	$IsMouÁed
(cÚ¡ 
¡ršg
& 
mddev
, &
num
)

1047 ià(
mddev
.
	`em±y
()) {

1048 
	`S‘La¡E¼Ü
("Unknown MD device.\n");

1049  
çl£
;

1052 
Cr™iÿlSeùiÚLock
 
	`cs_md
(&
m_csMDProfes
);

1053 
m­
<
¡ršg
, 
MDProfe
>::
™”©Ü
 
™
 = 
m_m­MDProfes
.
	`fšd
(
mddev
);

1054 ià(
™
 =ğ
m_m­MDProfes
.
	`’d
()) {

1055 
	`S‘La¡E¼Ü
("% dÛ¢'ˆexi¡.\n", 
mddev
.
	`c_¡r
());

1056  
çl£
;

1059 ià(
™
->
£cÚd
.
m_fsMgr
.
	`g‘
(è=ğ
NULL
) {

1060 
	`S‘La¡E¼Ü
("FilesystemManager is‚ot initialized for %s\n",

1061 
mddev
.
	`c_¡r
());

1062  
çl£
;

1065  
™
->
£cÚd
.
m_fsMgr
->
	`IsMouÁed
(
num
);

1066 
	}
}

1068 
boŞ
 
	gRAIDMªag”
::
	$IsFÜm©ed
(cÚ¡ 
¡ršg
& 
mddev
)

1070 ià(
mddev
.
	`em±y
()) {

1071 
	`S‘La¡E¼Ü
("Unknown MD device.\n");

1072  
çl£
;

1075 
Cr™iÿlSeùiÚLock
 
	`cs_md
(&
m_csMDProfes
);

1076 
m­
<
¡ršg
, 
MDProfe
>::
™”©Ü
 
™
 = 
m_m­MDProfes
.
	`fšd
(
mddev
);

1077 ià(
™
 =ğ
m_m­MDProfes
.
	`’d
()) {

1078 
	`S‘La¡E¼Ü
("% dÛ¢'ˆexi¡.\n", 
mddev
.
	`c_¡r
());

1079  
çl£
;

1082 ià(
™
->
£cÚd
.
m_fsMgr
.
	`g‘
(è=ğ
NULL
) {

1083 
	`S‘La¡E¼Ü
("FilesystemManager is‚ot initialized for %s\n",

1084 
mddev
.
	`c_¡r
());

1085  
çl£
;

1088  
™
->
£cÚd
.
m_fsMgr
->
	`IsFÜm©ed
();

1089 
	}
}

1091 
	gRAIDMªag”
::
	$Dump
()

1093 
	`´štf
("Used MD Number: ");

1094 
i
 = 0; i < 128; i ++)

1095 ià(
m_bU£dMD
[
i
])

1096 
	`´štf
("%d ", 
i
);

1097 
	`´štf
("\n");

1099 
	`´štf
("Used Volume Number: ");

1100 
i
 = 0; i < 128; i ++)

1101 ià(
m_bU£dVŞume
[
i
])

1102 
	`´štf
("%d ", 
i
 + 1);

1103 
	`´štf
("\n");

1105 
m­
<
¡ršg
, 
MDProfe
>::
™”©Ü
 
™
 = 
m_m­MDProfes
.
	`begš
();

1106 ià(
™
 !ğ
m_m­MDProfes
.
	`’d
()) {

1107 
™
->
£cÚd
.
	`Dump
();

1109 
	}
}

1111 
	gRAIDMªag”
::
	$Th»adProc
()

1113 
ušt32_t
 
uMes§ge
 = (ušt32_tè
eTC_STOP
;

1116 ià(
	`CheckReque¡
(&
uMes§ge
)) {

1117 
uMes§ge
) {

1118 
eTC_STOP
:

1119 
	`R•ly
(0);

1122 
Cr™iÿlSeciÚLock
 
	`cs
(&
m_csMDProfes
);

1123 
m­
<
¡ršg
, 
MDProfe
>::
™”©Ü
 
™_md
 = 
m_m­MDProfes
.
	`begš
();

1124 
™_md
 !ğ
m_m­DiskProfes
.
	`’d
()) {

1125 ià(
™_md
->
£cÚd
.
m_fsMgr
.
	`g‘
() &&

1126 
™_md
->
£cÚd
.
m_fsMgr
->
	`IsMouÁed
())

1127 
™_md
->
£cÚd
.
m_fsMgr
->
	`UnmouÁ
();

1129 
™_md
++;

1134 
	`R•ly
(-1);

1142 
m_csDiskProfes
.
	`Lock
();

1143 
m­
<
¡ršg
, 
DiskProfe
>::
™”©Ü
 
™_disk
 = 
m_m­DiskProfes
.
	`begš
();

1144 
™_disk
 !ğ
m_m­DiskProfes
.
	`’d
()) {

1145 
udev
 *udev = 
NULL
;

1146 
udev_deviû
 *
dev
 = 
NULL
;

1147 
udev
 = 
	`udev_Ãw
();

1148 ià(!
udev
) {

1149 
	`´štf
("can't create udev\n");

1150 
™_disk
++;

1154 
dev
 = 
	`udev_deviû_Ãw_äom_subsy¡em_sy¢ame
(
udev
, "block", 
™_disk
->
fœ¡
.
	`c_¡r
());

1155 ià(
NULL
 =ğ
dev
) {

1156 
m_m­DiskProfes
.
	`”a£
(
™_disk
++);

1158 
DiskProfe
 
	`´ofe
(
™_disk
->
fœ¡
);

1159 ià(!(
´ofe
 =ğ
™_disk
->
£cÚd
)) {

1160 
	`ASSERT2
(0, "[%s] Sy¡em‚ami th§me, buˆÙh” disk infÜm©iÚ i difã»Á.\n", 
™_disk
->
fœ¡
.
	`c_¡r
());

1164 
™_disk
->
£cÚd
 = 
´ofe
;

1165 
™_disk
++;

1168 
	`udev_deviû_uÄef
(
dev
);

1169 
	`udev_uÄef
(
udev
);

1172 
m_csMDProfes
.
	`Lock
();

1174 
m­
<
¡ršg
, 
MDProfe
>::
™”©Ü
 
™_md
 = 
m_m­MDProfes
.
	`begš
();

1175 
™_md
 !ğ
m_m­MDProfes
.
	`’d
()) {

1179 
veùÜ
<
¡ršg
>::
™”©Ü
 
™_memb”
;;

1180 
udev
 *udev = 
NULL
;

1181 
udev_deviû
 *
dev
 = 
NULL
;

1182 
¬¿y_d‘a
 
ad
;

1183 
ava
[128];

1184 
disk_’ough
 = 0;

1186 
	`mem£t
(
ava
, 0x00, (avail));

1188 
udev
 = 
	`udev_Ãw
();

1189 ià(!
udev
) {

1190 
	`´štf
("can't create udev\n");

1191 
md_check_dÚe
;

1194 
dev
 = 
	`udev_deviû_Ãw_äom_subsy¡em_sy¢ame
(
udev
, "block", 
™_md
->
fœ¡
.
	`c_¡r
());

1195 ià(
NULL
 =ğ
dev
) {

1196 
	`F»eMDNum
(
™_md
->
£cÚd
.
m_iMDNum
);

1198 ià(
™_md
->
£cÚd
.
m_fsMgr
.
	`g‘
()) {

1199 
™_md
->
£cÚd
.
m_fsMgr
->
	`UnmouÁ
();

1200 
	`F»eVŞumeNum
(
™_md
->
£cÚd
.
m_fsMgr
->
	`G‘VŞumeNum
());

1208 
m_m­MDProfes
.
	`”a£
(
™_md
++);

1209 
	`udev_uÄef
(
udev
);

1213 
	`udev_deviû_uÄef
(
dev
);

1214 
	`udev_uÄef
(
udev
);

1216 
™_md
->
£cÚd
.
	`R—dMDSt
();

1218 
™_memb”
 = 
™_md
->
£cÚd
.
m_vMemb”s
.
	`begš
();

1219 
™_memb”
 !ğ
™_md
->
£cÚd
.
m_vMemb”s
.
	`’d
()) {

1231 
™_disk
 = 
m_m­DiskProfes
.
	`fšd
(*
™_memb”
);

1232 ià(
™_disk
 =ğ
m_m­DiskProfes
.
	`’d
()) {

1233 
™_memb”
 = 
™_md
->
£cÚd
.
m_vMemb”s
.
	`”a£
(it_member);

1235 
™_memb”
++;

1245 
™_md
->
£cÚd
.
m_iDevCouÁ
 = it_md->£cÚd.
m_vMemb”s
.
	`size
();

1247 ià(!
	`Qu”yMDD‘a
(
™_md
->
£cÚd
.
m_¡rDevP©h
, 
ad
)) {

1248 
	`ASSERT2
(0, "CªnÙ qu”y %s' d‘a infÜm©iÚ.", 
™_md
->
fœ¡
.
	`c_¡r
());

1249 
md_check_dÚe
;

1252 
	`cİy_uuid
(
™_md
->
£cÚd
.
m_uuid
, 
ad
.
uuid
, 0);

1261 
i
 = 0; i < 
ad
.
uDiskCouÁ”
; i++) {

1262 
boŞ
 
bFound
 = 
çl£
;

1263 
ava
[
i
] = 0;

1266 ià(
	`¡¾’
(
ad
.
¬¿yDisks
[
i
].
¡rDevName
) == 0) {

1267 
	`´štf
("MD device %s has disks without‡ny information.\n",

1268 
ad
.
¡rA¼ayDevName
);

1272 
size_t
 
j
 = 0; j < 
™_md
->
£cÚd
.
m_vMemb”s
.
	`size
(); j++) {

1273 
¡ršg
 
¡rMemb”Name
 = "/dev/" + 
™_md
->
£cÚd
.
m_vMemb”s
[
j
];

1274 ià(
¡rMemb”Name
 =ğ
ad
.
¬¿yDisks
[
i
].
¡rDevName
) {

1275 
bFound
 = 
Œue
;

1281 ià(!
bFound
) {

1285 ià(
ad
.
¬¿yDisks
[
i
].
diskInfo
.
¡©e
 & (1 << 
MD_DISK_SYNC
)) {

1286 
ava
[
i
] = 1;

1296 
disk_’ough
 = 
	`’ough
(
ad
.
¬¿yInfo
.
Ëv–
,

1297 
ad
.
¬¿yInfo
.
¿id_disks
,

1298 
ad
.
¬¿yInfo
.
Ïyout
,

1299 1, 
ava
);

1301 ià(
™_md
->
£cÚd
.
m_iDevCouÁ
 =ğ
ad
.
¬¿yInfo
.
¿id_disks
 ||

1302 
disk_’ough
 == 1) {

1304 
num
 = -1;

1306 ià(
™_md
->
£cÚd
.
m_fsMgr
.
	`g‘
(è=ğ
NULL
) {

1307 if(!
™_md
->
£cÚd
.
	`In™ŸlizeFSMªag”
()) {

1308 
	`´štf
("%s has‚o valid filesystem manager.\n",

1309 
™_md
->
£cÚd
.
m_¡rSysName
.
	`c_¡r
());

1310 
md_check_dÚe
;

1314 ià(
™_md
->
£cÚd
.
m_fsMgr
->
	`IsFÜm©ed
()) {

1315 ià(!
™_md
->
£cÚd
.
m_fsMgr
->
	`IsMouÁed
(
num
)) {

1316 ià(
num
 == -1) {

1317 
num
 = 
	`G‘F»eVŞumeNum
();

1318 ià(
num
 == -1) {

1319 
md_check_dÚe
;

1325 
™_md
->
£cÚd
.
m_fsMgr
->
	`S‘VŞumeNum
(
num
);

1329 ià(
™_md
->
£cÚd
.
m_fsMgr
->
	`MouÁ
()) {

1330 
™_md
->
£cÚd
.
m_fsMgr
->
	`G’”©eUUIDFe
();

1331 
™_md
->
£cÚd
.
m_fsMgr
->
	`C»©eDeçuÉFŞd”s
();

1332 ià(
m_cb
)

1333 
	`m_cb
(
NULL
, 
CB_MOUNT
);

1337 
num
 = 
™_md
->
£cÚd
.
m_fsMgr
->
	`G‘VŞumeNum
();

1338 ià(
num
 == -1) {

1344 
num
 = 
	`G‘F»eVŞumeNum
();

1345 
™_md
->
£cÚd
.
m_fsMgr
->
	`S‘VŞumeNum
(
num
);

1349 
md_check_dÚe
;

1350 } ià(0 =ğ
disk_’ough
) {

1357 ià(
™_md
->
£cÚd
.
m_fsMgr
.
	`g‘
(è=ğ
NULL
)

1358 
md_check_dÚe
;

1360 ià(
™_md
->
£cÚd
.
m_fsMgr
->
	`IsMouÁed
()) {

1361 ià(
™_md
->
£cÚd
.
m_fsMgr
->
	`UnmouÁ
()) {

1362 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_ERR
, 
LOG_LABEL
,

1364 
™_md
->
fœ¡
.
	`c_¡r
());

1369 
md_check_dÚe
:

1370 
™_md
++;

1373 ià(
m_£mAs£mbË
.
	`Wa™
(0)) {

1374 
™_disk
 = 
m_m­DiskProfes
.
	`begš
();

1375 
™_disk
 !ğ
m_m­DiskProfes
.
	`’d
()) {

1378 
™_disk
->
£cÚd
.
	`R—dMDSt
();

1379 ià(
™_disk
->
£cÚd
.
m_¡rMDDev
.
	`em±y
()) {

1380 
examše_»suÉ
 
”
;

1381 
”r
 = 0;

1382 ià((
”r
 = 
	`Qu”yMDSu³rBlockInDisk
(
™_disk
->
£cÚd
.
m_¡rDevP©h
, 
”
)è=ğ
SUCCESS
) {

1384 
m­
<
¡ršg
, 
MDProfe
>::
™”©Ü
 
™_md
 = 
m_m­MDProfes
.
	`begš
();

1385 
™_md
 !ğ
m_m­MDProfes
.
	`’d
()) {

1386 ià(
	`§me_uuid
(
”
.
¬¿yUUID
, 
™_md
->
£cÚd
.
m_uuid
, 0))

1388 
™_md
++;

1391 ià(
™_md
 !ğ
m_m­MDProfes
.
	`’d
()) {

1395 
veùÜ
<
¡ršg
> 
vDevLi¡
;

1396 
vDevLi¡
.
	`push_back
(
™_disk
->
£cÚd
.
m_¡rSysName
);

1397 
	`MªageRAIDSubdevs
(
™_md
->
£cÚd
.
m_¡rSysName
, 
vDevLi¡
, 'a');

1399 
™_disk
++;

1403 
¡ršg
 
mddev
;

1404 ià(
	`As£mbËRAID
(
”
.
¬¿yUUID
, 
mddev
)) {

1405 ià(
m_m­MDProfes
[
mddev
].
m_fsMgr
.
	`g‘
(è=ğ
NULL
) {

1406 
m_m­MDProfes
[
mddev
].
	`In™ŸlizeFSMªag”
();

1407 ià(
m_m­MDProfes
[
mddev
].
m_fsMgr
.
	`g‘
(è=ğ
NULL
) {

1408 
™_disk
++;

1413 
num
 = -1;

1414 ià(
m_m­MDProfes
[
mddev
].
m_fsMgr
->
	`IsFÜm©ed
()) {

1415 ià(!
m_m­MDProfes
[
mddev
].
m_fsMgr
->
	`IsMouÁed
(
num
)) {

1416 ià(
num
 == -1) {

1417 
num
 = 
	`G‘F»eVŞumeNum
();

1418 ià(
num
 != -1) {

1419 
m_m­MDProfes
[
mddev
].
m_fsMgr
->
	`S‘VŞumeNum
(
num
);

1420 ià(
m_m­MDProfes
[
mddev
].
m_fsMgr
->
	`MouÁ
()) {

1421 
m_m­MDProfes
[
mddev
].
m_fsMgr
->
	`G’”©eUUIDFe
();

1422 
m_m­MDProfes
[
mddev
].
m_fsMgr
->
	`C»©eDeçuÉFŞd”s
();

1423 ià(
m_cb
)

1424 
	`m_cb
(
NULL
, 
CB_MOUNT
);

1428 ià(
m_m­MDProfes
[
mddev
].
m_fsMgr
->
	`MouÁ
()) {

1429 
m_m­MDProfes
[
mddev
].
m_fsMgr
->
	`G’”©eUUIDFe
();

1430 
m_m­MDProfes
[
mddev
].
m_fsMgr
->
	`C»©eDeçuÉFŞd”s
();

1431 ià(
m_cb
)

1432 
	`m_cb
(
NULL
, 
CB_MOUNT
);

1437 
num
 = 
	`G‘F»eVŞumeNum
();

1438 
m_m­MDProfes
[
mddev
].
m_fsMgr
->
	`S‘VŞumeNum
(
num
);

1441 
™_disk
->
£cÚd
.
	`R—dMDSt
();

1443 } ià(
”r
 !ğ
EXAMINE_NO_MD_SUPERBLOCK
) {

1444 
	`Wr™eHWLog
(
LOG_LOCAL1
, 
LOG_DEBUG
, 
LOG_LABEL
,

1445 "[%d] FaØexamš%s.\n", 
__LINE__
,

1446 
™_disk
->
fœ¡
.
	`c_¡r
());

1450 
™_disk
++;

1454 
m_csMDProfes
.
	`UÆock
();

1455 
m_csDiskProfes
.
	`UÆock
();

1457 
SYSTEMTIME
 
time
;

1458 ià(
m_pNÙifyChªge
 =ğ
NULL
) {

1459 
	`SË•MS
(
RAIDMANAGER_MONITOR_INTERVAL
);

1460 
time
 = 
UTCTime
::
	`G‘Cu¼’tSy¡emTime
();

1461 
	`´štf
("[%u:%u:%u.%u]Timeout for‚ext„ound check.\n",

1462 
time
.
wHour
,ime.
wMšu‹
,ime.
wSecÚd
,ime.
wMli£cÚds
);

1464 
m_pNÙifyChªge
->
	`timedwa™
(
RAIDMANAGER_MONITOR_INTERVAL
);

1465 
time
 = 
UTCTime
::
	`G‘Cu¼’tSy¡emTime
();

1466 
	`´štf
("[%u:%u:%u.%u]Got‚otification orimeout for‚ext„ound check.\n",

1467 
time
.
wHour
,ime.
wMšu‹
,ime.
wSecÚd
,ime.
wMli£cÚds
);

1470 
	}
}

1472 
	gRAIDMªag”
::
	$G‘La¡E¼Ü
(
¡ršg
 &
log
)

1474 
Cr™iÿlSeùiÚLock
 
	`cs
(&
m_csLa¡E¼Ü
);

1475 
log
 = 
m_¡rLa¡E¼Ü
;

1476 
	}
}

1478 
¡ršg
 
	gRAIDMªag”
::
	$G‘DeviûNodeBySymLšk
(cÚ¡ 
¡ršg
& 
symlšk
)

1480 
¡©
 
s
;

1481 ià(
	`l¡©
(
symlšk
.
	`c_¡r
(), &
s
) >= 0) {

1482 ià(
	`S_ISLNK
(
s
.
¡_mode
) == 1) {

1483 
buf
[128];

1484 
Ën
 = 0;

1485 ià((
Ën
 = 
	`»adlšk
(
symlšk
.
	`c_¡r
(), 
buf
, (buf) - 1)) >= 0) {

1486 
¡ršg
 
¡rDevNode
 = "/dev/";

1487 
buf
[
Ën
] = '\0';

1488 
¡rDevNode
 +ğ
buf
;

1489  
¡rDevNode
;

1494  
symlšk
;

1495 
	}
}

1497 
	gRAIDMªag”
::
	$S‘La¡E¼Ü
(cÚ¡ 
¡ršg
 &
fmt
, ...)

1499 
va_li¡
 
¬gs
;

1500 
	`va_¡¬t
(
¬gs
, 
fmt
.
	`c_¡r
());

1501 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_ERR
, 
LOG_LABEL
,

1502 
fmt
.
	`c_¡r
(), 
¬gs
);

1503 
m_¡rLa¡E¼Ü
 = 
	`¡ršg_fÜm©
(
fmt
.
	`c_¡r
(), 
¬gs
);

1504 
	`va_’d
(
¬gs
);

1505 
	}
}

1507 
	gRAIDMªag”
::
	$Regi¡”CB
(
¿idmgr_cb
 
cb
)

1509 
m_cb
 = 
cb
;

1510 
	}
}

	@RAIDManager.h

1 #iâdeà
__RAIDMANAGER_H__


2 
	#__RAIDMANAGER_H__


	)

4 #ifdeà
__ılu¥lus


7 
	~"libmdadm/mdadm.h
"

8 #ifdeà
__ılu¥lus


12 
	~"Fesy¡emMªag”.h
"

14 #ifdeà
NUUO


15 
	~"commÚ/ü™iÿl_£ùiÚ.h
"

16 
	~"commÚ/nusy¦og.h
"

17 
	~"commÚ/sm¬t_poš‹r.h
"

18 
	~"commÚ/£m­hÜe.h
"

19 
	~"­r/­r_th»ad_wÜk”.h
"

20 
usšg
 
Çme¥aû
 
SYSUTILS_SPACE
;

22 
	~"‹¡_uts.h
"

25 
	~<¡ršg
>

26 
	~<veùÜ
>

27 
	~<™”©Ü
>

28 
	~<memÜy
>

29 
	~<m­
>

31 
	~<¡dšt.h
>

32 
	~<sys/¡©.h
>

33 
	~<uni¡d.h
>

34 
	~<scsi/sg_cmds.h
>

35 
	~<scsi/sg_uÇligÃd.h
>

36 
	~<libudev.h
>

37 
	~<¡d¬g.h
>

38 
	~<©asm¬t.h
>

40 
usšg
 
Çme¥aû
 
	g¡d
;

42 
	eeDiskTy³
 {

43 
	mDISK_TYPE_UNKNOWN
 = -1,

44 
	mDISK_TYPE_SATA
,

45 
	mDISK_TYPE_ESATA
,

46 
	mDISK_TYPE_ISCSI
,

47 
	mDISK_TYPE_NFS


50 
	eeCBR—sÚ
 {

51 
	mCB_MOUNT
 = 1,

54 (*
	t¿idmgr_cb
)(*, 
	teCBR—sÚ
);

56 
	sSGS”ŸlNoPage
 {

57 
ušt8_t
 
m_by‹PQPDT
;

58 
ušt8_t
 
m_by‹PageCode
;

59 
ušt8_t
 
m_by‹Re£rv›d
;

60 
ušt8_t
 
m_by‹PageL’gth
;

61 
ušt8_t
 
m_by‹PageSN
[32];

64 
	sSGR—dC­ac™y10
 {

65 
ušt8_t
 
m_LogiÿlBlockAddr
[4];

66 
ušt8_t
 
m_BlockL’gth
[4];

69 
	sSGR—dC­ac™y16
 {

70 
ušt8_t
 
m_LogiÿlBlockAddr
[8];

71 
ušt8_t
 
m_BlockL’gth
[4];

72 
ušt8_t
 
m_PrÙeùiÚInfo
;

73 
ušt8_t
 
m_Re£rved
[19];

76 
	sDiskProfe
 {

77 
¡ršg
 
m_¡rSysName
;

78 
¡ršg
 
m_¡rDevP©h
;

79 
¡ršg
 
m_¡rSymLšk
;

80 
¡ršg
 
m_¡rMDDev
;

81 
¡ršg
 
m_¡rV’dÜ
;

82 
¡ršg
 
m_¡rMod–
;

83 
¡ršg
 
m_¡rFWV”
;

84 
¡ršg
 
m_¡rS”ŸlNum
;

85 
¡ršg
 
m_¡rSMARTOv”®l
;

86 
ušt64_t
 
m_ÎC­ac™y
;

87 
ušt64_t
 
m_uÎSMARTBadSeùÜs
;

88 
ušt64_t
 
m_uÎSMARTTemp
;

89 
eDiskTy³
 
m_diskTy³
;

90 
m_iBay
;

91 
boŞ
 
m_bSMARTSuµÜt
;

93 
	`DiskProfe
()

94 : 
	`m_¡rSysName
("")

95 , 
	`m_¡rDevP©h
("")

96 , 
	`m_¡rSymLšk
("")

97 , 
	`m_¡rMDDev
("")

98 , 
	`m_¡rV’dÜ
("")

99 , 
	`m_¡rMod–
("")

100 , 
	`m_¡rFWV”
("")

101 , 
	`m_¡rS”ŸlNum
("")

102 , 
	`m_¡rSMARTOv”®l
("")

103 , 
	`m_ÎC­ac™y
(0ull)

104 , 
	`m_uÎSMARTBadSeùÜs
(0ull)

105 , 
	`m_uÎSMARTTemp
(0ull)

106 , 
	`m_diskTy³
(
DISK_TYPE_UNKNOWN
)

107 , 
	`m_iBay
(-1)

108 , 
	`m_bSMARTSuµÜt
(
çl£
)

112 
	`DiskProfe
(
¡ršg
 
dev
)

113 : 
	`m_¡rSysName
(
dev
)

114 , 
	`m_¡rDevP©h
("")

115 , 
	`m_¡rSymLšk
("")

116 , 
	`m_¡rMDDev
("")

117 , 
	`m_¡rV’dÜ
("")

118 , 
	`m_¡rMod–
("")

119 , 
	`m_¡rFWV”
("")

120 , 
	`m_¡rS”ŸlNum
("")

121 , 
	`m_¡rSMARTOv”®l
("")

122 , 
	`m_ÎC­ac™y
(0ull)

123 , 
	`m_uÎSMARTBadSeùÜs
(0ull)

124 , 
	`m_uÎSMARTTemp
(0ull)

125 , 
	`m_diskTy³
(
DISK_TYPE_UNKNOWN
)

126 , 
	`m_iBay
(-1)

127 , 
	`m_bSMARTSuµÜt
(
çl£
)

129 
	`S‘UDEVInfÜm©iÚ
();

130 
	`S‘DiskV’dÜInfom©iÚ
();

131 
	`G‘DevC­ac™y
();

132 
	`R—dMDSt
();

133 
	`S‘SMARTInfo
();

136 ~
	`DiskProfe
()

140 
DiskProfe
& 
İ”©Ü
=(cÚ¡ DiskProfe& 
rhs
)

142 ià(
this
 =ğ&
rhs
)

143  *
this
;

144 
m_¡rSysName
 = 
rhs
.m_strSysName;

145 
m_¡rDevP©h
 = 
rhs
.m_strDevPath;

146 
m_¡rSymLšk
 = 
rhs
.m_strSymLink;

147 
m_diskTy³
 = 
rhs
.m_diskType;

148 
m_¡rMDDev
 = 
rhs
.m_strMDDev;

149 
m_iBay
 = 
rhs
.m_iBay;

150 
m_¡rV’dÜ
 = 
rhs
.m_strVendor;

151 
m_¡rMod–
 = 
rhs
.m_strModel;

152 
m_¡rFWV”
 = 
rhs
.m_strFWVer;

153 
m_¡rS”ŸlNum
 = 
rhs
.m_strSerialNum;

154 
m_¡rSMARTOv”®l
 = 
rhs
.m_strSMARTOverall;

155 
m_ÎC­ac™y
 = 
rhs
.m_llCapacity;

156 
m_uÎSMARTBadSeùÜs
 = 
rhs
.m_ullSMARTBadSectors;

157 
m_uÎSMARTTemp
 = 
rhs
.m_ullSMARTTemp;

158 
m_bSMARTSuµÜt
 = 
rhs
.
m_SMARTSuµÜt
;

159  *
this
;

162 
boŞ
 
İ”©Ü
==(cÚ¡ 
DiskProfe
& 
rhs
)

164  (
m_¡rSysName
 =ğ
rhs
.m_strSysName &&

165 
m_¡rDevP©h
 =ğ
rhs
.m_strDevPath &&

166 
m_¡rSymLšk
 =ğ
rhs
.m_strSymLink);

169 
	`S‘UDEVInfÜm©iÚ
()

171 ià(
m_¡rSysName
.
	`em±y
())

174 
udev
 *udev;

175 
udev_deviû
 *
dev
;

176 
udev
 = 
	`udev_Ãw
();

177 ià(!
udev
) {

178 
	`´štf
("can't create udev\n");

182 
dev
 = 
	`udev_deviû_Ãw_äom_subsy¡em_sy¢ame
(
udev
, "block", 
m_¡rSysName
.
	`c_¡r
());

183 ià(
dev
) {

184 
»t
 = 0;

186 
m_¡rDevP©h
 = 
	`udev_deviû_g‘_devnode
(
dev
);

187 
m_¡rSymLšk
 = 
	`udev_deviû_g‘_´İ”ty_v®ue
(
dev
, "ID_SYMLINK");

189 ià(!
m_¡rSymLšk
.
	`em±y
()) {

190 ià(
m_¡rSymLšk
.
	`fšd
("nuuo_§"è!ğ
¡ršg
::
Åos
) {

191 
m_diskTy³
 = 
DISK_TYPE_SATA
;

192 
»t
 = 
	`ssÿnf
(
m_¡rSymLšk
.
	`c_¡r
(), "nuuo_§%d", &
m_iBay
);

193 ià(
»t
 < 1 ||„‘ =ğ
EOF
 || 
m_iBay
 > 127 || m_iBay < 0) {

194 
m_iBay
 = -1;

196 } ià(
m_¡rSymLšk
.
	`fšd
("nuuo_e§"è!ğ
¡ršg
::
Åos
) {

197 
m_diskTy³
 = 
DISK_TYPE_ESATA
;

198 
»t
 = 
	`ssÿnf
(
m_¡rSymLšk
.
	`c_¡r
(), "nuuo_e§%d", &
m_iBay
);

199 ià(
»t
 < 1 ||„‘ =ğ
EOF
 || 
m_iBay
 > 127 || m_iBay < 0) {

200 
m_iBay
 = -1;

202 } ià(
m_¡rSymLšk
.
	`fšd
("nuuo_iscsi"è!ğ
¡ršg
::
Åos
) {

203 
m_diskTy³
 = 
DISK_TYPE_ISCSI
;

204 
»t
 = 
	`ssÿnf
(
m_¡rSymLšk
.
	`c_¡r
(), "nuuo_iscsi%d", &
m_iBay
);

205 ià(
»t
 < 1 ||„‘ =ğ
EOF
) {

206 
m_iBay
 = -1;

210 
m_¡rS”ŸlNum
 = 
	`udev_deviû_g‘_´İ”ty_v®ue
(
dev
, "ID_PATH");

212 
	`´štf
("Unknown SYMLINK\n");

216 
	`´štf
("ÿn'ˆfound block deviû %s.\n", 
m_¡rSysName
.
	`c_¡r
());

219 
	`udev_deviû_uÄef
(
dev
);

220 
	`udev_uÄef
(
udev
);

224 
	`S‘DiskV’dÜInfom©iÚ
()

226 ià(
m_¡rDevP©h
.
	`em±y
())

229 
sg_sim¶e_šquœy_»¥
 
»¥
;

230 
SGS”ŸlNoPage
 
sg_¢_»¥
;

231 
sg_fd
 = 
	`sg_cmds_İ’_deviû
(
m_¡rDevP©h
.
	`c_¡r
(), 1, 1);

233 ià(
sg_fd
 < 0)

236 ià(0 =ğ
	`sg_sim¶e_šquœy
(
sg_fd
, &
»¥
, 0, 0)) {

237 
m_¡rV’dÜ
 = 
»¥
.
v’dÜ
;

238 
m_¡rMod–
 = 
»¥
.
´oduù
;

239 
m_¡rFWV”
 = 
»¥
.
»visiÚ
;

246 ià(
m_diskTy³
 !ğ
DISK_TYPE_ISCSI
 &&

247 0 =ğ
	`sg_Î_šquœy
(
sg_fd
, 0 ,1 , 0x80,

248 (*)&
sg_¢_»¥
,

249 (
SGS”ŸlNoPage
),

251 
m_¡rS”ŸlNum
 = (*)
sg_¢_»¥
.
m_by‹PageSN
;

258 
	`sg_cmds_şo£_deviû
(
sg_fd
);

261 
	`G‘DevC­ac™y
()

263 
fd
 = 
	`İ’
(
m_¡rDevP©h
.
	`c_¡r
(), 
O_RDONLY
);

264 ià(
fd
 < 0) {

265 
	`´štf
("CªnÙ o³À%s, %s\n", 
m_¡rDevP©h
.
	`c_¡r
(), 
	`¡»¼Ü
(
”ºo
));

268 ià(0 =ğ
	`g‘_dev_size
(
fd
, (*)
m_¡rDevP©h
.
	`c_¡r
(), &
m_ÎC­ac™y
))

269 
m_ÎC­ac™y
 = 0;

271 
	`şo£
(
fd
);

274 
	`R—dMDSt
()

276 
md¡©_’t
 *
ms
 = 
	`md¡©_»ad
(0, 0);

277 
md¡©_’t
 *
e
 = 
ms
;

278 
e
 = 
	`md¡©_by_compÚ’t
((*)
m_¡rSysName
.
	`c_¡r
());

279 ià(
e
)

280 
m_¡rMDDev
 = 
e
->
dev
;

282 
m_¡rMDDev
 = "";

284 
	`ä“_md¡©
(
e
);

287 
	`S‘SMARTInfo
()

289 
SkDisk
 *
d
 = 
NULL
;

290 
SkBoŞ
 
avaabË
;

291 
SkSm¬tOv”®l
 
ov”®l
;

293 ià(
	`sk_disk_İ’
(
m_¡rDevP©h
.
	`c_¡r
(), &
d
) < 0) {

294 
	`´štf
("Failo open S.M.A.R.T. device %s.\n",

295 
m_¡rDevP©h
.
	`c_¡r
());

299 ià(
	`sk_disk_sm¬t_is_avaabË
(
d
, &
avaabË
) < 0) {

300 
	`´štf
("Failo query %s whether S.M.A.R.T. is‡vailable.\n",

301 
m_¡rDevP©h
.
	`c_¡r
());

302 
g‘_sm¬t_šfo_ç
;

304 
m_bSMARTSuµÜt
 = 
avaabË
 ? 
Œue
 : 
çl£
;

306 ià(
	`sk_disk_sm¬t_»ad_d©a
(
d
) < 0) {

307 
	`´štf
("Failo„ead %s's S.M.A.R.T. data.\n",

308 
m_¡rDevP©h
.
	`c_¡r
());

309 
g‘_sm¬t_šfo_ç
;

312 ià(
	`sk_disk_sm¬t_g‘_ov”®l
(
d
, &
ov”®l
) < 0) {

313 
	`´štf
("Failo get %s's S.M.A.R.T. overall status.\n",

314 
m_¡rDevP©h
.
	`c_¡r
());

316 
m_¡rSMARTOv”®l
 = 
	`sk_sm¬t_ov”®l_to_¡ršg
(
ov”®l
);

318 ià(
	`sk_disk_sm¬t_g‘_bad
(
d
, &
m_uÎSMARTBadSeùÜs
) < 0) {

319 
	`´štf
("Failo get %s's bad sectors information.\n",

320 
m_¡rDevP©h
.
	`c_¡r
());

323 ià(
	`sk_disk_sm¬t_g‘_‹m³¿tu»
(
d
, &
m_uÎSMARTTemp
) < 0) {

324 
	`´štf
("Failo get %s'semperature.\n",

325 
m_¡rDevP©h
.
	`c_¡r
());

327 
m_uÎSMARTTemp
 = (m_ullSMARTTemp / 1000) - 273;

329 
g‘_sm¬t_šfo_ç
:

330 
	`sk_disk_ä“
(
d
);

333 
boŞ
 
	`RunSMARTS–fTe¡
(
ty³
)

335 
SkDisk
 *
d
 = 
NULL
;

336 ià(
	`sk_disk_İ’
(
m_¡rDevP©h
.
	`c_¡r
(), &
d
) < 0) {

337 
	`´štf
("Failo open S.M.A.R.T. device %s.\n",

338 
m_¡rDevP©h
.
	`c_¡r
());

339  
çl£
;

342 ià(
	`sk_disk_sm¬t_£lf_‹¡
(
d
, 
ty³
) < 0) {

343 
	`´štf
("Failo start %s's S.M.A.R.T.est.\n",

344 
m_¡rDevP©h
.
	`c_¡r
());

345 
	`sk_disk_ä“
(
d
);

346  
çl£
;

349 
	`sk_disk_ä“
(
d
);

350  
Œue
;

353 
	`Dump
()

355 
	`´štf
("Soft Link: %s, In RAID: %s",

356 
m_¡rSymLšk
.
	`c_¡r
(), 
m_¡rMDDev
.c_str());

357 
m_diskTy³
) {

358 
DISK_TYPE_UNKNOWN
:

359 
	`´štf
(", Type: Unknown\n");

361 
DISK_TYPE_SATA
:

362 
	`´štf
(", Type: SATA\n");

364 
DISK_TYPE_ESATA
:

365 
	`´štf
(", Type: ESATA\n");

367 
DISK_TYPE_ISCSI
:

368 
	`´štf
(", Type: iSCSI\n");

370 
DISK_TYPE_NFS
:

371 
	`´štf
(", Type: NFS\n");

375 
	`´štf
("\tS.M.A.R.T: %s, Status %s, Bad Sectors: %llu, Temperature: %llu C\n\n",

376 
m_bSMARTSuµÜt
 ? "Support" : "Not Support",

377 
m_¡rSMARTOv”®l
.
	`c_¡r
(), 
m_uÎSMARTBadSeùÜs
,

378 
m_uÎSMARTTemp


383 
	sRAIDDiskInfo
 {

384 
DiskProfe
 
m_diskProfe
;

385 
¡ršg
 
m_¡rS‹
;

386 
¡ršg
 
m_¡rDevP©h
;

387 
št32_t
 
m_RaidUUID
[4];

388 
št32_t
 
m_iS‹
;

389 
št32_t
 
m_iRaidDiskNum
;

390 
št32_t
 
m_iMajÜ
;

391 
št32_t
 
m_iMšÜ
;

392 
boŞ
 
m_bHasMDSB
;

394 
	`RAIDDiskInfo
()

395 : 
	`m_¡rS‹
("")

396 , 
	`m_¡rDevP©h
("")

397 , 
	`m_iS‹
(0)

398 , 
	`m_iRaidDiskNum
(0)

399 , 
	`m_iMajÜ
(0)

400 , 
	`m_iMšÜ
(0)

401 , 
	`m_bHasMDSB
(
çl£
)

403 
	`mem£t
(
m_RaidUUID
, 0x00, (m_RaidUUID));

406 ~
	`RAIDDiskInfo
() {}

408 
RAIDDiskInfo
& 
İ”©Ü
=(cÚ¡ 
¬¿y_disk_šfo
& 
rhs
)

410 
m_¡rS‹
 = 
rhs
.
¡rS‹
;

411 
m_¡rDevP©h
 = 
rhs
.
¡rDevName
;

412 
m_iS‹
 = 
rhs
.
diskInfo
.
¡©e
;

413 
m_iRaidDiskNum
 = 
rhs
.
diskInfo
.
¿id_disk
;

414 
m_iMajÜ
 = 
rhs
.
diskInfo
.
majÜ
;

415 
m_iMšÜ
 = 
rhs
.
diskInfo
.
mšÜ
;

416  *
this
;

419 
	`Dump
()

421 
	`´štf
("Device: %s, State: %s, MD Super Block: %s, Major: %d, Minor: %d\n\t",

422 
m_¡rDevP©h
.
	`c_¡r
(), 
m_¡rS‹
.c_¡r(), 
m_bHasMDSB
 ? "Yes" : "No",

423 
m_iMajÜ
, 
m_iMšÜ
);

424 
m_diskProfe
.
	`Dump
();

427 
RAIDDiskInfo
& 
İ”©Ü
=(cÚ¡ RAIDDiskInfo& 
rhs
)

429 ià(
this
 =ğ&
rhs
)

430  *
this
;

431 
m_diskProfe
 = 
rhs
.m_diskProfile;

432 
m_¡rS‹
 = 
rhs
.m_strState;

433 
m_¡rDevP©h
 = 
rhs
.m_strDevPath;

434 
m_iS‹
 = 
rhs
.m_iState;

435 
m_iRaidDiskNum
 = 
rhs
.m_iRaidDiskNum;

436 
m_bHasMDSB
 = 
rhs
.m_bHasMDSB;

437 
m_iMajÜ
 = 
rhs
.m_iMajor;

438 
m_iMšÜ
 = 
rhs
.m_iMinor;

439  *
this
;

442 
boŞ
 
İ”©Ü
==(cÚ¡ 
RAIDDiskInfo
& 
rhs
) const

444  (
m_¡rDevP©h
 =ğ
rhs
.m_strDevPath);

447 
boŞ
 
İ”©Ü
==(cÚ¡ 
¡ršg
& 
rhs
) const

449  (
rhs
 =ğ
m_¡rDevP©h
);

452 
boŞ
 
İ”©Ü
==(cÚ¡ 
DiskProfe
& 
´ofe
) const

454  (
m_¡rDevP©h
 =ğ
´ofe
.m_strDevPath);

458 
	sMDProfe
 {

459 #ifdeà
NUUO


460 
sm¬t_±r
<
Fesy¡emMªag”
> 
m_fsMgr
;

462 
sh¬ed_±r
<
Fesy¡emMªag”
> 
m_fsMgr
;

464 
veùÜ
<
¡ršg
> 
m_vMemb”s
;

465 
¡ršg
 
m_¡rSysName
;

466 
¡ršg
 
m_¡rDevP©h
;

467 
m_iRaidDisks
;

468 
m_iDevCouÁ
;

469 
m_iMDNum
;

470 
boŞ
 
m_bInMDSt
;

471 
m_uuid
[4];

473 
	`MDProfe
()

474 : 
	`m_fsMgr
(
NULL
)

475 , 
	`m_¡rSysName
("")

476 , 
	`m_¡rDevP©h
("")

477 , 
	`m_iRaidDisks
(0)

478 , 
	`m_iDevCouÁ
(0)

479 , 
	`m_iMDNum
(-1)

480 , 
	`m_bInMDSt
(
çl£
)

482 
m_vMemb”s
.
	`ş—r
();

485 
	`MDProfe
(
¡ršg
 
dev
)

486 : 
	`m_fsMgr
(
NULL
)

487 , 
	`m_¡rSysName
(
dev
)

488 , 
	`m_¡rDevP©h
("")

489 , 
	`m_iRaidDisks
(0)

490 , 
	`m_iDevCouÁ
(0)

491 , 
	`m_iMDNum
(-1)

492 , 
	`m_bInMDSt
(
çl£
)

494 
m_vMemb”s
.
	`ş—r
();

495 
	`S‘UDEVInfÜm©iÚ
();

496 
	`R—dMDSt
();

497 
	`In™ŸlizeFSMªag”
();

500 ~
	`MDProfe
()

502 
m_vMemb”s
.
	`ş—r
();

503 
m_fsMgr
 = 
NULL
;

506 
MDProfe
& 
İ”©Ü
=(MDProfe& 
rhs
)

508 ià(
this
 =ğ&
rhs
)

509  *
this
;

511 
m_vMemb”s
.
	`ş—r
();

512 
size_t
 
i
 = 0; i < 
rhs
.
m_vMemb”s
.
	`size
(); i++)

513 
m_vMemb”s
.
	`push_back
(
rhs
.m_vMemb”s[
i
]);

514 
m_¡rSysName
 = 
rhs
.m_strSysName;

515 
m_¡rDevP©h
 = 
rhs
.m_strDevPath;

516 
m_iRaidDisks
 = 
rhs
.m_iRaidDisks;

517 
m_iDevCouÁ
 = 
rhs
.m_iDevCount;

518 
m_iMDNum
 = 
rhs
.m_iMDNum;

519 
m_fsMgr
 = 
rhs
.m_fsMgr;

520  *
this
;

523 
boŞ
 
İ”©Ü
==(
MDProfe
& 
rhs
)

525  (
m_¡rSysName
 =ğ
rhs
.m_strSysName);

528 
	`S‘UDEVInfÜm©iÚ
()

530 ià(
m_¡rSysName
.
	`em±y
())

533 
udev
 *udev;

534 
udev_deviû
 *
dev
;

535 
udev
 = 
	`udev_Ãw
();

536 ià(!
udev
) {

537 
	`´štf
("can't create udev\n");

541 
dev
 = 
	`udev_deviû_Ãw_äom_subsy¡em_sy¢ame
(
udev
, "block", 
m_¡rSysName
.
	`c_¡r
());

542 ià(
dev
) {

543 
»t
 = 0;

545 
m_¡rDevP©h
 = 
	`udev_deviû_g‘_devnode
(
dev
);

547 ià(!
m_¡rDevP©h
.
	`em±y
()) {

548 
»t
 = 
	`ssÿnf
(
m_¡rDevP©h
.
	`c_¡r
(), "/dev/md%d", &
m_iMDNum
);

549 ià(
»t
 < 1 ||„‘ =ğ
EOF
 || 
m_iMDNum
 > 127 || m_iMDNum < 0) {

550 
m_iMDNum
 = -1;

555 
	`udev_deviû_uÄef
(
dev
);

556 
	`udev_uÄef
(
udev
);

560 
	`R—dMDSt
()

562 
md¡©_’t
 *
ms
 = 
	`md¡©_»ad
(0, 0);

563 
md¡©_’t
 *
e
 = 
ms
;

564 
m_vMemb”s
.
	`ş—r
();

565 ; 
e
;ƒ =ƒ->
Ãxt
) {

566 ià(
m_¡rSysName
 =ğ
e
->
dev
) {

567 
md¡©_’t
::
dev_memb”
 *
dev
 = 
e
->
memb”s
;

568 ; 
dev
; dev = dev->
Ãxt
) {

569 
m_vMemb”s
.
	`push_back
(
dev
->
Çme
);

572 
m_iRaidDisks
 = 
e
->
¿id_disks
;

573 
m_iDevCouÁ
 = 
e
->
devút
;

574 
m_bInMDSt
 = 
Œue
;

578 
	`ä“_md¡©
(
ms
);

581 
boŞ
 
	`In™ŸlizeFSMªag”
() {

582 
Œy
 {

583 #ifdeà
NUUO


584 
m_fsMgr
 = 
Ãw
 
	`Fesy¡emMªag”
(
m_¡rDevP©h
);

586 
m_fsMgr
 = 
sh¬ed_±r
<
Fesy¡emMªag”
>(
Ãw
 
	`Fesy¡emMªag”
(
m_¡rDevP©h
));

588 ià(!
m_fsMgr
->
	`IsIn™Ÿlized
()) {

589 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_ERR
, "RAIDInfo",

591  
çl£
;

593 } 
	`ÿtch
 (
bad_®loc
&) {

594 
m_fsMgr
 = 
NULL
;

595 
	`Wr™eHWLog
(
LOG_LOCAL0
, 
LOG_ERR
, "RAIDInfo",

597  
çl£
;

600  
Œue
;

603 
	`Dump
() {

604 
buf
[128];

605 
	`´štf
("MD Name: %s\n\tDev Node: %s, RAID Disks: (%d/%d)\n\t%s\n\t",

606 
m_¡rSysName
.
	`c_¡r
(), 
m_¡rDevP©h
.c_¡r(), 
m_iDevCouÁ
, 
m_iRaidDisks
,

607 
	`__âame_äom_uuid
(
m_uuid
, 0, 
buf
, ':'));

608 ià(
m_fsMgr
.
	`g‘
()) {

609 
	`´štf
("Status: Format(%s), Mount(%s on %s)",

610 
m_fsMgr
->
	`IsFÜm©ed
()?"Yes":"No",

611 
m_fsMgr
->
	`IsMouÁed
()?"Yes":"No", m_fsMgr->
	`G‘MouÁPošt
().
	`c_¡r
());

616 
	sRAIDInfo
 {

617 
veùÜ
<
RAIDDiskInfo
> 
m_vDiskLi¡
;

618 
¡ršg
 
m_¡rSysName
;

619 
¡ršg
 
m_¡rDevP©h
;

620 
¡ršg
 
m_¡rS‹
;

621 
¡ršg
 
m_¡rLayout
;

622 
¡ršg
 
m_¡rRebudšgO³¿tiÚ
;

623 
¡ršg
 
m_¡rMouÁPošt
;

624 
time_t
 
m_C»©iÚTime
;

625 
time_t
 
m_Upd©eTime
;

626 
ušt32_t
 
m_UUID
[4];

627 
št64_t
 
m_uÎTÙ®C­ac™y
;

628 
št64_t
 
m_uÎU£dSize
;

629 
št32_t
 
m_iRAIDLev–
;

630 
št32_t
 
m_iTÙ®DiskNum
;

631 
št32_t
 
m_iRAIDDiskNum
;

632 
št32_t
 
m_iAùiveDiskNum
;

633 
št32_t
 
m_iWÜkšgDiskNum
;

634 
št32_t
 
m_iFaedDiskNum
;

635 
št32_t
 
m_iS·»DiskNum
;

636 
št32_t
 
m_iS‹
;

637 
št32_t
 
m_iChunkSize
;

638 
št32_t
 
m_iRebudšgProg»ss
;

639 
št32_t
 
m_iMDNum
;

640 
št32_t
 
m_iFÜm©šgS‹
;

641 
št32_t
 
m_iFÜm©Prog»ss
;

642 
boŞ
 
m_bFÜm©
;

643 
boŞ
 
m_bMouÁ
;

644 
boŞ
 
m_bSu³rBlockP”si¡’t
;

645 
boŞ
 
m_bIÇùive
;

646 
boŞ
 
m_bRebudšg
;

648 
	`RAIDInfo
()

649 : 
	`m_¡rSysName
("")

650 , 
	`m_¡rDevP©h
("")

651 , 
	`m_¡rS‹
("")

652 , 
	`m_¡rLayout
("")

653 , 
	`m_¡rRebudšgO³¿tiÚ
("")

654 , 
	`m_¡rMouÁPošt
("")

655 , 
	`m_C»©iÚTime
(0)

656 , 
	`m_Upd©eTime
(0)

657 , 
	`m_uÎTÙ®C­ac™y
(0ull)

658 , 
	`m_uÎU£dSize
(0ull)

659 , 
	`m_iRAIDLev–
(
UnS‘
)

660 , 
	`m_iTÙ®DiskNum
(0)

661 , 
	`m_iRAIDDiskNum
(0)

662 , 
	`m_iAùiveDiskNum
(0)

663 , 
	`m_iWÜkšgDiskNum
(0)

664 , 
	`m_iFaedDiskNum
(0)

665 , 
	`m_iS·»DiskNum
(0)

666 , 
	`m_iS‹
(0)

667 , 
	`m_iChunkSize
(512)

668 , 
	`m_iRebudšgProg»ss
(-1)

669 , 
	`m_iMDNum
(-1)

670 , 
	`m_iFÜm©šgS‹
(-1)

671 , 
	`m_iFÜm©Prog»ss
(-1)

672 , 
	`m_bFÜm©
(
çl£
)

673 , 
	`m_bMouÁ
(
çl£
)

674 , 
	`m_bSu³rBlockP”si¡’t
(
çl£
)

675 , 
	`m_bIÇùive
(
çl£
)

676 , 
	`m_bRebudšg
(
çl£
)

678 
i
 = 0; i < 4; i ++)

679 
m_UUID
[
i
] = 0;

682 ~
	`RAIDInfo
() {

685 
RAIDInfo
& 
İ”©Ü
=(cÚ¡ 
¬¿y_d‘a
& 
rhs
)

687 
m_vDiskLi¡
.
	`ş—r
();

688 
i
 = 0; i < 
rhs
.
uDiskCouÁ”
; i++) {

689 
RAIDDiskInfo
 
šfo
;

690 ià(
rhs
.
¬¿yDisks
[
i
].
diskInfo
.
majÜ
 != 8)

693 
	`´štf
("%s, %s\n", 
rhs
.
¡rA¼ayDevName
,„hs.
¬¿yDisks
[
i
].
¡rDevName
);

694 
šfo
 = 
rhs
.
¬¿yDisks
[
i
];

695 
m_vDiskLi¡
.
	`push_back
(
šfo
);

698 
m_¡rS‹
 = 
rhs
.
¡rA¼ayS‹
;

699 
m_¡rLayout
 = 
rhs
.
¡rRaidLayout
;

700 
m_¡rRebudšgO³¿tiÚ
 = 
rhs
.
¡rRebudO³¿tiÚ
;

701 
m_¡rDevP©h
 = 
rhs
.
¡rA¼ayDevName
;

702 
	`memıy
(
m_UUID
, 
rhs
.
uuid
, (m_UUID));

703 
m_uÎTÙ®C­ac™y
 = 
rhs
.
uÎA¼aySize
;

704 
m_uÎU£dSize
 = 
rhs
.
uÎU£dSize
;

705 
m_iRAIDLev–
 = 
rhs
.
¬¿yInfo
.
Ëv–
;

706 
m_iTÙ®DiskNum
 = 
rhs
.
¬¿yInfo
.
Ä_disks
;

707 
m_iRAIDDiskNum
 = 
rhs
.
¬¿yInfo
.
¿id_disks
;

708 
m_iAùiveDiskNum
 = 
rhs
.
¬¿yInfo
.
aùive_disks
;

709 
m_iWÜkšgDiskNum
 = 
rhs
.
¬¿yInfo
.
wÜkšg_disks
;

710 
m_iFaedDiskNum
 = 
rhs
.
¬¿yInfo
.
çed_disks
;

711 
m_iS·»DiskNum
 = 
rhs
.
¬¿yInfo
.
¥¬e_disks
;

712 
m_iS‹
 = 
rhs
.
¬¿yInfo
.
¡©e
;

713 
m_iChunkSize
 = 
rhs
.
¬¿yInfo
.
chunk_size
;

714 
m_iRebudšgProg»ss
 = 
rhs
.
iRebudProg»ss
;

715 
m_bRebudšg
 = (
rhs
.
bIsRebudšg
 =ğ1è? 
Œue
 : 
çl£
;

716 
m_bIÇùive
 = (
rhs
.
bIÇùive
 =ğ1è? 
Œue
 : 
çl£
;

717 
m_bSu³rBlockP”si¡’t
 = (
rhs
.
bIsSu³rBlockP”si¡’t
 =ğ1è? 
Œue
 : 
çl£
;

718 
m_C»©iÚTime
 = 
rhs
.
¬¿yInfo
.
ùime
;

719 
m_Upd©eTime
 = 
rhs
.
¬¿yInfo
.
utime
;

721  *
this
;

724 
RAIDInfo
& 
İ”©Ü
=(cÚ¡ RAIDInfo& 
rhs
)

726 ià(
this
 =ğ&
rhs
)

727  *
this
;

729 
m_vDiskLi¡
.
	`ş—r
();

730 
size_t
 
i
 = 0; i < 
rhs
.
m_vDiskLi¡
.
	`size
(); i++) {

731 
m_vDiskLi¡
.
	`push_back
(
rhs
.m_vDiskLi¡[
i
]);

734 
m_¡rSysName
 = 
rhs
.m_strSysName;

735 
m_¡rS‹
 = 
rhs
.m_strState;

736 
m_¡rLayout
 = 
rhs
.m_strLayout;

737 
m_¡rRebudšgO³¿tiÚ
 = 
rhs
.m_strRebuildingOperation;

738 
m_¡rDevP©h
 = 
rhs
.m_strDevPath;

739 
m_¡rMouÁPošt
 = 
rhs
.m_strMountPoint;

740 
	`memıy
(
m_UUID
, 
rhs
.m_UUID, (m_UUID));

741 
m_uÎTÙ®C­ac™y
 = 
rhs
.m_ullTotalCapacity;

742 
m_uÎU£dSize
 = 
rhs
.m_ullUsedSize;

743 
m_iRAIDLev–
 = 
rhs
.m_iRAIDLevel;

744 
m_iTÙ®DiskNum
 = 
rhs
.m_iTotalDiskNum;

745 
m_iRAIDDiskNum
 = 
rhs
.m_iRAIDDiskNum;

746 
m_iAùiveDiskNum
 = 
rhs
.m_iActiveDiskNum;

747 
m_iWÜkšgDiskNum
 = 
rhs
.m_iWorkingDiskNum;

748 
m_iFaedDiskNum
 = 
rhs
.m_iFailedDiskNum;

749 
m_iS·»DiskNum
 = 
rhs
.m_iSpareDiskNum;

750 
m_iS‹
 = 
rhs
.m_iState;

751 
m_iChunkSize
 = 
rhs
.m_iChunkSize;

752 
m_iRebudšgProg»ss
 = 
rhs
.m_iRebuildingProgress;

753 
m_bRebudšg
 = 
rhs
.m_bRebuilding;

754 
m_bIÇùive
 = 
rhs
.m_bInactive;

755 
m_bSu³rBlockP”si¡’t
 = 
rhs
.m_bSuperBlockPersistent;

756 
m_C»©iÚTime
 = 
rhs
.m_CreationTime;

757 
m_Upd©eTime
 = 
rhs
.m_UpdateTime;

758 
m_iMDNum
 = 
rhs
.m_iMDNum;

759 
m_iFÜm©Prog»ss
 = 
rhs
.m_iFormatProgress;

760 
m_iFÜm©šgS‹
 = 
rhs
.m_iFormatingState;

761 
m_bMouÁ
 = 
rhs
.m_bMount;

762 
m_bFÜm©
 = 
rhs
.m_bFormat;

764  *
this
;

767 
boŞ
 
İ”©Ü
==(cÚ¡ 
RAIDInfo
& 
rhs
) const

769  (
m_¡rSysName
 =ğ
rhs
.m_strSysName &&

770 0 =ğ
	`memcmp
(
rhs
.
m_UUID
, m_UUID, (m_UUID)));

773 
boŞ
 
İ”©Ü
==(cÚ¡ 
¡ršg
& 
rhs
) const

775  (
m_¡rSysName
 =ğ
rhs
);

778 
boŞ
 
	`IsRAIDStusChªged
(cÚ¡ 
RAIDInfo
& 
´evious
) {

779  !(
m_Upd©eTime
 =ğ
´evious
.m_UpdateTime &&

780 
m_iFaedDiskNum
 =ğ
´evious
.m_iFailedDiskNum &&

781 
m_iWÜkšgDiskNum
 =ğ
´evious
.m_iWorkingDiskNum &&

782 
m_iS·»DiskNum
 =ğ
´evious
.m_iSpareDiskNum);

785 
	`Dump
()

787 
	`´štf
("Device: %s\n"

794 
m_¡rDevP©h
.
	`c_¡r
(), 
m_¡rS‹
.c_str(),

795 
m_iRAIDLev–
, 
m_iChunkSize
,

796 
m_uÎTÙ®C­ac™y
, 
m_uÎU£dSize
,

797 
m_iTÙ®DiskNum
, 
m_iRAIDDiskNum
, 
m_iAùiveDiskNum
,

798 
m_iWÜkšgDiskNum
, 
m_iFaedDiskNum
, 
m_iS·»DiskNum
,

799 
	`ùime
(&
m_C»©iÚTime
), ctime(&
m_Upd©eTime
),

800 
m_bRebudšg
?"Yes":"No", (
m_iRebudšgProg»ss
 < 0)?100:m_iRebuildingProgress,

801 
m_bMouÁ
?"Yes":"No", 
m_bFÜm©
?"Yes":"No",

802 
m_iFÜm©šgS‹


805 
size_t
 
i
 =0 ; i < 
m_vDiskLi¡
.
	`size
(); i++) {

806 
	`´štf
("\t");

807 
m_vDiskLi¡
[
i
].
	`Dump
();

809 
	`´štf
("\n");

813 şas 
	cRAIDMªag”
 : 
public
 
A´Th»adWÜk”
 {

814 
´iv©e
:

816 
eTC_STOP
,

819 
´iv©e
:

820 
m­
<
¡ršg
, 
MDProfe
> 
m_m­MDProfes
;

821 
m­
<
¡ršg
, 
DiskProfe
> 
m_m­DiskProfes
;

822 
¡ršg
 
m_¡rLa¡E¼Ü
;

823 
boŞ
 
m_bU£dMD
[128];

824 
boŞ
 
m_bU£dVŞume
[128];

826 
Cr™iÿlSeùiÚ
 
m_csMDProfes
;

827 
Cr™iÿlSeùiÚ
 
m_csDiskProfes
;

828 
Cr™iÿlSeùiÚ
 
m_csNÙifyChªge
;

829 
Cr™iÿlSeùiÚ
 
m_csU£dMD
;

830 
Cr™iÿlSeùiÚ
 
m_csU£dVŞume
;

831 
Cr™iÿlSeùiÚ
 
m_csLa¡E¼Ü
;

832 
Sem­hÜe
 
m_£mAs£mbË
;

833 
A´CÚd
 *
m_pNÙifyChªge
;

835 
¿idmgr_cb
 
m_cb
;

837 
´iv©e
:

838 
veùÜ
<
RAIDInfo
>::
™”©Ü
 
	`S—rchDiskB–Úg2RAID
(
RAIDDiskInfo
& 
devInfo
);

840 
boŞ
 
	`In™Ÿlize
();

842 
	`In™ŸlizeSh­e
(
sh­e
& 
s
, 
¿iddisks
, 
Ëv–
, 
chunk
 = 512, 
b™m­_chunk
 = 
UnS‘
, * 
b™m­_fe
 = 
NULL
);

843 #ifdeà
DEBUG


844 
	`In™ŸlizeCÚ‹xt
(
cÚ‹xt
& 
c
, 
fÜû
 = 1, 
run¡İ
 = 1, 
v”bo£
 = 1);

846 
	`In™ŸlizeCÚ‹xt
(
cÚ‹xt
& 
c
, 
fÜû
 = 1, 
run¡İ
 = 1, 
v”bo£
 = 0);

848 
	`In™ŸlizeMDDevId’t
(
mddev_id’t
& 
id’t
, 
uuid_£t
, cÚ¡ 
uuid
[4], 
b™m­_fd
 = -1, * 
b™m­_fe
 = 
NULL
);

849 
mddev_dev
* 
	`In™ŸlizeDevLi¡
(
veùÜ
<
¡ršg
>& 
devNameLi¡
, 
di¥os™iÚ
 = 0);

850 
mddev_dev
* 
	`In™ŸlizeDevLi¡
(cÚ¡ 
¡ršg
& 
»¶aû
, cÚ¡ sŒšg& 
w™h
);

851 
	`F»eDevLi¡
(
mddev_dev
* 
devli¡
);

852 
	`O³nMDDev
(cÚ¡ 
¡ršg
& 
mddev_·th
);

854 
	`C»©eRAID
(cÚ¡ 
¡ršg
& 
mddev
, 
veùÜ
<¡ršg>& 
vDevLi¡
, 
Ëv–
);

856 
boŞ
 
	`As£mbËRAID
(cÚ¡ 
uuid
[4], 
¡ršg
 &
mddev
);

857 
	`As£mbËRAID
(cÚ¡ 
¡ršg
& 
mddev
, cÚ¡ 
uuid
[4]);

859 
	`G‘F»eMDNum
();

860 
	`F»eMDNum
(
n
);

861 
	`S‘MDNum
(
n
);

863 
	`G‘F»eVŞumeNum
();

864 
	`F»eVŞumeNum
(
n
);

865 
	`S‘VŞumeNum
(
n
);

867 
	`Upd©eRAIDDiskLi¡
(
veùÜ
<
RAIDDiskInfo
>& 
vRAIDDiskInfoLi¡
, cÚ¡ 
¡ršg
& 
mddev
);

868 
boŞ
 
	`MªageRAIDSubdevs
(cÚ¡ 
¡ršg
& 
mddev
, 
veùÜ
<¡ršg>& 
vDevLi¡
, 
İ”©iÚ
);

869 
veùÜ
<
RAIDInfo
>::
™”©Ü
 
	`IsMDDevInRAIDInfoLi¡
(cÚ¡ 
¡ršg
 &
mddev
);

870 
veùÜ
<
RAIDInfo
>::
™”©Ü
 
	`IsMDDevInRAIDInfoLi¡
(cÚ¡ 
¡ršg
 &
mddev
, RAIDInfo& 
šfo
);

871 
boŞ
 
	`IsDiskExi¡InRAIDDiskLi¡
(cÚ¡ 
¡ršg
& 
dev
);

872 
boŞ
 
	`IsDiskExi¡InRAIDDiskLi¡
(
veùÜ
<
¡ršg
>& 
vDevLi¡
);

873 
¡ršg
 
	`G’”©eMDSysName
(
num
);

875 
boŞ
 
	`StİRAID
(cÚ¡ 
¡ršg
& 
mddev
);

877 
	`Qu”yMDSu³rBlockInDisk
(cÚ¡ 
¡ršg
& 
dev_·th
, 
examše_»suÉ
 &
»suÉ
);

878 
boŞ
 
	`Qu”yMDD‘a
(cÚ¡ 
¡ršg
& 
mddev_·th
, 
¬¿y_d‘a
 &
ad
);

879 
boŞ
 
	`G’”©eRAIDInfo
(cÚ¡ 
MDProfe
 &
´ofe
, 
RAIDInfo
& 
šfo
);

880 
¡ršg
 
	`G‘DeviûNodeBySymLšk
(cÚ¡ sŒšg& 
symlšk
);

882 
	`NÙifyChªge
();

884 
´Ùeùed
:

885 
	`Th»adProc
();

887 
public
:

888 
	`RAIDMªag”
();

889 ~
	`RAIDMªag”
();

891 
	`Regi¡”CB
(
¿idmgr_cb
 
cb
);

893 
boŞ
 
	`AddDisk
(cÚ¡ 
¡ršg
& 
dev
);

894 
boŞ
 
	`RemoveDisk
(cÚ¡ 
¡ršg
& 
dev
);

896 
boŞ
 
	`C»©eRAID
(
veùÜ
<
¡ršg
>& 
vDevLi¡
, 
Ëv–
);

898 
boŞ
 
	`RemoveMDDisks
(cÚ¡ 
¡ršg
& 
mddev
, 
veùÜ
<¡ršg>& 
vDevLi¡
);

899 
boŞ
 
	`M¬kFauÉyMDDisks
(cÚ¡ 
¡ršg
& 
mddev
, 
veùÜ
<¡ršg>& 
vDevLi¡
);

900 
boŞ
 
	`AddMDDisks
(cÚ¡ 
¡ršg
& 
mddev
, 
veùÜ
<¡ršg>& 
vDevLi¡
);

901 
boŞ
 
	`R—ddMDDisks
(cÚ¡ 
¡ršg
& 
mddev
, 
veùÜ
<¡ršg>& 
vDevLi¡
);

902 
boŞ
 
	`R•ÏûMDDisk
(cÚ¡ 
¡ršg
& 
mddev
, cÚ¡ sŒšg& 
»¶aû
, cÚ¡ sŒšg& 
w™h
);

904 
boŞ
 
	`D–‘eRAID
(cÚ¡ 
¡ršg
& 
mddev
);

906 
boŞ
 
	`G‘RAIDInfo
(cÚ¡ 
¡ršg
& 
mddev
, 
RAIDInfo
& 
šfo
);

907 
	`G‘RAIDInfo
(
veùÜ
<
RAIDInfo
>& 
li¡
);

908 
	`G‘F»eDisksInfo
(
veùÜ
<
RAIDDiskInfo
> &
li¡
);

909 
boŞ
 
	`G‘F»eDiskInfo
(cÚ¡ 
¡ršg
& 
symlšk
, 
RAIDDiskInfo
 &
šfo
);

911 
	`S‘La¡E¼Ü
(cÚ¡ 
¡ršg
 &
fmt
, ...);

912 
	`G‘La¡E¼Ü
(
¡ršg
 &
log
);

914 
boŞ
 
	`CheckFeSy¡em
();

915 
boŞ
 
	`DoFeSy¡emRecov”y
();

916 
boŞ
 
	`G‘FeSy¡emStus
();

918 
boŞ
 
	`FÜm©
(cÚ¡ 
¡ršg
& 
mddev
);

919 
boŞ
 
	`MouÁ
(cÚ¡ 
¡ršg
& 
mddev
);

920 
boŞ
 
	`UnmouÁ
(cÚ¡ 
¡ršg
& 
mddev
);

921 
boŞ
 
	`G‘FÜm©Prog»ss
(cÚ¡ 
¡ršg
& 
mddev
,

922 & 
¡©
, & 
´og»ss
);

923 
boŞ
 
	`IsMouÁed
(cÚ¡ 
¡ršg
& 
mddev
, &
num
);

924 
boŞ
 
	`IsFÜm©ed
(cÚ¡ 
¡ršg
& 
mddev
);

926 
	`Dump
();

927 
	}
};

	@build/CMakeFiles/2.8.12.2/CompilerIdCXX/CMakeCXXCompilerId.cpp

4 #iâdeà
__ılu¥lus


11 #ià
defšed
(
__COMO__
)

12 
	#COMPILER_ID
 "Com—u"

	)

14 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__COMO_VERSION__
 / 100)

	)

15 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__COMO_VERSION__
 % 100)

	)

17 #–ià
defšed
(
__INTEL_COMPILER
è|| defšed(
__ICC
)

18 
	#COMPILER_ID
 "IÁ–"

	)

20 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_COMPILER
/100)

	)

21 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_COMPILER
/10 % 10)

	)

22 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER
 % 10)

	)

23 #ià
defšed
(
__INTEL_COMPILER_BUILD_DATE
)

25 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__INTEL_COMPILER_BUILD_DATE
)

	)

28 #–ià
defšed
(
__PATHCC__
)

29 
	#COMPILER_ID
 "P©hSÿË"

	)

30 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PATHCC__
)

	)

31 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PATHCC_MINOR__
)

	)

32 #ià
defšed
(
__PATHCC_PATCHLEVEL__
)

33 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PATHCC_PATCHLEVEL__
)

	)

36 #–ià
defšed
(
__şªg__
)

37 
	#COMPILER_ID
 "CÏng"

	)

38 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__şªg_majÜ__
)

	)

39 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__şªg_mšÜ__
)

	)

40 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__şªg_·tchËv–__
)

	)

42 #–ià
defšed
(
__BORLANDC__
è&& defšed(
__CODEGEARC_VERSION__
)

43 
	#COMPILER_ID
 "Emb¬ÿd”o"

	)

44 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>24 & 0x00FF)

	)

45 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>16 & 0x00FF)

	)

46 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__CODEGEARC_VERSION__
 & 0xFFFF)

	)

48 #–ià
defšed
(
__BORLANDC__
)

49 
	#COMPILER_ID
 "BÜÏnd"

	)

51 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__BORLANDC__
>>8)

	)

52 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__BORLANDC__
 & 0xFF)

	)

54 #–ià
defšed
(
__WATCOMC__
)

55 
	#COMPILER_ID
 "W©com"

	)

57 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__WATCOMC__
 / 100)

	)

58 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__WATCOMC__
 % 100)

	)

60 #–ià
defšed
(
__SUNPRO_CC
)

61 
	#COMPILER_ID
 "SunPro"

	)

62 #ià
__SUNPRO_CC
 >= 0x5100

64 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_CC
>>12)

	)

65 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_CC
>>4 & 0xFF)

	)

66 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_CC
 & 0xF)

	)

69 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_CC
>>8)

	)

70 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_CC
>>4 & 0xF)

	)

71 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_CC
 & 0xF)

	)

74 #–ià
defšed
(
__HP_aCC
)

75 
	#COMPILER_ID
 "HP"

	)

77 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__HP_aCC
/10000)

	)

78 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__HP_aCC
/100 % 100)

	)

79 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__HP_aCC
 % 100)

	)

81 #–ià
defšed
(
__DECCXX
)

82 
	#COMPILER_ID
 "Com·q"

	)

84 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__DECCXX_VER
/10000000)

	)

85 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__DECCXX_VER
/100000 % 100)

	)

86 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__DECCXX_VER
 % 10000)

	)

88 #–ià
defšed
(
__IBMCPP__
)

89 #ià
defšed
(
__COMPILER_VER__
)

90 
	#COMPILER_ID
 "zOS"

	)

92 #ià
__IBMCPP__
 >= 800

93 
	#COMPILER_ID
 "XL"

	)

95 
	#COMPILER_ID
 "Visu®Age"

	)

98 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMCPP__
/100)

	)

99 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMCPP__
/10 % 10)

	)

100 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMCPP__
 % 10)

	)

103 #–ià
defšed
(
__PGI
)

104 
	#COMPILER_ID
 "PGI"

	)

105 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PGIC__
)

	)

106 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PGIC_MINOR__
)

	)

107 #ià
defšed
(
__PGIC_PATCHLEVEL__
)

108 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PGIC_PATCHLEVEL__
)

	)

111 #–ià
defšed
(
_CRAYC
)

112 
	#COMPILER_ID
 "C¿y"

	)

113 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_RELEASE
)

	)

114 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_RELEASE_MINOR
)

	)

116 #–ià
defšed
(
__TI_COMPILER_VERSION__
)

117 
	#COMPILER_ID
 "TI"

	)

119 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000000)

	)

120 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000 % 1000)

	)

121 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__TI_COMPILER_VERSION__
 % 1000)

	)

123 #–ià
defšed
(
__SCO_VERSION__
)

124 
	#COMPILER_ID
 "SCO"

	)

126 #–ià
defšed
(
__GNUC__
)

127 
	#COMPILER_ID
 "GNU"

	)

128 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

129 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

130 #ià
defšed
(
__GNUC_PATCHLEVEL__
)

131 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

134 #–ià
defšed
(
_MSC_VER
)

135 
	#COMPILER_ID
 "MSVC"

	)

137 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

138 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

139 #ià
defšed
(
_MSC_FULL_VER
)

140 #ià
_MSC_VER
 >= 1400

142 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 100000)

	)

145 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 10000)

	)

148 #ià
defšed
(
_MSC_BUILD
)

149 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
_MSC_BUILD
)

	)

153 #–ià
defšed
(
__VISUALDSPVERSION__
)

154 
	#COMPILER_ID
 "ADSP"

	)

156 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__VISUALDSPVERSION__
>>24)

	)

157 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__VISUALDSPVERSION__
>>16 & 0xFF)

	)

158 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__VISUALDSPVERSION__
>>8 & 0xFF)

	)

161 #–ià
defšed
(
__ADSPBLACKFIN__
è|| defšed(
__ADSPTS__
è|| defšed(
__ADSP21000__
)

162 
	#COMPILER_ID
 "ADSP"

	)

166 #–ià
defšed
(
__IAR_SYSTEMS_ICC__
 ) || defšed(
__IAR_SYSTEMS_ICC
)

167 
	#COMPILER_ID
 "IAR"

	)

169 #–ià
defšed
(
_SGI_COMPILER_VERSION
è|| defšed(
_COMPILER_VERSION
)

170 
	#COMPILER_ID
 "MIPS´o"

	)

171 #ià
defšed
(
_SGI_COMPILER_VERSION
)

173 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_SGI_COMPILER_VERSION
/100)

	)

174 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_SGI_COMPILER_VERSION
/10 % 10)

	)

175 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_SGI_COMPILER_VERSION
 % 10)

	)

178 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_COMPILER_VERSION
/100)

	)

179 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_COMPILER_VERSION
/10 % 10)

	)

180 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_COMPILER_VERSION
 % 10)

	)

186 #–ià
defšed
(
__sgi
)

187 
	#COMPILER_ID
 "MIPS´o"

	)

189 #–ià
defšed
(
__hpux
è|| defšed(
__hpua
)

190 
	#COMPILER_ID
 "HP"

	)

193 
	#COMPILER_ID
 ""

	)

201 cÚ¡* 
	gšfo_comp”
 = "INFO" ":" "comp”[" 
COMPILER_ID
 "]";

204 #ià
defšed
(
__lšux
è|| defšed(
__lšux__
è|| defšed(
lšux
)

205 
	#PLATFORM_ID
 "Lšux"

	)

207 #–ià
defšed
(
__CYGWIN__
)

208 
	#PLATFORM_ID
 "Cygwš"

	)

210 #–ià
defšed
(
__MINGW32__
)

211 
	#PLATFORM_ID
 "MšGW"

	)

213 #–ià
defšed
(
__APPLE__
)

214 
	#PLATFORM_ID
 "D¬wš"

	)

216 #–ià
defšed
(
_WIN32
è|| defšed(
__WIN32__
è|| defšed(
WIN32
)

217 
	#PLATFORM_ID
 "Wšdows"

	)

219 #–ià
defšed
(
__F»eBSD__
è|| defšed(
__F»eBSD
)

220 
	#PLATFORM_ID
 "F»eBSD"

	)

222 #–ià
defšed
(
__N‘BSD__
è|| defšed(
__N‘BSD
)

223 
	#PLATFORM_ID
 "N‘BSD"

	)

225 #–ià
defšed
(
__O³nBSD__
è|| defšed(
__OPENBSD
)

226 
	#PLATFORM_ID
 "O³nBSD"

	)

228 #–ià
defšed
(
__sun
è|| defšed(
sun
)

229 
	#PLATFORM_ID
 "SunOS"

	)

231 #–ià
defšed
(
_AIX
è|| defšed(
__AIX
è|| defšed(
__AIX__
è|| defšed(
__aix
è|| defšed(
__aix__
)

232 
	#PLATFORM_ID
 "AIX"

	)

234 #–ià
defšed
(
__sgi
è|| defšed(
__sgi__
è|| defšed(
_SGI
)

235 
	#PLATFORM_ID
 "IRIX"

	)

237 #–ià
defšed
(
__hpux
è|| defšed(
__hpux__
)

238 
	#PLATFORM_ID
 "HP-UX"

	)

240 #–ià
defšed
(
__HAIKU__
)

241 
	#PLATFORM_ID
 "Haiku"

	)

243 #–ià
defšed
(
__BeOS
è|| defšed(
__BEOS__
è|| defšed(
_BEOS
)

244 
	#PLATFORM_ID
 "BeOS"

	)

246 #–ià
defšed
(
__QNX__
è|| defšed(
__QNXNTO__
)

247 
	#PLATFORM_ID
 "QNX"

	)

249 #–ià
defšed
(
__Œu64
è|| defšed(
_Œu64
è|| defšed(
__TRU64__
)

250 
	#PLATFORM_ID
 "Tru64"

	)

252 #–ià
defšed
(
__riscos
è|| defšed(
__riscos__
)

253 
	#PLATFORM_ID
 "RISCos"

	)

255 #–ià
defšed
(
__sšix
è|| defšed(
__sšix__
è|| defšed(
__SINIX__
)

256 
	#PLATFORM_ID
 "SINIX"

	)

258 #–ià
defšed
(
__UNIX_SV__
)

259 
	#PLATFORM_ID
 "UNIX_SV"

	)

261 #–ià
defšed
(
__bsdos__
)

262 
	#PLATFORM_ID
 "BSDOS"

	)

264 #–ià
defšed
(
_MPRAS
è|| defšed(
MPRAS
)

265 
	#PLATFORM_ID
 "MP-RAS"

	)

267 #–ià
defšed
(
__osf
è|| defšed(
__osf__
)

268 
	#PLATFORM_ID
 "OSF1"

	)

270 #–ià
defšed
(
_SCO_SV
è|| defšed(
SCO_SV
è|| defšed(
sco_sv
)

271 
	#PLATFORM_ID
 "SCO_SV"

	)

273 #–ià
defšed
(
__uÉrix
è|| defšed(
__uÉrix__
è|| defšed(
_ULTRIX
)

274 
	#PLATFORM_ID
 "ULTRIX"

	)

276 #–ià
defšed
(
__XENIX__
è|| defšed(
_XENIX
è|| defšed(
XENIX
)

277 
	#PLATFORM_ID
 "X’ix"

	)

280 
	#PLATFORM_ID
 ""

	)

289 #ià
defšed
(
_WIN32
è&& defšed(
_MSC_VER
)

290 #ià
defšed
(
_M_IA64
)

291 
	#ARCHITECTURE_ID
 "IA64"

	)

293 #–ià
defšed
(
_M_X64
è|| defšed(
_M_AMD64
)

294 
	#ARCHITECTURE_ID
 "x64"

	)

296 #–ià
defšed
(
_M_IX86
)

297 
	#ARCHITECTURE_ID
 "X86"

	)

299 #–ià
defšed
(
_M_ARM
)

300 
	#ARCHITECTURE_ID
 "ARM"

	)

302 #–ià
defšed
(
_M_MIPS
)

303 
	#ARCHITECTURE_ID
 "MIPS"

	)

305 #–ià
defšed
(
_M_SH
)

306 
	#ARCHITECTURE_ID
 "SHx"

	)

309 
	#ARCHITECTURE_ID
 ""

	)

313 
	#ARCHITECTURE_ID
 ""

	)

317 
	#DEC
(
n
) \

318 ('0' + (((
n
) / 10000000)%10)), \

319 ('0' + (((
n
) / 1000000)%10)), \

320 ('0' + (((
n
) / 100000)%10)), \

321 ('0' + (((
n
) / 10000)%10)), \

322 ('0' + (((
n
) / 1000)%10)), \

323 ('0' + (((
n
) / 100)%10)), \

324 ('0' + (((
n
) / 10)%10)), \

325 ('0' + ((
n
è% 10))

	)

328 
	#HEX
(
n
) \

329 ('0' + ((
n
)>>28 & 0xF)), \

330 ('0' + ((
n
)>>24 & 0xF)), \

331 ('0' + ((
n
)>>20 & 0xF)), \

332 ('0' + ((
n
)>>16 & 0xF)), \

333 ('0' + ((
n
)>>12 & 0xF)), \

334 ('0' + ((
n
)>>8 & 0xF)), \

335 ('0' + ((
n
)>>4 & 0xF)), \

336 ('0' + ((
n
è& 0xF))

	)

339 #ifdeà
COMPILER_VERSION_MAJOR


340 cÚ¡ 
	gšfo_v”siÚ
[] = {

343 
COMPILER_VERSION_MAJOR
,

344 #ifdeà
COMPILER_VERSION_MINOR


345 '.', 
COMPILER_VERSION_MINOR
,

346 #ifdeà
COMPILER_VERSION_PATCH


347 '.', 
COMPILER_VERSION_PATCH
,

348 #ifdeà
COMPILER_VERSION_TWEAK


349 '.', 
COMPILER_VERSION_TWEAK
,

360 cÚ¡* 
	gšfo_¶©fÜm
 = "INFO" ":" "¶©fÜm[" 
PLATFORM_ID
 "]";

361 cÚ¡* 
	gšfo_¬ch
 = "INFO" ":" "¬ch[" 
ARCHITECTURE_ID
 "]";

367 
	$maš
(
¬gc
, * 
¬gv
[])

369 
»quœe
 = 0;

370 
»quœe
 +ğ
šfo_comp”
[
¬gc
];

371 
»quœe
 +ğ
šfo_¶©fÜm
[
¬gc
];

372 #ifdeà
COMPILER_VERSION_MAJOR


373 
»quœe
 +ğ
šfo_v”siÚ
[
¬gc
];

375 ()
¬gv
;

376  
»quœe
;

377 
	}
}

	@common_util.h

1 
	~"commÚ/nusy¦og.h
"

	@libe2fsck/build/CMakeFiles/2.8.12.2/CompilerIdCXX/CMakeCXXCompilerId.cpp

4 #iâdeà
__ılu¥lus


11 #ià
defšed
(
__COMO__
)

12 
	#COMPILER_ID
 "Com—u"

	)

14 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__COMO_VERSION__
 / 100)

	)

15 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__COMO_VERSION__
 % 100)

	)

17 #–ià
defšed
(
__INTEL_COMPILER
è|| defšed(
__ICC
)

18 
	#COMPILER_ID
 "IÁ–"

	)

20 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_COMPILER
/100)

	)

21 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_COMPILER
/10 % 10)

	)

22 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER
 % 10)

	)

23 #ià
defšed
(
__INTEL_COMPILER_BUILD_DATE
)

25 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__INTEL_COMPILER_BUILD_DATE
)

	)

28 #–ià
defšed
(
__PATHCC__
)

29 
	#COMPILER_ID
 "P©hSÿË"

	)

30 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PATHCC__
)

	)

31 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PATHCC_MINOR__
)

	)

32 #ià
defšed
(
__PATHCC_PATCHLEVEL__
)

33 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PATHCC_PATCHLEVEL__
)

	)

36 #–ià
defšed
(
__şªg__
)

37 
	#COMPILER_ID
 "CÏng"

	)

38 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__şªg_majÜ__
)

	)

39 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__şªg_mšÜ__
)

	)

40 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__şªg_·tchËv–__
)

	)

42 #–ià
defšed
(
__BORLANDC__
è&& defšed(
__CODEGEARC_VERSION__
)

43 
	#COMPILER_ID
 "Emb¬ÿd”o"

	)

44 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>24 & 0x00FF)

	)

45 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>16 & 0x00FF)

	)

46 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__CODEGEARC_VERSION__
 & 0xFFFF)

	)

48 #–ià
defšed
(
__BORLANDC__
)

49 
	#COMPILER_ID
 "BÜÏnd"

	)

51 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__BORLANDC__
>>8)

	)

52 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__BORLANDC__
 & 0xFF)

	)

54 #–ià
defšed
(
__WATCOMC__
)

55 
	#COMPILER_ID
 "W©com"

	)

57 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__WATCOMC__
 / 100)

	)

58 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__WATCOMC__
 % 100)

	)

60 #–ià
defšed
(
__SUNPRO_CC
)

61 
	#COMPILER_ID
 "SunPro"

	)

62 #ià
__SUNPRO_CC
 >= 0x5100

64 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_CC
>>12)

	)

65 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_CC
>>4 & 0xFF)

	)

66 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_CC
 & 0xF)

	)

69 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_CC
>>8)

	)

70 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_CC
>>4 & 0xF)

	)

71 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_CC
 & 0xF)

	)

74 #–ià
defšed
(
__HP_aCC
)

75 
	#COMPILER_ID
 "HP"

	)

77 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__HP_aCC
/10000)

	)

78 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__HP_aCC
/100 % 100)

	)

79 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__HP_aCC
 % 100)

	)

81 #–ià
defšed
(
__DECCXX
)

82 
	#COMPILER_ID
 "Com·q"

	)

84 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__DECCXX_VER
/10000000)

	)

85 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__DECCXX_VER
/100000 % 100)

	)

86 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__DECCXX_VER
 % 10000)

	)

88 #–ià
defšed
(
__IBMCPP__
)

89 #ià
defšed
(
__COMPILER_VER__
)

90 
	#COMPILER_ID
 "zOS"

	)

92 #ià
__IBMCPP__
 >= 800

93 
	#COMPILER_ID
 "XL"

	)

95 
	#COMPILER_ID
 "Visu®Age"

	)

98 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMCPP__
/100)

	)

99 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMCPP__
/10 % 10)

	)

100 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMCPP__
 % 10)

	)

103 #–ià
defšed
(
__PGI
)

104 
	#COMPILER_ID
 "PGI"

	)

105 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PGIC__
)

	)

106 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PGIC_MINOR__
)

	)

107 #ià
defšed
(
__PGIC_PATCHLEVEL__
)

108 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PGIC_PATCHLEVEL__
)

	)

111 #–ià
defšed
(
_CRAYC
)

112 
	#COMPILER_ID
 "C¿y"

	)

113 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_RELEASE
)

	)

114 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_RELEASE_MINOR
)

	)

116 #–ià
defšed
(
__TI_COMPILER_VERSION__
)

117 
	#COMPILER_ID
 "TI"

	)

119 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000000)

	)

120 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000 % 1000)

	)

121 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__TI_COMPILER_VERSION__
 % 1000)

	)

123 #–ià
defšed
(
__SCO_VERSION__
)

124 
	#COMPILER_ID
 "SCO"

	)

126 #–ià
defšed
(
__GNUC__
)

127 
	#COMPILER_ID
 "GNU"

	)

128 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

129 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

130 #ià
defšed
(
__GNUC_PATCHLEVEL__
)

131 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

134 #–ià
defšed
(
_MSC_VER
)

135 
	#COMPILER_ID
 "MSVC"

	)

137 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

138 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

139 #ià
defšed
(
_MSC_FULL_VER
)

140 #ià
_MSC_VER
 >= 1400

142 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 100000)

	)

145 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 10000)

	)

148 #ià
defšed
(
_MSC_BUILD
)

149 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
_MSC_BUILD
)

	)

153 #–ià
defšed
(
__VISUALDSPVERSION__
)

154 
	#COMPILER_ID
 "ADSP"

	)

156 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__VISUALDSPVERSION__
>>24)

	)

157 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__VISUALDSPVERSION__
>>16 & 0xFF)

	)

158 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__VISUALDSPVERSION__
>>8 & 0xFF)

	)

161 #–ià
defšed
(
__ADSPBLACKFIN__
è|| defšed(
__ADSPTS__
è|| defšed(
__ADSP21000__
)

162 
	#COMPILER_ID
 "ADSP"

	)

166 #–ià
defšed
(
__IAR_SYSTEMS_ICC__
 ) || defšed(
__IAR_SYSTEMS_ICC
)

167 
	#COMPILER_ID
 "IAR"

	)

169 #–ià
defšed
(
_SGI_COMPILER_VERSION
è|| defšed(
_COMPILER_VERSION
)

170 
	#COMPILER_ID
 "MIPS´o"

	)

171 #ià
defšed
(
_SGI_COMPILER_VERSION
)

173 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_SGI_COMPILER_VERSION
/100)

	)

174 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_SGI_COMPILER_VERSION
/10 % 10)

	)

175 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_SGI_COMPILER_VERSION
 % 10)

	)

178 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_COMPILER_VERSION
/100)

	)

179 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_COMPILER_VERSION
/10 % 10)

	)

180 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_COMPILER_VERSION
 % 10)

	)

186 #–ià
defšed
(
__sgi
)

187 
	#COMPILER_ID
 "MIPS´o"

	)

189 #–ià
defšed
(
__hpux
è|| defšed(
__hpua
)

190 
	#COMPILER_ID
 "HP"

	)

193 
	#COMPILER_ID
 ""

	)

201 cÚ¡* 
	gšfo_comp”
 = "INFO" ":" "comp”[" 
COMPILER_ID
 "]";

204 #ià
defšed
(
__lšux
è|| defšed(
__lšux__
è|| defšed(
lšux
)

205 
	#PLATFORM_ID
 "Lšux"

	)

207 #–ià
defšed
(
__CYGWIN__
)

208 
	#PLATFORM_ID
 "Cygwš"

	)

210 #–ià
defšed
(
__MINGW32__
)

211 
	#PLATFORM_ID
 "MšGW"

	)

213 #–ià
defšed
(
__APPLE__
)

214 
	#PLATFORM_ID
 "D¬wš"

	)

216 #–ià
defšed
(
_WIN32
è|| defšed(
__WIN32__
è|| defšed(
WIN32
)

217 
	#PLATFORM_ID
 "Wšdows"

	)

219 #–ià
defšed
(
__F»eBSD__
è|| defšed(
__F»eBSD
)

220 
	#PLATFORM_ID
 "F»eBSD"

	)

222 #–ià
defšed
(
__N‘BSD__
è|| defšed(
__N‘BSD
)

223 
	#PLATFORM_ID
 "N‘BSD"

	)

225 #–ià
defšed
(
__O³nBSD__
è|| defšed(
__OPENBSD
)

226 
	#PLATFORM_ID
 "O³nBSD"

	)

228 #–ià
defšed
(
__sun
è|| defšed(
sun
)

229 
	#PLATFORM_ID
 "SunOS"

	)

231 #–ià
defšed
(
_AIX
è|| defšed(
__AIX
è|| defšed(
__AIX__
è|| defšed(
__aix
è|| defšed(
__aix__
)

232 
	#PLATFORM_ID
 "AIX"

	)

234 #–ià
defšed
(
__sgi
è|| defšed(
__sgi__
è|| defšed(
_SGI
)

235 
	#PLATFORM_ID
 "IRIX"

	)

237 #–ià
defšed
(
__hpux
è|| defšed(
__hpux__
)

238 
	#PLATFORM_ID
 "HP-UX"

	)

240 #–ià
defšed
(
__HAIKU__
)

241 
	#PLATFORM_ID
 "Haiku"

	)

243 #–ià
defšed
(
__BeOS
è|| defšed(
__BEOS__
è|| defšed(
_BEOS
)

244 
	#PLATFORM_ID
 "BeOS"

	)

246 #–ià
defšed
(
__QNX__
è|| defšed(
__QNXNTO__
)

247 
	#PLATFORM_ID
 "QNX"

	)

249 #–ià
defšed
(
__Œu64
è|| defšed(
_Œu64
è|| defšed(
__TRU64__
)

250 
	#PLATFORM_ID
 "Tru64"

	)

252 #–ià
defšed
(
__riscos
è|| defšed(
__riscos__
)

253 
	#PLATFORM_ID
 "RISCos"

	)

255 #–ià
defšed
(
__sšix
è|| defšed(
__sšix__
è|| defšed(
__SINIX__
)

256 
	#PLATFORM_ID
 "SINIX"

	)

258 #–ià
defšed
(
__UNIX_SV__
)

259 
	#PLATFORM_ID
 "UNIX_SV"

	)

261 #–ià
defšed
(
__bsdos__
)

262 
	#PLATFORM_ID
 "BSDOS"

	)

264 #–ià
defšed
(
_MPRAS
è|| defšed(
MPRAS
)

265 
	#PLATFORM_ID
 "MP-RAS"

	)

267 #–ià
defšed
(
__osf
è|| defšed(
__osf__
)

268 
	#PLATFORM_ID
 "OSF1"

	)

270 #–ià
defšed
(
_SCO_SV
è|| defšed(
SCO_SV
è|| defšed(
sco_sv
)

271 
	#PLATFORM_ID
 "SCO_SV"

	)

273 #–ià
defšed
(
__uÉrix
è|| defšed(
__uÉrix__
è|| defšed(
_ULTRIX
)

274 
	#PLATFORM_ID
 "ULTRIX"

	)

276 #–ià
defšed
(
__XENIX__
è|| defšed(
_XENIX
è|| defšed(
XENIX
)

277 
	#PLATFORM_ID
 "X’ix"

	)

280 
	#PLATFORM_ID
 ""

	)

289 #ià
defšed
(
_WIN32
è&& defšed(
_MSC_VER
)

290 #ià
defšed
(
_M_IA64
)

291 
	#ARCHITECTURE_ID
 "IA64"

	)

293 #–ià
defšed
(
_M_X64
è|| defšed(
_M_AMD64
)

294 
	#ARCHITECTURE_ID
 "x64"

	)

296 #–ià
defšed
(
_M_IX86
)

297 
	#ARCHITECTURE_ID
 "X86"

	)

299 #–ià
defšed
(
_M_ARM
)

300 
	#ARCHITECTURE_ID
 "ARM"

	)

302 #–ià
defšed
(
_M_MIPS
)

303 
	#ARCHITECTURE_ID
 "MIPS"

	)

305 #–ià
defšed
(
_M_SH
)

306 
	#ARCHITECTURE_ID
 "SHx"

	)

309 
	#ARCHITECTURE_ID
 ""

	)

313 
	#ARCHITECTURE_ID
 ""

	)

317 
	#DEC
(
n
) \

318 ('0' + (((
n
) / 10000000)%10)), \

319 ('0' + (((
n
) / 1000000)%10)), \

320 ('0' + (((
n
) / 100000)%10)), \

321 ('0' + (((
n
) / 10000)%10)), \

322 ('0' + (((
n
) / 1000)%10)), \

323 ('0' + (((
n
) / 100)%10)), \

324 ('0' + (((
n
) / 10)%10)), \

325 ('0' + ((
n
è% 10))

	)

328 
	#HEX
(
n
) \

329 ('0' + ((
n
)>>28 & 0xF)), \

330 ('0' + ((
n
)>>24 & 0xF)), \

331 ('0' + ((
n
)>>20 & 0xF)), \

332 ('0' + ((
n
)>>16 & 0xF)), \

333 ('0' + ((
n
)>>12 & 0xF)), \

334 ('0' + ((
n
)>>8 & 0xF)), \

335 ('0' + ((
n
)>>4 & 0xF)), \

336 ('0' + ((
n
è& 0xF))

	)

339 #ifdeà
COMPILER_VERSION_MAJOR


340 cÚ¡ 
	gšfo_v”siÚ
[] = {

343 
COMPILER_VERSION_MAJOR
,

344 #ifdeà
COMPILER_VERSION_MINOR


345 '.', 
COMPILER_VERSION_MINOR
,

346 #ifdeà
COMPILER_VERSION_PATCH


347 '.', 
COMPILER_VERSION_PATCH
,

348 #ifdeà
COMPILER_VERSION_TWEAK


349 '.', 
COMPILER_VERSION_TWEAK
,

360 cÚ¡* 
	gšfo_¶©fÜm
 = "INFO" ":" "¶©fÜm[" 
PLATFORM_ID
 "]";

361 cÚ¡* 
	gšfo_¬ch
 = "INFO" ":" "¬ch[" 
ARCHITECTURE_ID
 "]";

367 
	$maš
(
¬gc
, * 
¬gv
[])

369 
»quœe
 = 0;

370 
»quœe
 +ğ
šfo_comp”
[
¬gc
];

371 
»quœe
 +ğ
šfo_¶©fÜm
[
¬gc
];

372 #ifdeà
COMPILER_VERSION_MAJOR


373 
»quœe
 +ğ
šfo_v”siÚ
[
¬gc
];

375 ()
¬gv
;

376  
»quœe
;

377 
	}
}

	@libe2fsck/crc32defs.h

6 
	#CRCPOLY_LE
 0xedb88320

	)

7 
	#CRCPOLY_BE
 0x04c11db7

	)

11 #iâdeà
CRC_LE_BITS


12 
	#CRC_LE_BITS
 8

	)

14 #iâdeà
CRC_BE_BITS


15 
	#CRC_BE_BITS
 8

	)

22 #ià
CRC_LE_BITS
 > 8 || CRC_LE_BITS < 1 || CRC_LE_BITS & CRC_LE_BITS-1

23 #”rÜ 
CRC_LE_BITS
 
mu¡
 
be
 
a
 
pow”
 
of
 2 
b‘w“n
 1 
ªd
 8

30 #ià
CRC_BE_BITS
 > 8 || CRC_BE_BITS < 1 || CRC_BE_BITS & CRC_BE_BITS-1

31 #”rÜ 
CRC_BE_BITS
 
mu¡
 
be
 
a
 
pow”
 
of
 2 
b‘w“n
 1 
ªd
 8

34 
	#___cÚ¡ªt_swab32
(
x
) \

35 ((
__u32
)( \

36 (((
__u32
)(
x
) & (__u32)0x000000ffUL) << 24) | \

37 (((
__u32
)(
x
) & (__u32)0x0000ff00UL) << 8) | \

38 (((
__u32
)(
x
) & (__u32)0x00ff0000UL) >> 8) | \

39 (((
__u32
)(
x
è& (__u32)0xff000000ULè>> 24è))

	)

42 #ifdeà
WORDS_BIGENDIAN


43 
	#__cÚ¡ªt_ıu_to_Ë32
(
x
è
	`___cÚ¡ªt_swab32
((x))

	)

44 
	#__cÚ¡ªt_ıu_to_be32
(
x
è(x)

	)

45 
	#__be32_to_ıu
(
x
è(x)

	)

46 
	#__ıu_to_be32
(
x
è(x)

	)

47 
	#__ıu_to_Ë32
(
x
è(
	`ext2fs_swab32
((x)))

	)

48 
	#__Ë32_to_ıu
(
x
è(
	`ext2fs_swab32
((x)))

	)

50 
	#__cÚ¡ªt_ıu_to_Ë32
(
x
è(x)

	)

51 
	#__cÚ¡ªt_ıu_to_be32
(
x
è
	`___cÚ¡ªt_swab32
((x))

	)

52 
	#__be32_to_ıu
(
x
è(
	`ext2fs_swab32
((x)))

	)

53 
	#__ıu_to_be32
(
x
è(
	`ext2fs_swab32
((x)))

	)

54 
	#__ıu_to_Ë32
(
x
è(x)

	)

55 
	#__Ë32_to_ıu
(
x
è(x)

	)

58 #ià(
__GNUC__
 >= 3)

59 
	#lik–y
(
x
è
	`__butš_ex³ù
(!!(x), 1)

	)

60 
	#uÆik–y
(
x
è
	`__butš_ex³ù
(!!(x), 0)

	)

62 
	#lik–y
(
x
è(x)

	)

63 
	#uÆik–y
(
x
è(x)

	)

	@libe2fsck/crc32table.h

3 #ifdeà
UNITTEST


4 cÚ¡ 
__u32
 
	güc32bË_Ë
[] = {

5 
tŞe
(0x00000000L),ole(0x77073096L),ole(0xee0e612cL),ole(0x990951baL),

6 
tŞe
(0x076dc419L),ole(0x706af48fL),ole(0xe963a535L),ole(0x9e6495a3L),

7 
tŞe
(0x0edb8832L),ole(0x79dcb8a4L),ole(0xe0d5e91eL),ole(0x97d2d988L),

8 
tŞe
(0x09b64c2bL),ole(0x7eb17cbdL),ole(0xe7b82d07L),ole(0x90bf1d91L),

9 
tŞe
(0x1db71064L),ole(0x6ab020f2L),ole(0xf3b97148L),ole(0x84be41deL),

10 
tŞe
(0x1adad47dL),ole(0x6ddde4ebL),ole(0xf4d4b551L),ole(0x83d385c7L),

11 
tŞe
(0x136c9856L),ole(0x646ba8c0L),ole(0xfd62f97aL),ole(0x8a65c9ecL),

12 
tŞe
(0x14015c4fL),ole(0x63066cd9L),ole(0xfa0f3d63L),ole(0x8d080df5L),

13 
tŞe
(0x3b6e20c8L),ole(0x4c69105eL),ole(0xd56041e4L),ole(0xa2677172L),

14 
tŞe
(0x3c03e4d1L),ole(0x4b04d447L),ole(0xd20d85fdL),ole(0xa50ab56bL),

15 
tŞe
(0x35b5a8faL),ole(0x42b2986cL),ole(0xdbbbc9d6L),ole(0xacbcf940L),

16 
tŞe
(0x32d86ce3L),ole(0x45df5c75L),ole(0xdcd60dcfL),ole(0xabd13d59L),

17 
tŞe
(0x26d930acL),ole(0x51de003aL),ole(0xc8d75180L),ole(0xbfd06116L),

18 
tŞe
(0x21b4f4b5L),ole(0x56b3c423L),ole(0xcfba9599L),ole(0xb8bda50fL),

19 
tŞe
(0x2802b89eL),ole(0x5f058808L),ole(0xc60cd9b2L),ole(0xb10be924L),

20 
tŞe
(0x2f6f7c87L),ole(0x58684c11L),ole(0xc1611dabL),ole(0xb6662d3dL),

21 
tŞe
(0x76dc4190L),ole(0x01db7106L),ole(0x98d220bcL),ole(0xefd5102aL),

22 
tŞe
(0x71b18589L),ole(0x06b6b51fL),ole(0x9fbfe4a5L),ole(0xe8b8d433L),

23 
tŞe
(0x7807c9a2L),ole(0x0f00f934L),ole(0x9609a88eL),ole(0xe10e9818L),

24 
tŞe
(0x7f6a0dbbL),ole(0x086d3d2dL),ole(0x91646c97L),ole(0xe6635c01L),

25 
tŞe
(0x6b6b51f4L),ole(0x1c6c6162L),ole(0x856530d8L),ole(0xf262004eL),

26 
tŞe
(0x6c0695edL),ole(0x1b01a57bL),ole(0x8208f4c1L),ole(0xf50fc457L),

27 
tŞe
(0x65b0d9c6L),ole(0x12b7e950L),ole(0x8bbeb8eaL),ole(0xfcb9887cL),

28 
tŞe
(0x62dd1ddfL),ole(0x15da2d49L),ole(0x8cd37cf3L),ole(0xfbd44c65L),

29 
tŞe
(0x4db26158L),ole(0x3ab551ceL),ole(0xa3bc0074L),ole(0xd4bb30e2L),

30 
tŞe
(0x4adfa541L),ole(0x3dd895d7L),ole(0xa4d1c46dL),ole(0xd3d6f4fbL),

31 
tŞe
(0x4369e96aL),ole(0x346ed9fcL),ole(0xad678846L),ole(0xda60b8d0L),

32 
tŞe
(0x44042d73L),ole(0x33031de5L),ole(0xaa0a4c5fL),ole(0xdd0d7cc9L),

33 
tŞe
(0x5005713cL),ole(0x270241aaL),ole(0xbe0b1010L),ole(0xc90c2086L),

34 
tŞe
(0x5768b525L),ole(0x206f85b3L),ole(0xb966d409L),ole(0xce61e49fL),

35 
tŞe
(0x5edef90eL),ole(0x29d9c998L),ole(0xb0d09822L),ole(0xc7d7a8b4L),

36 
tŞe
(0x59b33d17L),ole(0x2eb40d81L),ole(0xb7bd5c3bL),ole(0xc0ba6cadL),

37 
tŞe
(0xedb88320L),ole(0x9abfb3b6L),ole(0x03b6e20cL),ole(0x74b1d29aL),

38 
tŞe
(0xead54739L),ole(0x9dd277afL),ole(0x04db2615L),ole(0x73dc1683L),

39 
tŞe
(0xe3630b12L),ole(0x94643b84L),ole(0x0d6d6a3eL),ole(0x7a6a5aa8L),

40 
tŞe
(0xe40ecf0bL),ole(0x9309ff9dL),ole(0x0a00ae27L),ole(0x7d079eb1L),

41 
tŞe
(0xf00f9344L),ole(0x8708a3d2L),ole(0x1e01f268L),ole(0x6906c2feL),

42 
tŞe
(0xf762575dL),ole(0x806567cbL),ole(0x196c3671L),ole(0x6e6b06e7L),

43 
tŞe
(0xfed41b76L),ole(0x89d32be0L),ole(0x10da7a5aL),ole(0x67dd4accL),

44 
tŞe
(0xf9b9df6fL),ole(0x8ebeeff9L),ole(0x17b7be43L),ole(0x60b08ed5L),

45 
tŞe
(0xd6d6a3e8L),ole(0xa1d1937eL),ole(0x38d8c2c4L),ole(0x4fdff252L),

46 
tŞe
(0xd1bb67f1L),ole(0xa6bc5767L),ole(0x3fb506ddL),ole(0x48b2364bL),

47 
tŞe
(0xd80d2bdaL),ole(0xaf0a1b4cL),ole(0x36034af6L),ole(0x41047a60L),

48 
tŞe
(0xdf60efc3L),ole(0xa867df55L),ole(0x316e8eefL),ole(0x4669be79L),

49 
tŞe
(0xcb61b38cL),ole(0xbc66831aL),ole(0x256fd2a0L),ole(0x5268e236L),

50 
tŞe
(0xcc0c7795L),ole(0xbb0b4703L),ole(0x220216b9L),ole(0x5505262fL),

51 
tŞe
(0xc5ba3bbeL),ole(0xb2bd0b28L),ole(0x2bb45a92L),ole(0x5cb36a04L),

52 
tŞe
(0xc2d7ffa7L),ole(0xb5d0cf31L),ole(0x2cd99e8bL),ole(0x5bdeae1dL),

53 
tŞe
(0x9b64c2b0L),ole(0xec63f226L),ole(0x756aa39cL),ole(0x026d930aL),

54 
tŞe
(0x9c0906a9L),ole(0xeb0e363fL),ole(0x72076785L),ole(0x05005713L),

55 
tŞe
(0x95bf4a82L),ole(0xe2b87a14L),ole(0x7bb12baeL),ole(0x0cb61b38L),

56 
tŞe
(0x92d28e9bL),ole(0xe5d5be0dL),ole(0x7cdcefb7L),ole(0x0bdbdf21L),

57 
tŞe
(0x86d3d2d4L),ole(0xf1d4e242L),ole(0x68ddb3f8L),ole(0x1fda836eL),

58 
tŞe
(0x81be16cdL),ole(0xf6b9265bL),ole(0x6fb077e1L),ole(0x18b74777L),

59 
tŞe
(0x88085ae6L),ole(0xff0f6a70L),ole(0x66063bcaL),ole(0x11010b5cL),

60 
tŞe
(0x8f659effL),ole(0xf862ae69L),ole(0x616bffd3L),ole(0x166ccf45L),

61 
tŞe
(0xa00ae278L),ole(0xd70dd2eeL),ole(0x4e048354L),ole(0x3903b3c2L),

62 
tŞe
(0xa7672661L),ole(0xd06016f7L),ole(0x4969474dL),ole(0x3e6e77dbL),

63 
tŞe
(0xaed16a4aL),ole(0xd9d65adcL),ole(0x40df0b66L),ole(0x37d83bf0L),

64 
tŞe
(0xa9bcae53L),ole(0xdebb9ec5L),ole(0x47b2cf7fL),ole(0x30b5ffe9L),

65 
tŞe
(0xbdbdf21cL),ole(0xcabac28aL),ole(0x53b39330L),ole(0x24b4a3a6L),

66 
tŞe
(0xbad03605L),ole(0xcdd70693L),ole(0x54de5729L),ole(0x23d967bfL),

67 
tŞe
(0xb3667a2eL),ole(0xc4614ab8L),ole(0x5d681b02L),ole(0x2a6f2b94L),

68 
tŞe
(0xb40bbe37L),ole(0xc30c8ea1L),ole(0x5a05df1bL),ole(0x2d02ef8dL)

71 cÚ¡ 
__u32
 
	güc32bË_be
[] = {

72 
tobe
(0x00000000L),obe(0x04c11db7L),obe(0x09823b6eL),obe(0x0d4326d9L),

73 
tobe
(0x130476dcL),obe(0x17c56b6bL),obe(0x1a864db2L),obe(0x1e475005L),

74 
tobe
(0x2608edb8L),obe(0x22c9f00fL),obe(0x2f8ad6d6L),obe(0x2b4bcb61L),

75 
tobe
(0x350c9b64L),obe(0x31cd86d3L),obe(0x3c8ea00aL),obe(0x384fbdbdL),

76 
tobe
(0x4c11db70L),obe(0x48d0c6c7L),obe(0x4593e01eL),obe(0x4152fda9L),

77 
tobe
(0x5f15adacL),obe(0x5bd4b01bL),obe(0x569796c2L),obe(0x52568b75L),

78 
tobe
(0x6a1936c8L),obe(0x6ed82b7fL),obe(0x639b0da6L),obe(0x675a1011L),

79 
tobe
(0x791d4014L),obe(0x7ddc5da3L),obe(0x709f7b7aL),obe(0x745e66cdL),

80 
tobe
(0x9823b6e0L),obe(0x9ce2ab57L),obe(0x91a18d8eL),obe(0x95609039L),

81 
tobe
(0x8b27c03cL),obe(0x8fe6dd8bL),obe(0x82a5fb52L),obe(0x8664e6e5L),

82 
tobe
(0xbe2b5b58L),obe(0xbaea46efL),obe(0xb7a96036L),obe(0xb3687d81L),

83 
tobe
(0xad2f2d84L),obe(0xa9ee3033L),obe(0xa4ad16eaL),obe(0xa06c0b5dL),

84 
tobe
(0xd4326d90L),obe(0xd0f37027L),obe(0xddb056feL),obe(0xd9714b49L),

85 
tobe
(0xc7361b4cL),obe(0xc3f706fbL),obe(0xceb42022L),obe(0xca753d95L),

86 
tobe
(0xf23a8028L),obe(0xf6fb9d9fL),obe(0xfbb8bb46L),obe(0xff79a6f1L),

87 
tobe
(0xe13ef6f4L),obe(0xe5ffeb43L),obe(0xe8bccd9aL),obe(0xec7dd02dL),

88 
tobe
(0x34867077L),obe(0x30476dc0L),obe(0x3d044b19L),obe(0x39c556aeL),

89 
tobe
(0x278206abL),obe(0x23431b1cL),obe(0x2e003dc5L),obe(0x2ac12072L),

90 
tobe
(0x128e9dcfL),obe(0x164f8078L),obe(0x1b0ca6a1L),obe(0x1fcdbb16L),

91 
tobe
(0x018aeb13L),obe(0x054bf6a4L),obe(0x0808d07dL),obe(0x0cc9cdcaL),

92 
tobe
(0x7897ab07L),obe(0x7c56b6b0L),obe(0x71159069L),obe(0x75d48ddeL),

93 
tobe
(0x6b93dddbL),obe(0x6f52c06cL),obe(0x6211e6b5L),obe(0x66d0fb02L),

94 
tobe
(0x5e9f46bfL),obe(0x5a5e5b08L),obe(0x571d7dd1L),obe(0x53dc6066L),

95 
tobe
(0x4d9b3063L),obe(0x495a2dd4L),obe(0x44190b0dL),obe(0x40d816baL),

96 
tobe
(0xaca5c697L),obe(0xa864db20L),obe(0xa527fdf9L),obe(0xa1e6e04eL),

97 
tobe
(0xbfa1b04bL),obe(0xbb60adfcL),obe(0xb6238b25L),obe(0xb2e29692L),

98 
tobe
(0x8aad2b2fL),obe(0x8e6c3698L),obe(0x832f1041L),obe(0x87ee0df6L),

99 
tobe
(0x99a95df3L),obe(0x9d684044L),obe(0x902b669dL),obe(0x94ea7b2aL),

100 
tobe
(0xe0b41de7L),obe(0xe4750050L),obe(0xe9362689L),obe(0xedf73b3eL),

101 
tobe
(0xf3b06b3bL),obe(0xf771768cL),obe(0xfa325055L),obe(0xfef34de2L),

102 
tobe
(0xc6bcf05fL),obe(0xc27dede8L),obe(0xcf3ecb31L),obe(0xcbffd686L),

103 
tobe
(0xd5b88683L),obe(0xd1799b34L),obe(0xdc3abdedL),obe(0xd8fba05aL),

104 
tobe
(0x690ce0eeL),obe(0x6dcdfd59L),obe(0x608edb80L),obe(0x644fc637L),

105 
tobe
(0x7a089632L),obe(0x7ec98b85L),obe(0x738aad5cL),obe(0x774bb0ebL),

106 
tobe
(0x4f040d56L),obe(0x4bc510e1L),obe(0x46863638L),obe(0x42472b8fL),

107 
tobe
(0x5c007b8aL),obe(0x58c1663dL),obe(0x558240e4L),obe(0x51435d53L),

108 
tobe
(0x251d3b9eL),obe(0x21dc2629L),obe(0x2c9f00f0L),obe(0x285e1d47L),

109 
tobe
(0x36194d42L),obe(0x32d850f5L),obe(0x3f9b762cL),obe(0x3b5a6b9bL),

110 
tobe
(0x0315d626L),obe(0x07d4cb91L),obe(0x0a97ed48L),obe(0x0e56f0ffL),

111 
tobe
(0x1011a0faL),obe(0x14d0bd4dL),obe(0x19939b94L),obe(0x1d528623L),

112 
tobe
(0xf12f560eL),obe(0xf5ee4bb9L),obe(0xf8ad6d60L),obe(0xfc6c70d7L),

113 
tobe
(0xe22b20d2L),obe(0xe6ea3d65L),obe(0xeba91bbcL),obe(0xef68060bL),

114 
tobe
(0xd727bbb6L),obe(0xd3e6a601L),obe(0xdea580d8L),obe(0xda649d6fL),

115 
tobe
(0xc423cd6aL),obe(0xc0e2d0ddL),obe(0xcda1f604L),obe(0xc960ebb3L),

116 
tobe
(0xbd3e8d7eL),obe(0xb9ff90c9L),obe(0xb4bcb610L),obe(0xb07daba7L),

117 
tobe
(0xae3afba2L),obe(0xaafbe615L),obe(0xa7b8c0ccL),obe(0xa379dd7bL),

118 
tobe
(0x9b3660c6L),obe(0x9ff77d71L),obe(0x92b45ba8L),obe(0x9675461fL),

119 
tobe
(0x8832161aL),obe(0x8cf30badL),obe(0x81b02d74L),obe(0x857130c3L),

120 
tobe
(0x5d8a9099L),obe(0x594b8d2eL),obe(0x5408abf7L),obe(0x50c9b640L),

121 
tobe
(0x4e8ee645L),obe(0x4a4ffbf2L),obe(0x470cdd2bL),obe(0x43cdc09cL),

122 
tobe
(0x7b827d21L),obe(0x7f436096L),obe(0x7200464fL),obe(0x76c15bf8L),

123 
tobe
(0x68860bfdL),obe(0x6c47164aL),obe(0x61043093L),obe(0x65c52d24L),

124 
tobe
(0x119b4be9L),obe(0x155a565eL),obe(0x18197087L),obe(0x1cd86d30L),

125 
tobe
(0x029f3d35L),obe(0x065e2082L),obe(0x0b1d065bL),obe(0x0fdc1becL),

126 
tobe
(0x3793a651L),obe(0x3352bbe6L),obe(0x3e119d3fL),obe(0x3ad08088L),

127 
tobe
(0x2497d08dL),obe(0x2056cd3aL),obe(0x2d15ebe3L),obe(0x29d4f654L),

128 
tobe
(0xc5a92679L),obe(0xc1683bceL),obe(0xcc2b1d17L),obe(0xc8ea00a0L),

129 
tobe
(0xd6ad50a5L),obe(0xd26c4d12L),obe(0xdf2f6bcbL),obe(0xdbee767cL),

130 
tobe
(0xe3a1cbc1L),obe(0xe760d676L),obe(0xea23f0afL),obe(0xeee2ed18L),

131 
tobe
(0xf0a5bd1dL),obe(0xf464a0aaL),obe(0xf9278673L),obe(0xfde69bc4L),

132 
tobe
(0x89b8fd09L),obe(0x8d79e0beL),obe(0x803ac667L),obe(0x84fbdbd0L),

133 
tobe
(0x9abc8bd5L),obe(0x9e7d9662L),obe(0x933eb0bbL),obe(0x97ffad0cL),

134 
tobe
(0xafb010b1L),obe(0xab710d06L),obe(0xa6322bdfL),obe(0xa2f33668L),

135 
tobe
(0xbcb4666dL),obe(0xb8757bdaL),obe(0xb5365d03L),obe(0xb1f740b4L)

	@libe2fsck/dict.h

21 #iâdeà
DICT_H


22 
	#DICT_H


	)

24 
	~<lim™s.h
>

25 #ifdeà
KAZLIB_SIDEEFFECT_DEBUG


26 
	~"sfx.h
"

33 #ifdeà
__ılu¥lus


37 
	tdiùcouÁ_t
;

38 
	#DICTCOUNT_T_MAX
 
ULONG_MAX


	)

44 ’um { 
dnode_»d
, 
dnode_bÏck
 } 
	tdnode_cŞÜ_t
;

46 
	sdnode_t
 {

47 #ià
defšed
(
DICT_IMPLEMENTATION
è|| !defšed(
KAZLIB_OPAQUE_DEBUG
)

48 
dnode_t
 *
diù_Ëá
;

49 
dnode_t
 *
diù_right
;

50 
dnode_t
 *
diù_·»Á
;

51 
dnode_cŞÜ_t
 
diù_cŞÜ
;

52 cÚ¡ *
diù_key
;

53 *
diù_d©a
;

55 
diù_dummy
;

57 } 
	tdnode_t
;

59 (*
diù_comp_t
)(const *, const *);

60 
dnode_t
 *(*
	tdnode_®loc_t
)(*);

61 (*
dnode_ä“_t
)(
	tdnode_t
 *, *);

63 
	sdiù_t
 {

64 #ià
defšed
(
DICT_IMPLEMENTATION
è|| !defšed(
KAZLIB_OPAQUE_DEBUG
)

65 
dnode_t
 
diù_nnode
;

66 
diùcouÁ_t
 
diù_nodecouÁ
;

67 
diùcouÁ_t
 
diù_maxcouÁ
;

68 
diù_comp_t
 
diù_com·»
;

69 
dnode_®loc_t
 
diù_®loúode
;

70 
dnode_ä“_t
 
diù_ä“node
;

71 *
diù_cÚ‹xt
;

72 
diù_du³s
;

74 
diù_dummmy
;

76 } 
	tdiù_t
;

78 (*
dnode_´oûss_t
)(
	tdiù_t
 *, 
	tdnode_t
 *, *);

80 
	sdiù_lßd_t
 {

81 #ià
defšed
(
DICT_IMPLEMENTATION
è|| !defšed(
KAZLIB_OPAQUE_DEBUG
)

82 
diù_t
 *
diù_diù±r
;

83 
dnode_t
 
diù_nnode
;

85 
diù_dummmy
;

87 } 
	tdiù_lßd_t
;

89 
diù_t
 *
diù_ü—‹
(
diùcouÁ_t
, 
diù_comp_t
);

90 
diù_£t_®loÿtÜ
(
diù_t
 *, 
dnode_®loc_t
, 
dnode_ä“_t
, *);

91 
diù_de¡roy
(
diù_t
 *);

92 
diù_ä“_nodes
(
diù_t
 *);

93 
diù_ä“
(
diù_t
 *);

94 
diù_t
 *
diù_š™
(diù_ˆ*, 
diùcouÁ_t
, 
diù_comp_t
);

95 
diù_š™_like
(
diù_t
 *, const dict_t *);

96 
diù_v”ify
(
diù_t
 *);

97 
diù_sim¬
(cÚ¡ 
diù_t
 *, const dict_t *);

98 
dnode_t
 *
diù_lookup
(
diù_t
 *, const *);

99 
dnode_t
 *
diù_low”_bound
(
diù_t
 *, const *);

100 
dnode_t
 *
diù_uµ”_bound
(
diù_t
 *, const *);

101 
diù_š£¹
(
diù_t
 *, 
dnode_t
 *, const *);

102 
dnode_t
 *
diù_d–‘e
(
diù_t
 *, dnode_t *);

103 
diù_®loc_š£¹
(
diù_t
 *, const *, *);

104 
diù_d–‘e_ä“
(
diù_t
 *, 
dnode_t
 *);

105 
dnode_t
 *
diù_fœ¡
(
diù_t
 *);

106 
dnode_t
 *
diù_Ï¡
(
diù_t
 *);

107 
dnode_t
 *
diù_Ãxt
(
diù_t
 *, dnode_t *);

108 
dnode_t
 *
diù_´ev
(
diù_t
 *, dnode_t *);

109 
diùcouÁ_t
 
diù_couÁ
(
diù_t
 *);

110 
diù_i£m±y
(
diù_t
 *);

111 
diù_isfuÎ
(
diù_t
 *);

112 
diù_cÚšs
(
diù_t
 *, 
dnode_t
 *);

113 
diù_®low_du³s
(
diù_t
 *);

114 
dnode_is_š_a_diù
(
dnode_t
 *);

115 
dnode_t
 *
dnode_ü—‹
(*);

116 
dnode_t
 *
dnode_š™
(dnode_t *, *);

117 
dnode_de¡roy
(
dnode_t
 *);

118 *
dnode_g‘
(
dnode_t
 *);

119 cÚ¡ *
dnode_g‘key
(
dnode_t
 *);

120 
dnode_put
(
dnode_t
 *, *);

121 
diù_´oûss
(
diù_t
 *, *, 
dnode_´oûss_t
);

122 
diù_lßd_begš
(
diù_lßd_t
 *, 
diù_t
 *);

123 
diù_lßd_Ãxt
(
diù_lßd_t
 *, 
dnode_t
 *, const *);

124 
diù_lßd_’d
(
diù_lßd_t
 *);

125 
diù_m”ge
(
diù_t
 *, dict_t *);

127 #ià
defšed
(
DICT_IMPLEMENTATION
è|| !defšed(
KAZLIB_OPAQUE_DEBUG
)

128 #ifdeà
KAZLIB_SIDEEFFECT_DEBUG


129 
	#diù_isfuÎ
(
D
è(
	`SFX_CHECK
(D)->
diù_nodecouÁ
 =ğ(D)->
diù_maxcouÁ
)

	)

131 
	#diù_isfuÎ
(
D
è((D)->
diù_nodecouÁ
 =ğ(D)->
diù_maxcouÁ
)

	)

133 
	#diù_couÁ
(
D
è((D)->
diù_nodecouÁ
)

	)

134 
	#diù_i£m±y
(
D
è((D)->
diù_nodecouÁ
 =ğ0)

	)

135 
	#dnode_g‘
(
N
è((N)->
diù_d©a
)

	)

136 
	#dnode_g‘key
(
N
è((N)->
diù_key
)

	)

137 
	#dnode_put
(
N
, 
X
è((N)->
diù_d©a
 = (X))

	)

140 #ifdeà
__ılu¥lus


	@libe2fsck/e2fsck.h

9 #iâdeà
_E2FSCK_H


10 
	#_E2FSCK_H


	)

12 
	~<¡dio.h
>

13 
	~<¡ršg.h
>

14 
	~<uni¡d.h
>

15 
	~<¡dlib.h
>

16 
	~<time.h
>

17 
	~<sys/ty³s.h
>

18 
	~<sys/time.h
>

19 
	~<£tjmp.h
>

21 
	~"ext2fs/ext2_fs.h
"

22 
	~"ext2fs/ext2fs.h
"

23 
	~"blkid/blkid.h
"

25 
	~"´ofe.h
"

26 
	~"´of_”r.h
"

27 
	~"e2fsck_lib.h
"

29 #ifdeà
ENABLE_NLS


30 
	~<libš.h
>

31 
	~<loÿË.h
>

32 
	#_
(
a
è(
	`g‘‹xt
 (a))

	)

33 #ifdeà
g‘‹xt_noİ


34 
	#N_
(
a
è
	`g‘‹xt_noİ
 (a)

	)

36 
	#N_
(
a
è×)

	)

38 
	#P_
(
sšguÏr
, 
¶u¿l
, 
n
è(
	`ng‘‹xt
 (sšguÏr,…lu¿l,‚))

	)

39 #iâdeà
NLS_CAT_NAME


40 
	#NLS_CAT_NAME
 "e2f¥rogs"

	)

42 #iâdeà
LOCALEDIR


43 
	#LOCALEDIR
 "/u¤/sh¬e/loÿË"

	)

46 
	#_
(
a
è×)

	)

47 
	#N_
(
a
è
	)
a

48 
	#P_
(
sšguÏr
, 
¶u¿l
, 
n
è(Òè=ğ1 ? (sšguÏrè: (¶u¿l))

	)

51 #ifdeà
__GNUC__


52 
	#E2FSCK_ATTR
(
x
è
	`__©Œibu‹__
(x)

	)

54 
	#E2FSCK_ATTR
(
x
)

	)

62 
	#FSCK_OK
 0

	)

63 
	#FSCK_NONDESTRUCT
 1

	)

64 
	#FSCK_REBOOT
 2

	)

65 
	#FSCK_UNCORRECTED
 4

	)

66 
	#FSCK_ERROR
 8

	)

67 
	#FSCK_USAGE
 16

	)

68 
	#FSCK_CANCELED
 32

	)

69 
	#FSCK_LIBRARY
 128

	)

75 
	#E2FSCK_CURRENT_REV
 1

	)

82 
	sdœ_šfo
 {

83 
ext2_šo_t
 
	mšo
;

84 
ext2_šo_t
 
	mdÙdÙ
;

85 
ext2_šo_t
 
	m·»Á
;

93 
	sdx_dœ_šfo
 {

94 
ext2_šo_t
 
	mšo
;

95 
	mnumblocks
;

96 
	mhashv”siÚ
;

97 
	md•th
;

98 
dx_dœblock_šfo
 *
	mdx_block
;

101 
	#DX_DIRBLOCK_ROOT
 1

	)

102 
	#DX_DIRBLOCK_LEAF
 2

	)

103 
	#DX_DIRBLOCK_NODE
 3

	)

104 
	#DX_DIRBLOCK_CORRUPT
 4

	)

105 
	#DX_DIRBLOCK_CLEARED
 8

	)

107 
	sdx_dœblock_šfo
 {

108 
	mty³
;

109 
blk64_t
 
	mphys
;

110 
	mæags
;

111 
blk64_t
 
	m·»Á
;

112 
ext2_dœhash_t
 
	mmš_hash
;

113 
ext2_dœhash_t
 
	mmax_hash
;

114 
ext2_dœhash_t
 
	mnode_mš_hash
;

115 
ext2_dœhash_t
 
	mnode_max_hash
;

118 
	#DX_FLAG_REFERENCED
 1

	)

119 
	#DX_FLAG_DUP_REF
 2

	)

120 
	#DX_FLAG_FIRST
 4

	)

121 
	#DX_FLAG_LAST
 8

	)

123 
	#RESOURCE_TRACK


	)

125 #ifdeà
RESOURCE_TRACK


130 
	s»sourû_Œack
 {

131 
timev®
 
	mtime_¡¬t
;

132 
timev®
 
	mu£r_¡¬t
;

133 
timev®
 
	msy¡em_¡¬t
;

134 *
	mbrk_¡¬t
;

135 
	mby‹s_»ad
;

136 
	mby‹s_wr™‹n
;

143 
	#E2F_OPT_READONLY
 0x0001

	)

144 
	#E2F_OPT_PREEN
 0x0002

	)

145 
	#E2F_OPT_YES
 0x0004

	)

146 
	#E2F_OPT_NO
 0x0008

	)

147 
	#E2F_OPT_TIME
 0x0010

	)

148 
	#E2F_OPT_TIME2
 0x0020

	)

149 
	#E2F_OPT_CHECKBLOCKS
 0x0040

	)

150 
	#E2F_OPT_DEBUG
 0x0080

	)

151 
	#E2F_OPT_FORCE
 0x0100

	)

152 
	#E2F_OPT_WRITECHECK
 0x0200

	)

153 
	#E2F_OPT_COMPRESS_DIRS
 0x0400

	)

154 
	#E2F_OPT_FRAGCHECK
 0x0800

	)

155 
	#E2F_OPT_JOURNAL_ONLY
 0x1000

	)

156 
	#E2F_OPT_DISCARD
 0x2000

	)

161 
	#E2F_FLAG_ABORT
 0x0001

	)

162 
	#E2F_FLAG_CANCEL
 0x0002

	)

163 
	#E2F_FLAG_SIGNAL_MASK
 0x0003

	)

164 
	#E2F_FLAG_RESTART
 0x0004

	)

165 
	#E2F_FLAG_RESTART_LATER
 0x0008

	)

167 
	#E2F_FLAG_SETJMP_OK
 0x0010

	)

169 
	#E2F_FLAG_PROG_BAR
 0x0020

	)

170 
	#E2F_FLAG_PROG_SUPPRESS
 0x0040

	)

171 
	#E2F_FLAG_JOURNAL_INODE
 0x0080

	)

172 
	#E2F_FLAG_SB_SPECIFIED
 0x0100

	)

174 
	#E2F_FLAG_RESTARTED
 0x0200

	)

175 
	#E2F_FLAG_RESIZE_INODE
 0x0400

	)

176 
	#E2F_FLAG_GOT_DEVSIZE
 0x0800

	)

177 
	#E2F_FLAG_EXITING
 0x1000

	)

178 
	#E2F_FLAG_TIME_INSANE
 0x2000

	)

179 
	#E2F_FLAG_PROBLEMS_FIXED
 0x4000

	)

181 
	#E2F_RESET_FLAGS
 (
E2F_FLAG_TIME_INSANE
 | 
E2F_FLAG_PROBLEMS_FIXED
)

	)

186 
	#E2F_PASS_1
 1

	)

187 
	#E2F_PASS_2
 2

	)

188 
	#E2F_PASS_3
 3

	)

189 
	#E2F_PASS_4
 4

	)

190 
	#E2F_PASS_5
 5

	)

191 
	#E2F_PASS_1B
 6

	)

196 
—_»fcouÁ
 *
	text2_»fcouÁ_t
;

201 
e2fsck_¡ruù
 *
	te2fsck_t
;

203 
	#MAX_EXTENT_DEPTH_COUNT
 5

	)

205 
	se2fsck_¡ruù
 {

206 
ext2_fsys
 
	mfs
;

207 cÚ¡ *
	m´og¿m_Çme
;

208 *
	mfesy¡em_Çme
;

209 *
	mdeviû_Çme
;

210 *
	mio_İtiÚs
;

211 
FILE
 *
	mlogf
;

212 *
	mlog_â
;

213 
	mæags
;

214 
	mİtiÚs
;

215 
	mblocksize
;

216 
blk64_t
 
	mu£_su³rblock
;

217 
blk64_t
 
	msu³rblock
;

218 
blk64_t
 
	mnum_blocks
;

219 
blk64_t
 
	mä“_blocks
;

220 
šo_t
 
	mä“_šodes
;

221 
	mmouÁ_æags
;

222 
	mİ’fs_æags
;

223 
blkid_ÿche
 
	mblkid
;

225 
jmp_buf
 
	mabÜt_loc
;

226 
	mabÜt_code
;

228 (*
	m´og»ss
)(
e2fsck_t
 
	mùx
, 
	m·ss
, 
	mcur
,

229 
	mmax
);

231 
ext2fs_šode_b™m­
 
	mšode_u£d_m­
;

232 
ext2fs_šode_b™m­
 
	mšode_bad_m­
;

233 
ext2fs_šode_b™m­
 
	mšode_dœ_m­
;

234 
ext2fs_šode_b™m­
 
	mšode_bb_m­
;

235 
ext2fs_šode_b™m­
 
	mšode_imagic_m­
;

236 
ext2fs_šode_b™m­
 
	mšode_»g_m­
;

238 
ext2fs_block_b™m­
 
	mblock_found_m­
;

239 
ext2fs_block_b™m­
 
	mblock_dup_m­
;

240 
ext2fs_block_b™m­
 
	mblock_—_m­
;

245 
ext2_icouÁ_t
 
	mšode_couÁ
;

246 
ext2_icouÁ_t
 
	mšode_lšk_šfo
;

248 
ext2_»fcouÁ_t
 
	m»fcouÁ
;

249 
ext2_»fcouÁ_t
 
	m»fcouÁ_exŒa
;

255 *
	mšv®id_šode_b™m­_æag
;

256 *
	mšv®id_block_b™m­_æag
;

257 *
	mšv®id_šode_bË_æag
;

258 
	mšv®id_b™m­s
;

263 *
	mblock_buf
;

268 
ext2_šo_t
 
	m¡ashed_šo
;

269 
ext2_šode
 *
	m¡ashed_šode
;

274 
ext2_šo_t
 
	mlo¡_ªd_found
;

275 
	mbad_lo¡_ªd_found
;

280 
dœ_šfo_db
 *
	mdœ_šfo
;

285 
	mdx_dœ_šfo_couÁ
;

286 
	mdx_dœ_šfo_size
;

287 
dx_dœ_šfo
 *
	mdx_dœ_šfo
;

292 
ext2_u32_li¡
 
	mdœs_to_hash
;

297 
	m´oûss_šode_size
;

298 
	mšode_bufãr_blocks
;

299 
	mhŒ“_¦ack_³rûÁage
;

304 
io_chªÃl
 
	mjouº®_io
;

305 *
	mjouº®_Çme
;

311 #ifdeà
RESOURCE_TRACK


315 
»sourû_Œack
 
	mglob®_¹¿ck
;

321 
	m´og»ss_fd
;

322 
	m´og»ss_pos
;

323 
	m´og»ss_Ï¡_³rûÁ
;

324 
	m´og»ss_Ï¡_time
;

325 
	mš‹¿ùive
;

326 
	m¡¬t_m‘a
[2], 
	m¡İ_m‘a
[2];

329 
__u32
 
	mfs_dœeùÜy_couÁ
;

330 
__u32
 
	mfs_»guÏr_couÁ
;

331 
__u32
 
	mfs_blockdev_couÁ
;

332 
__u32
 
	mfs_ch¬dev_couÁ
;

333 
__u32
 
	mfs_lšks_couÁ
;

334 
__u32
 
	mfs_symlšks_couÁ
;

335 
__u32
 
	mfs_ç¡_symlšks_couÁ
;

336 
__u32
 
	mfs_fifo_couÁ
;

337 
__u32
 
	mfs_tÙ®_couÁ
;

338 
__u32
 
	mfs_badblocks_couÁ
;

339 
__u32
 
	mfs_sock‘s_couÁ
;

340 
__u32
 
	mfs_šd_couÁ
;

341 
__u32
 
	mfs_dšd_couÁ
;

342 
__u32
 
	mfs_tšd_couÁ
;

343 
__u32
 
	mfs_äagm’‹d
;

344 
__u32
 
	mfs_äagm’‹d_dœ
;

345 
__u32
 
	mÏrge_fes
;

346 
__u32
 
	mfs_ext_©Œ_šodes
;

347 
__u32
 
	mfs_ext_©Œ_blocks
;

348 
__u32
 
	mex‹Á_d•th_couÁ
[
MAX_EXTENT_DEPTH_COUNT
];

351 
time_t
 
	mnow
;

352 
time_t
 
	mtime_fudge
;

353 
	mext_©Œ_v”
;

354 
´ofe_t
 
	m´ofe
;

355 
	mblocks_³r_·ge
;

358 
blk64_t
 
	mroÙ_»·œ_block
, 
	mÊf_»·œ_block
;

364 *
	m´iv_d©a
;

365 
e2fsck_hªdË
 *
	mhªdË
;

369 
__u32
 
	t»giÚ_addr_t
;

370 
»giÚ_¡ruù
 *
	t»giÚ_t
;

372 #iâdeà
HAVE_STRNLEN


373 
	#¡ºËn
(
¡r
, 
x
è
	`e2fsck_¡ºËn
((¡r),(x))

	)

374 
e2fsck_¡ºËn
(cÚ¡ * 
s
, 
couÁ
);

381 
e2fsck_·ss1
(
e2fsck_t
 
ùx
);

382 
e2fsck_·ss1_dupblocks
(
e2fsck_t
 
ùx
, *
block_buf
);

383 
e2fsck_·ss2
(
e2fsck_t
 
ùx
);

384 
e2fsck_·ss3
(
e2fsck_t
 
ùx
);

385 
e2fsck_·ss4
(
e2fsck_t
 
ùx
);

386 
e2fsck_·ss5
(
e2fsck_t
 
ùx
);

389 
”rcode_t
 
e2fsck_®loÿ‹_cÚ‹xt
(
e2fsck_t
 *
»t
);

390 
”rcode_t
 
e2fsck_»£t_cÚ‹xt
(
e2fsck_t
 
ùx
);

391 
e2fsck_ä“_cÚ‹xt
(
e2fsck_t
 
ùx
);

392 
e2fsck_run
(
e2fsck_t
 
ùx
);

396 
»ad_bad_blocks_fe
(
e2fsck_t
 
ùx
, cÚ¡ *
bad_blocks_fe
,

397 
»¶aû_bad_blocks
);

400 
__u32
 
üc32_be
(__u32 
üc
, cÚ¡ *
p
, 
size_t
 
Ën
);

403 
e2fsck_add_dœ_šfo
(
e2fsck_t
 
ùx
, 
ext2_šo_t
 
šo
,ƒxt2_šo_ˆ
·»Á
);

404 
e2fsck_ä“_dœ_šfo
(
e2fsck_t
 
ùx
);

405 
e2fsck_g‘_num_dœšfo
(
e2fsck_t
 
ùx
);

406 
dœ_šfo_™”
 *
e2fsck_dœ_šfo_™”_begš
(
e2fsck_t
 
ùx
);

407 
dœ_šfo
 *
e2fsck_dœ_šfo_™”
(
e2fsck_t
 
ùx
,

408 
dœ_šfo_™”
 *);

409 
e2fsck_dœ_šfo_™”_’d
(
e2fsck_t
 
ùx
, 
dœ_šfo_™”
 *);

410 
e2fsck_dœ_šfo_£t_·»Á
(
e2fsck_t
 
ùx
, 
ext2_šo_t
 
šo
,

411 
ext2_šo_t
 
·»Á
);

412 
e2fsck_dœ_šfo_£t_dÙdÙ
(
e2fsck_t
 
ùx
, 
ext2_šo_t
 
šo
,

413 
ext2_šo_t
 
dÙdÙ
);

414 
e2fsck_dœ_šfo_g‘_·»Á
(
e2fsck_t
 
ùx
, 
ext2_šo_t
 
šo
,

415 
ext2_šo_t
 *
·»Á
);

416 
e2fsck_dœ_šfo_g‘_dÙdÙ
(
e2fsck_t
 
ùx
, 
ext2_šo_t
 
šo
,

417 
ext2_šo_t
 *
dÙdÙ
);

420 
e2fsck_add_dx_dœ
(
e2fsck_t
 
ùx
, 
ext2_šo_t
 
šo
, 
num_blocks
);

421 
dx_dœ_šfo
 *
e2fsck_g‘_dx_dœ_šfo
(
e2fsck_t
 
ùx
, 
ext2_šo_t
 
šo
);

422 
e2fsck_ä“_dx_dœ_šfo
(
e2fsck_t
 
ùx
);

423 
e2fsck_g‘_num_dx_dœšfo
(
e2fsck_t
 
ùx
);

424 
dx_dœ_šfo
 *
e2fsck_dx_dœ_šfo_™”
(
e2fsck_t
 
ùx
, *
cÚŒŞ
);

427 
”rcode_t
 
—_»fcouÁ_ü—‹
(
size
, 
ext2_»fcouÁ_t
 *
»t
);

428 
—_»fcouÁ_ä“
(
ext2_»fcouÁ_t
 
»fcouÁ
);

429 
”rcode_t
 
—_»fcouÁ_ãtch
(
ext2_»fcouÁ_t
 
»fcouÁ
, 
blk64_t
 
blk
, *
»t
);

430 
”rcode_t
 
—_»fcouÁ_šüem’t
(
ext2_»fcouÁ_t
 
»fcouÁ
,

431 
blk64_t
 
blk
, *
»t
);

432 
”rcode_t
 
—_»fcouÁ_deüem’t
(
ext2_»fcouÁ_t
 
»fcouÁ
,

433 
blk64_t
 
blk
, *
»t
);

434 
”rcode_t
 
—_»fcouÁ_¡Üe
(
ext2_»fcouÁ_t
 
»fcouÁ
,

435 
blk64_t
 
blk
, 
couÁ
);

436 
blk_t
 
ext2fs_g‘_»fcouÁ_size
(
ext2_»fcouÁ_t
 
»fcouÁ
);

437 
—_»fcouÁ_šŒ_begš
(
ext2_»fcouÁ_t
 
»fcouÁ
);

438 
blk64_t
 
—_»fcouÁ_šŒ_Ãxt
(
ext2_»fcouÁ_t
 
»fcouÁ
, *
»t
);

441 cÚ¡ *
ehªdËr_İ”©iÚ
(cÚ¡ *
İ
);

442 
ehªdËr_š™
(
io_chªÃl
 
chªÃl
);

445 
”rcode_t
 
e2fsck_check_ext3_jouº®
(
e2fsck_t
 
ùx
);

446 
”rcode_t
 
e2fsck_run_ext3_jouº®
(
e2fsck_t
 
ùx
);

447 
e2fsck_move_ext3_jouº®
(
e2fsck_t
 
ùx
);

448 
e2fsck_fix_ext3_jouº®_hšt
(
e2fsck_t
 
ùx
);

451 
£t_up_loggšg
(
e2fsck_t
 
ùx
);

457 
e2fsck_£tup_tdb_icouÁ
(
e2fsck_t
 
ùx
, 
æags
,

458 
ext2_icouÁ_t
 *
»t
);

459 
e2fsck_u£_šode_shÜtcuts
(
e2fsck_t
 
ùx
, 
u£_shÜtcuts
);

460 
e2fsck_·ss1_check_deviû_šode
(
ext2_fsys
 
fs
,

461 
ext2_šode
 *
šode
);

462 
e2fsck_·ss1_check_symlšk
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

463 
ext2_šode
 *
šode
, *
buf
);

464 
e2fsck_ş—r_šode
(
e2fsck_t
 
ùx
, 
ext2_šo_t
 
šo
,

465 
ext2_šode
 *
šode
, 
»¡¬t_æag
,

466 cÚ¡ *
sourû
);

467 
e2fsck_š‹rû±_block_®loÿtiÚs
(
e2fsck_t
 
ùx
);

470 
e2fsck_´oûss_bad_šode
(
e2fsck_t
 
ùx
, 
ext2_šo_t
 
dœ
,

471 
ext2_šo_t
 
šo
, *
buf
);

474 
e2fsck_»cÚÃù_fe
(
e2fsck_t
 
ùx
, 
ext2_šo_t
 
šode
);

475 
”rcode_t
 
e2fsck_ex·nd_dœeùÜy
(
e2fsck_t
 
ùx
, 
ext2_šo_t
 
dœ
,

476 
num
, 
gau¿Á“d_size
);

477 
ext2_šo_t
 
e2fsck_g‘_lo¡_ªd_found
(
e2fsck_t
 
ùx
, 
fix
);

478 
”rcode_t
 
e2fsck_adju¡_šode_couÁ
(
e2fsck_t
 
ùx
, 
ext2_šo_t
 
šo
,

479 
adj
);

483 
»giÚ_t
 
»giÚ_ü—‹
(
»giÚ_addr_t
 
mš
,„egiÚ_addr_ˆ
max
);

484 
»giÚ_ä“
(
»giÚ_t
 
»giÚ
);

485 
»giÚ_®loÿ‹
(
»giÚ_t
 
»giÚ
, 
»giÚ_addr_t
 
¡¬t
, 
n
);

488 
”rcode_t
 
e2fsck_»hash_dœ
(
e2fsck_t
 
ùx
, 
ext2_šo_t
 
šo
);

489 
e2fsck_»hash_dœeùÜ›s
(
e2fsck_t
 
ùx
);

492 
sigÿtch”_£tup
();

495 
check_su³r_block
(
e2fsck_t
 
ùx
);

496 
check_backup_su³r_block
(
e2fsck_t
 
ùx
);

497 
check_»size_šode
(
e2fsck_t
 
ùx
);

500 *
e2fsck_®loÿ‹_memÜy
(
e2fsck_t
 
ùx
, 
size
,

501 cÚ¡ *
desütiÚ
);

502 
ask
(
e2fsck_t
 
ùx
, cÚ¡ * 
¡ršg
, 
def
);

503 
ask_yn
(
e2fsck_t
 
ùx
, cÚ¡ * 
¡ršg
, 
def
);

504 
çl_”rÜ
(
e2fsck_t
 
ùx
, cÚ¡ * 
fmt_¡ršg
);

505 
	$log_out
(
e2fsck_t
 
ùx
, cÚ¡ *
fmt
, ...)

506 
	`E2FSCK_ATTR
((
	`fÜm©
(
´štf
, 2, 3)));

507 
	$log_”r
(
e2fsck_t
 
ùx
, cÚ¡ *
fmt
, ...)

508 
	`E2FSCK_ATTR
((
	`fÜm©
(
´štf
, 2, 3)));

509 
	`e2fsck_»ad_b™m­s
(
e2fsck_t
 
ùx
);

510 
	`e2fsck_wr™e_b™m­s
(
e2fsck_t
 
ùx
);

511 
	`´“nh®t
(
e2fsck_t
 
ùx
);

512 *
	`¡ršg_cİy
(
e2fsck_t
 
ùx
, cÚ¡ *
¡r
, 
Ën
);

513 
”rcode_t
 
	`e2fsck_z”o_blocks
(
ext2_fsys
 
fs
, 
blk_t
 
blk
, 
num
,

514 
blk_t
 *
»t_blk
, *
»t_couÁ
);

515 
	`fs_´oc_check
(cÚ¡ *
fs_Çme
);

516 
	`check_fÜ_moduËs
(cÚ¡ *
fs_Çme
);

517 #ifdeà
RESOURCE_TRACK


518 
	`´št_»sourû_Œack
(
e2fsck_t
 
ùx
,

519 cÚ¡ *
desc
,

520 
»sourû_Œack
 *
Œack
,

521 
io_chªÃl
 
chªÃl
);

522 
	`š™_»sourû_Œack
(
»sourû_Œack
 *
Œack
,

523 
io_chªÃl
 
chªÃl
);

525 
	#´št_»sourû_Œack
(
ùx
, 
desc
, 
Œack
, 
chªÃl
èdØ{ 
	}
} 0)

	)

526 
	#š™_»sourû_Œack
(
Œack
, 
chªÃl
èdØ{ } 0)

	)

528 
šode_has_v®id_blocks
(
ext2_šode
 *
šode
);

529 
e2fsck_»ad_šode
(
e2fsck_t
 
ùx
, 
šo
,

530 
ext2_šode
 * 
šode
, cÚ¡ * 
´oc
);

531 
e2fsck_»ad_šode_fuÎ
(
e2fsck_t
 
ùx
, 
šo
,

532 
ext2_šode
 *
šode
,

533 cÚ¡ 
bufsize
, cÚ¡ *
´oc
);

534 
e2fsck_wr™e_šode
(
e2fsck_t
 
ùx
, 
šo
,

535 
ext2_šode
 * 
šode
, cÚ¡ * 
´oc
);

536 
e2fsck_wr™e_šode_fuÎ
(
e2fsck_t
 
ùx
, 
šo
,

537 
ext2_šode
 * 
šode
, 
bufsize
,

538 cÚ¡ *
´oc
);

539 #ifdeà
MTRACE


540 
mŒaû_´št
(*
mesg
);

542 
blk64_t
 
g‘_backup_sb
(
e2fsck_t
 
ùx
, 
ext2_fsys
 
fs
,

543 cÚ¡ *
Çme
, 
io_mªag”
 
mªag”
);

544 
ext2_fe_ty³
(
mode
);

545 
wr™e_®l
(
fd
, *
buf
, 
size_t
 
couÁ
);

546 
dump_mmp_msg
(
mmp_¡ruù
 *
mmp
, cÚ¡ *
msg
);

547 
”rcode_t
 
e2fsck_mmp_upd©e
(
ext2_fsys
 
fs
);

549 
e2fsck_£t_b™m­_ty³
(
ext2_fsys
 
fs
,

550 
deçuÉ_ty³
,

551 cÚ¡ *
´ofe_Çme
,

552 *
Şd_ty³
);

553 
”rcode_t
 
e2fsck_®loÿ‹_šode_b™m­
(
ext2_fsys
 
fs
,

554 cÚ¡ *
desü
,

555 
deçuÉ_ty³
,

556 cÚ¡ *
´ofe_Çme
,

557 
ext2fs_šode_b™m­
 *
»t
);

558 
”rcode_t
 
e2fsck_®loÿ‹_block_b™m­
(
ext2_fsys
 
fs
,

559 cÚ¡ *
desü
,

560 
deçuÉ_ty³
,

561 cÚ¡ *
´ofe_Çme
,

562 
ext2fs_block_b™m­
 *
»t
);

563 
”rcode_t
 
e2fsck_®loÿ‹_subşu¡”_b™m­
(
ext2_fsys
 
fs
,

564 cÚ¡ *
desü
,

565 
deçuÉ_ty³
,

566 cÚ¡ *
´ofe_Çme
,

567 
ext2fs_block_b™m­
 *
»t
);

570 
e2fsck_ş—r_´ogb¬
(
e2fsck_t
 
ùx
);

571 
e2fsck_sim¶e_´og»ss
(
e2fsck_t
 
ùx
, cÚ¡ *
Ïb–
,

572 
³rûÁ
, 
dpynum
);

	@libe2fsck/e2fsck_err.h

1 #iâdeà
__E2FSCK_ERR_H__


2 
	#__E2FSCK_ERR_H__


	)

	@libe2fsck/e2fsck_lib.h

1 #iâdeà
__E2FSCK_LIB_H__


2 
	#__E2FSCK_LIB_H__


	)

4 
	~"ext2fs/ext2fs.h
"

5 
	~"e2fsck_”r.h
"

10 
	se2fsck_ex‹nded_İt
 {

11 
	mäagcheck
;

12 
	mdisÿrd
;

13 
	mnodisÿrd
;

14 
	mjouº®_Úly
;

17 
	se2fsck_cfg
 {

18 
blk64_t
 
	mu£_su³rblock
;

19 
	m¥ecif›d_su³rblock
;

20 
	msu³rblock_size
;

21 
	m´og»ss_fd
;

22 
	mİtimize_dœ
;

23 
	mtimšg_¡©i¡ics
;

24 
	mbadblock_check
;

25 
	mu£_ext_jouº®
;

26 
	mext_jouº®
[256];

27 
	mdebug
;

28 
	mfÜû
;

29 
	mæush
;

30 
	mv”bo£
;

31 
e2fsck_ex‹nded_İt
 
	mext_İts
;

34 (*
	te2fsck_cb_func
)(*
	tpD©a
, 
	t¡©
, 
	tcu¼’t
, 
	ttÙ®
);

36 
	se2fsck_hªdË
 {

38 
e2fsck_cfg
 
cfg
;

39 
deviû_Çme
[32];

40 *
buf
;

41 *
pD©a
;

42 
e2fsck_cb_func
 
cb_func
;

45 
	`e2fsck
(
e2fsck_hªdË
 *
hªdË
);

	@libe2fsck/jfs_compat.h

2 #iâdeà
_JFS_COMPAT_H


3 
	#_JFS_COMPAT_H


	)

5 
	~"k”Ãl-li¡.h
"

6 
	~<”ºo.h
>

7 #ifdeà
HAVE_NETINET_IN_H


8 
	~<Ãtš‘/š.h
>

11 
	#´štk
 
´štf


	)

12 
	#KERN_ERR
 ""

	)

13 
	#KERN_DEBUG
 ""

	)

15 
	#READ
 0

	)

16 
	#WRITE
 1

	)

18 
	#ıu_to_be32
(
n
è
	`htÚl
Ò)

	)

19 
	#be32_to_ıu
(
n
è
	`Áohl
Ò)

	)

21 
	ttid_t
;

22 
jouº®_s
 
	tjouº®_t
;

24 
	gbufãr_h—d
;

25 
	gšode
;

27 
	sjouº®_s


29 
	mj_æags
;

30 
	mj_”ºo
;

31 
bufãr_h—d
 * 
	mj_sb_bufãr
;

32 
jouº®_su³rblock_s
 *
	mj_su³rblock
;

33 
	mj_fÜm©_v”siÚ
;

34 
	mj_h—d
;

35 
	mj_
;

36 
	mj_ä“
;

37 
	mj_fœ¡
, 
	mj_Ï¡
;

38 
kdev_t
 
	mj_dev
;

39 
kdev_t
 
	mj_fs_dev
;

40 
	mj_blocksize
;

41 
	mj_blk_off£t
;

42 
	mj_maxËn
;

43 
šode
 * 
	mj_šode
;

44 
tid_t
 
	mj__£qu’û
;

45 
tid_t
 
	mj_Œª§ùiÚ_£qu’û
;

46 
__u8
 
	mj_uuid
[16];

47 
jbd_»voke_bË_s
 *
	mj_»voke
;

48 
tid_t
 
	mj_çed_comm™
;

51 
	#J_ASSERT
(
as£¹
) \

52 dØ{ ià(!(
as£¹
)) { \

53 
	`´štf
 ("Assertion failure in %s()‡t %s†ine %d: " \

55 
__FUNCTION__
, 
__FILE__
, 
__LINE__
, #assert); \

56 
	`çl_”rÜ
(
e2fsck_glob®_ùx
, 0); \

57 } } 0)

	)

59 
	#is_jouº®_abÜt
(
x
è0

	)

61 
	#BUFFER_TRACE
(
bh
, 
šfo
èdØ{} 0)

	)

64 #ifdeà
NO_INLINE_FUNCS


65 
	#šlše


	)

	@libe2fsck/jfs_user.h

15 
	~"e2fsck.h
"

17 
	sbufãr_h—d
 {

18 
e2fsck_t
 
	mb_ùx
;

19 
io_chªÃl
 
	mb_io
;

20 
	mb_size
;

21 
	mb_blockÄ
;

22 
	mb_dœty
;

23 
	mb_u±od©e
;

24 
	mb_”r
;

25 
	mb_d©a
[1024];

28 
	sšode
 {

29 
e2fsck_t
 
	mi_ùx
;

30 
ext2_šo_t
 
	mi_šo
;

31 
ext2_šode
 
	mi_ext2
;

34 
	skdev_s
 {

35 
e2fsck_t
 
	mk_ùx
;

36 
	mk_dev
;

39 
	#K_DEV_FS
 1

	)

40 
	#K_DEV_JOURNAL
 2

	)

42 
kdev_s
 *
	tkdev_t
;

44 
	#lock_bufãr
(
bh
èdØ{} 0)

	)

45 
	#uÆock_bufãr
(
bh
èdØ{} 0)

	)

46 
	#bufãr_»q
(
bh
è1

	)

47 
	#do_»adah—d
(
jouº®
, 
¡¬t
èdØ{} 0)

	)

49 
e2fsck_t
 
e2fsck_glob®_ùx
;

52 
	mobjeù_Ëngth
;

53 } 
	tlkmem_ÿche_t
;

55 
	#kmem_ÿche_®loc
(
ÿche
,
æags
è
	`m®loc
((ÿche)->
objeù_Ëngth
)

	)

56 
	#kmem_ÿche_ä“
(
ÿche
,
obj
è
	`ä“
(obj)

	)

57 
	#kmem_ÿche_ü—‹
(
Çme
,
Ën
,
a
,
b
,
c
,
d
è
	`do_ÿche_ü—‹
Ö’)

	)

58 
	#kmem_ÿche_de¡roy
(
ÿche
è
	`do_ÿche_de¡roy
(ÿche)

	)

59 
	#km®loc
(
Ën
,
æags
è
	`m®loc
Ö’)

	)

60 
	#kä“
(
p
è
	`ä“
Õ)

	)

62 
	#cÚd_»sched
(èdØ{ } 0)

	)

64 
	t__be32
;

65 
__u64
 
	t__be64
;

67 
	#__š™


	)

72 
	~"k”Ãl-jbd.h
"

78 #ifdeà
NO_INLINE_FUNCS


79 
lkmem_ÿche_t
 * 
do_ÿche_ü—‹
(
Ën
);

80 
do_ÿche_de¡roy
(
lkmem_ÿche_t
 *
ÿche
);

81 
size_t
 
jouº®_g_by‹s
(
jouº®_t
 *
jouº®
);

84 #ià(
defšed
(
E2FSCK_INCLUDE_INLINE_FUNCS
è|| !defšed(
NO_INLINE_FUNCS
))

85 #ifdeà
E2FSCK_INCLUDE_INLINE_FUNCS


86 #ià(
__STDC_VERSION__
 >= 199901L)

87 
	#_INLINE_
 
šlše


	)

89 
	#_INLINE_
 
šlše


	)

92 #ià(
__STDC_VERSION__
 >= 199901L)

93 
	#_INLINE_
 
šlše


	)

95 #ifdeà
__GNUC__


96 
	#_INLINE_
 
__šlše__


	)

98 
	#_INLINE_
 
šlše


	)

104 
_INLINE_
 
lkmem_ÿche_t
 * 
	$do_ÿche_ü—‹
(
Ën
)

106 
lkmem_ÿche_t
 *
Ãw_ÿche
;

107 
Ãw_ÿche
 = 
	`m®loc
((*new_cache));

108 ià(
Ãw_ÿche
)

109 
Ãw_ÿche
->
objeù_Ëngth
 = 
Ën
;

110  
Ãw_ÿche
;

111 
	}
}

113 
_INLINE_
 
	$do_ÿche_de¡roy
(
lkmem_ÿche_t
 *
ÿche
)

115 
	`ä“
(
ÿche
);

116 
	}
}

121 
_INLINE_
 
size_t
 
	$jouº®_g_by‹s
(
jouº®_t
 *
jouº®
)

123 ià(
	`JFS_HAS_INCOMPAT_FEATURE
(
jouº®
, 
JFS_FEATURE_INCOMPAT_64BIT
))

124  
JBD_TAG_SIZE64
;

126  
JBD_TAG_SIZE32
;

127 
	}
}

129 #undeà
_INLINE_


135 
jouº®_bm­
(
jouº®_t
 *
jouº®
, 
blk64_t
 
block
, *
phys
);

136 
bufãr_h—d
 *
g‘blk
(
kdev_t
 
ùx
, 
blk64_t
 
blockÄ
, 
blocksize
);

137 
sync_blockdev
(
kdev_t
 
kdev
);

138 
Î_rw_block
(
rw
, 
dummy
, 
bufãr_h—d
 *
bh
[]);

139 
m¬k_bufãr_dœty
(
bufãr_h—d
 *
bh
);

140 
m¬k_bufãr_u±od©e
(
bufãr_h—d
 *
bh
, 
v®
);

141 
b»l£
(
bufãr_h—d
 *
bh
);

142 
bufãr_u±od©e
(
bufãr_h—d
 *
bh
);

143 
wa™_Ú_bufãr
(
bufãr_h—d
 *
bh
);

148 
	#__g‘blk
(
dev
, 
blockÄ
, 
blocksize
è
	`g‘blk
(dev, blockÄ, blocksize)

	)

149 
	#£t_bufãr_u±od©e
(
bh
è
	`m¬k_bufãr_u±od©e
(bh, 1)

	)

	@libe2fsck/kernel-jbd.h

16 #iâdeà
_LINUX_JBD_H


17 
	#_LINUX_JBD_H


	)

19 #ià
defšed
(
CONFIG_JBD
è|| defšed(
CONFIG_JBD_MODULE
è|| !defšed(
__KERNEL__
)

22 #iâdeà
__KERNEL__


23 
	~"jfs_com·t.h
"

24 
	#JFS_DEBUG


	)

25 
	#jfs_debug
 
jbd_debug


	)

28 
	~<lšux/jouº®-h—d.h
>

29 
	~<lšux/¡ddef.h
>

30 
	~<asm/£m­hÜe.h
>

33 #iâdeà
__GNUC__


34 
	#__FUNCTION__
 ""

	)

37 
	#jouº®_oom_»Œy
 1

	)

39 #ifdeà
__STDC__


40 #ifdeà
CONFIG_JBD_DEBUG


46 
	#JBD_EXPENSIVE_CHECKING


	)

47 
jouº®_’abË_debug
;

49 
	#jbd_debug
(
n
, 
f
, 
a
...) \

51 ià((
n
è<ğ
jouº®_’abË_debug
) { \

52 
	`´štk
 (
KERN_DEBUG
 "(%s, %d): %s: ", \

53 
__FILE__
, 
__LINE__
, 
__FUNCTION__
); \

54 
	`´štk
 (
f
, ## 
a
); \

56 } 0)

	)

58 #ifdeà
__GNUC__


59 
	#jbd_debug
(
f
, 
a
...è

	)

61 
	#jbd_debug
(
f
, ...è

	)

65 
	#jbd_debug
(
x
è

	)

68 * 
__jbd_km®loc
 (*
wh”e
, 
size_t
 
size
, 
æags
, 
»Œy
);

69 
	#jbd_km®loc
(
size
, 
æags
) \

70 
	`__jbd_km®loc
(
__FUNCTION__
, (
size
), (
æags
), 
jouº®_oom_»Œy
)

	)

71 
	#jbd_»p_km®loc
(
size
, 
æags
) \

72 
	`__jbd_km®loc
(
__FUNCTION__
, (
size
), (
æags
), 1)

	)

74 
	#JFS_MIN_JOURNAL_BLOCKS
 1024

	)

76 #ifdeà
__KERNEL__


77 
hªdË_s
 
	thªdË_t
;

78 
jouº®_s
 
	tjouº®_t
;

85 
	#JFS_MAGIC_NUMBER
 0xc03b3998U

	)

95 
	#JFS_DESCRIPTOR_BLOCK
 1

	)

96 
	#JFS_COMMIT_BLOCK
 2

	)

97 
	#JFS_SUPERBLOCK_V1
 3

	)

98 
	#JFS_SUPERBLOCK_V2
 4

	)

99 
	#JFS_REVOKE_BLOCK
 5

	)

104 
	sjouº®_h—d”_s


106 
__u32
 
	mh_magic
;

107 
__u32
 
	mh_blockty³
;

108 
__u32
 
	mh_£qu’û
;

109 } 
	tjouº®_h—d”_t
;

114 
	#JBD2_CRC32_CHKSUM
 1

	)

115 
	#JBD2_MD5_CHKSUM
 2

	)

116 
	#JBD2_SHA1_CHKSUM
 3

	)

118 
	#JBD2_CRC32_CHKSUM_SIZE
 4

	)

120 
	#JBD2_CHECKSUM_BYTES
 (32 / (
__u32
))

	)

124 
	scomm™_h—d”
 {

125 
__u32
 
	mh_magic
;

126 
__u32
 
	mh_blockty³
;

127 
__u32
 
	mh_£qu’û
;

128 
	mh_chksum_ty³
;

129 
	mh_chksum_size
;

130 
	mh_·ddšg
[2];

131 
__u32
 
	mh_chksum
[
JBD2_CHECKSUM_BYTES
];

132 
__u64
 
	mh_comm™_£c
;

133 
__u32
 
	mh_comm™_n£c
;

139 
	sjouº®_block_g_s


141 
__u32
 
	mt_blockÄ
;

142 
__u32
 
	mt_æags
;

143 
__u32
 
	mt_blockÄ_high
;

144 } 
	tjouº®_block_g_t
;

146 
	#JBD_TAG_SIZE64
 ((
jouº®_block_g_t
))

	)

147 
	#JBD_TAG_SIZE32
 (8)

	)

153 
	sjouº®_»voke_h—d”_s


155 
jouº®_h—d”_t
 
	mr_h—d”
;

156 
	mr_couÁ
;

157 } 
	tjouº®_»voke_h—d”_t
;

161 
	#JFS_FLAG_ESCAPE
 1

	)

162 
	#JFS_FLAG_SAME_UUID
 2

	)

163 
	#JFS_FLAG_DELETED
 4

	)

164 
	#JFS_FLAG_LAST_TAG
 8

	)

167 
	#UUID_SIZE
 16

	)

168 
	#JFS_USERS_MAX
 48

	)

169 
	#JFS_USERS_SIZE
 (
UUID_SIZE
 * 
JFS_USERS_MAX
)

	)

173 
	sjouº®_su³rblock_s


176 
jouº®_h—d”_t
 
	ms_h—d”
;

180 
__u32
 
	ms_blocksize
;

181 
__u32
 
	ms_maxËn
;

182 
__u32
 
	ms_fœ¡
;

186 
__u32
 
	ms_£qu’û
;

187 
__u32
 
	ms_¡¬t
;

191 
__s32
 
	ms_”ºo
;

195 
__u32
 
	ms_ã©u»_com·t
;

196 
__u32
 
	ms_ã©u»_šcom·t
;

197 
__u32
 
	ms_ã©u»_ro_com·t
;

199 
__u8
 
	ms_uuid
[16];

202 
__u32
 
	ms_Ä_u£rs
;

204 
__u32
 
	ms_dynsu³r
;

207 
__u32
 
	ms_max_Œª§ùiÚ
;

208 
__u32
 
	ms_max_Œªs_d©a
;

211 
__u32
 
	ms_·ddšg
[44];

214 
__u8
 
	ms_u£rs
[
JFS_USERS_SIZE
];

217 } 
	tjouº®_su³rblock_t
;

219 
	#JFS_HAS_COMPAT_FEATURE
(
j
,
mask
) \

220 ((
j
)->
j_fÜm©_v”siÚ
 >= 2 && \

221 ((
j
)->
j_su³rblock
->
s_ã©u»_com·t
 & 
	`ext2fs_ıu_to_be32
((
mask
))))

	)

222 
	#JFS_HAS_RO_COMPAT_FEATURE
(
j
,
mask
) \

223 ((
j
)->
j_fÜm©_v”siÚ
 >= 2 && \

224 ((
j
)->
j_su³rblock
->
s_ã©u»_ro_com·t
 & 
	`ext2fs_ıu_to_be32
((
mask
))))

	)

225 
	#JFS_HAS_INCOMPAT_FEATURE
(
j
,
mask
) \

226 ((
j
)->
j_fÜm©_v”siÚ
 >= 2 && \

227 ((
j
)->
j_su³rblock
->
s_ã©u»_šcom·t
 & 
	`ext2fs_ıu_to_be32
((
mask
))))

	)

229 
	#JFS_FEATURE_COMPAT_CHECKSUM
 0x00000001

	)

231 
	#JFS_FEATURE_INCOMPAT_REVOKE
 0x00000001

	)

233 
	#JFS_FEATURE_INCOMPAT_REVOKE
 0x00000001

	)

234 
	#JFS_FEATURE_INCOMPAT_64BIT
 0x00000002

	)

235 
	#JFS_FEATURE_INCOMPAT_ASYNC_COMMIT
 0x00000004

	)

238 
	#JFS_KNOWN_COMPAT_FEATURES
 0

	)

239 
	#JFS_KNOWN_ROCOMPAT_FEATURES
 0

	)

240 
	#JFS_KNOWN_INCOMPAT_FEATURES
 (
JFS_FEATURE_INCOMPAT_REVOKE
|\

241 
JFS_FEATURE_INCOMPAT_ASYNC_COMMIT
|\

242 
JFS_FEATURE_INCOMPAT_64BIT
)

	)

244 #ifdeà
__KERNEL__


246 
	~<lšux/fs.h
>

247 
	~<lšux/sched.h
>

249 
	#JBD_ASSERTIONS


	)

250 #ifdeà
JBD_ASSERTIONS


251 
	#J_ASSERT
(
as£¹
) \

253 ià(!(
as£¹
)) { \

254 
	`´štk
 (
KERN_EMERG
 \

256 
__FUNCTION__
, 
__FILE__
, 
__LINE__
, #assert); \

257 
	`BUG
(); \

259 } 0)

	)

261 #ià
defšed
(
CONFIG_BUFFER_DEBUG
)

262 
bufãr_as£¹iÚ_çu»
(
bufãr_h—d
 *
bh
);

263 
	#J_ASSERT_BH
(
bh
, 
ex´
) \

265 ià(!(
ex´
)) \

266 
	`bufãr_as£¹iÚ_çu»
(
bh
); \

267 
	`J_ASSERT
(
ex´
); \

268 } 0)

	)

269 
	#J_ASSERT_JH
(
jh
, 
ex´
è
	`J_ASSERT_BH
(
	`jh2bh
(jh),ƒx´)

	)

271 
	#J_ASSERT_BH
(
bh
, 
ex´
è
	`J_ASSERT
Óx´)

	)

272 
	#J_ASSERT_JH
(
jh
, 
ex´
è
	`J_ASSERT
Óx´)

	)

276 
	#J_ASSERT
(
as£¹
)

	)

279 
	ejbd_¡©e_b™s
 {

280 
	mBH_JWr™e


281 ğ
BH_Priv©eS¹
,

282 
	mBH_F»ed
,

283 
	mBH_Revoked
,

284 
	mBH_RevokeV®id
,

285 
	mBH_JBDDœty
,

289 
šlše
 
	$bufãr_jbd
(
bufãr_h—d
 *
bh
)

291  
	`__bufãr_¡©e
(
bh
, 
JBD
);

292 
	}
}

294 
šlše
 
bufãr_h—d
 *
	$jh2bh
(
jouº®_h—d
 *
jh
)

296  
jh
->
b_bh
;

297 
	}
}

299 
šlše
 
jouº®_h—d
 *
	$bh2jh
(
bufãr_h—d
 *
bh
)

301  
bh
->
b_´iv©e
;

302 
	}
}

304 
	gjbd_»voke_bË_s
;

319 
	shªdË_s


322 
Œª§ùiÚ_t
 * 
	mh_Œª§ùiÚ
;

325 
	mh_bufãr_üed™s
;

328 
	mh_»f
;

332 
	mh_”r
;

335 
	mh_sync
: 1;

336 
	mh_jd©a
: 1;

337 
	mh_abÜ‹d
: 1;

357 
	sŒª§ùiÚ_s


360 
jouº®_t
 * 
	mt_jouº®
;

363 
tid_t
 
	mt_tid
;

367 
	mT_RUNNING
,

368 
	mT_LOCKED
,

369 
	mT_RUNDOWN
,

370 
	mT_FLUSH
,

371 
	mT_COMMIT
,

372 
	mT_FINISHED


373 } 
	mt_¡©e
;

376 
	mt_log_¡¬t
;

380 
šode
 * 
	mt_i¡
;

383 
	mt_Ä_bufãrs
;

387 
jouº®_h—d
 * 
	mt_»£rved_li¡
;

391 
jouº®_h—d
 * 
	mt_bufãrs
;

398 
jouº®_h—d
 * 
	mt_sync_d©®i¡
;

405 
jouº®_h—d
 * 
	mt_async_d©®i¡
;

410 
jouº®_h—d
 * 
	mt_fÜg‘
;

417 
jouº®_h—d
 * 
	mt_checkpošt_li¡
;

421 
jouº®_h—d
 * 
	mt_iobuf_li¡
;

427 
jouº®_h—d
 * 
	mt_shadow_li¡
;

431 
jouº®_h—d
 * 
	mt_log_li¡
;

434 
	mt_upd©es
;

438 
	mt_out¡ªdšg_üed™s
;

445 
Œª§ùiÚ_t
 *
	mt_ıÃxt
, *
	mt_ı´ev
;

449 
	mt_expœes
;

452 
	mt_hªdË_couÁ
;

463 
	sjouº®_s


466 
	mj_æags
;

470 
	mj_”ºo
;

473 
bufãr_h—d
 * 
	mj_sb_bufãr
;

474 
jouº®_su³rblock_t
 * 
	mj_su³rblock
;

477 
	mj_fÜm©_v”siÚ
;

480 
	mj_b¬r›r_couÁ
;

483 
£m­hÜe
 
	mj_b¬r›r
;

486 
Œª§ùiÚ_t
 * 
	mj_ruÂšg_Œª§ùiÚ
;

489 
Œª§ùiÚ_t
 * 
	mj_comm™tšg_Œª§ùiÚ
;

494 
Œª§ùiÚ_t
 * 
	mj_checkpošt_Œª§ùiÚs
;

498 
wa™_queue_h—d_t
 
	mj_wa™_Œª§ùiÚ_locked
;

501 
wa™_queue_h—d_t
 
	mj_wa™_log¥aû
;

504 
wa™_queue_h—d_t
 
	mj_wa™_dÚe_comm™
;

507 
wa™_queue_h—d_t
 
	mj_wa™_checkpošt
;

510 
wa™_queue_h—d_t
 
	mj_wa™_comm™
;

513 
wa™_queue_h—d_t
 
	mj_wa™_upd©es
;

516 
£m­hÜe
 
	mj_checkpošt_£m
;

519 
£m­hÜe
 
	mj_£m
;

522 
	mj_h—d
;

526 
	mj_
;

529 
	mj_ä“
;

533 
	mj_fœ¡
, 
	mj_Ï¡
;

537 
kdev_t
 
	mj_dev
;

538 
	mj_blocksize
;

539 
	mj_blk_off£t
;

543 
kdev_t
 
	mj_fs_dev
;

546 
	mj_maxËn
;

551 
šode
 * 
	mj_šode
;

554 
tid_t
 
	mj__£qu’û
;

556 
tid_t
 
	mj_Œª§ùiÚ_£qu’û
;

558 
tid_t
 
	mj_comm™_£qu’û
;

560 
tid_t
 
	mj_comm™_»que¡
;

568 
__u8
 
	mj_uuid
[16];

571 
sk_¡ruù
 * 
	mj_sk
;

575 
	mj_max_Œª§ùiÚ_bufãrs
;

579 
	mj_comm™_š‹rv®
;

582 
tim”_li¡
 * 
	mj_comm™_tim”
;

583 
	mj_comm™_tim”_aùive
;

586 
li¡_h—d
 
	mj_®l_jouº®s
;

590 
jbd_»voke_bË_s
 *
	mj_»voke
;

593 
	mj_çed_comm™
;

599 
	#JFS_UNMOUNT
 0x001

	)

600 
	#JFS_ABORT
 0x002

	)

601 
	#JFS_ACK_ERR
 0x004

	)

602 
	#JFS_FLUSHED
 0x008

	)

603 
	#JFS_LOADED
 0x010

	)

611 
__jouº®_unfe_bufãr
(
jouº®_h—d
 *);

612 
jouº®_unfe_bufãr
(
jouº®_h—d
 *);

613 
__jouº®_»fe_bufãr
(
jouº®_h—d
 *);

614 
jouº®_»fe_bufãr
(
jouº®_h—d
 *);

615 
__jouº®_fe_bufãr
(
jouº®_h—d
 *, 
Œª§ùiÚ_t
 *, );

616 
__jouº®_ä“_bufãr
(
jouº®_h—d
 *
bh
);

617 
jouº®_fe_bufãr
(
jouº®_h—d
 *, 
Œª§ùiÚ_t
 *, );

618 
__jouº®_ş—n_d©a_li¡
(
Œª§ùiÚ_t
 *
Œª§ùiÚ
);

621 
jouº®_h—d
 * 
jouº®_g‘_desütÜ_bufãr
(
jouº®_t
 *);

622 
jouº®_Ãxt_log_block
(
jouº®_t
 *);

625 
jouº®_comm™_Œª§ùiÚ
(
jouº®_t
 *);

628 
__jouº®_ş—n_checkpošt_li¡
(
jouº®_t
 *
jouº®
);

629 
jouº®_»move_checkpošt
(
jouº®_h—d
 *);

630 
__jouº®_»move_checkpošt
(
jouº®_h—d
 *);

631 
jouº®_š£¹_checkpošt
(
jouº®_h—d
 *, 
Œª§ùiÚ_t
 *);

632 
__jouº®_š£¹_checkpošt
(
jouº®_h—d
 *,
Œª§ùiÚ_t
 *);

636 
jouº®_wr™e_m‘ad©a_bufãr
(
Œª§ùiÚ_t
 *
Œª§ùiÚ
,

637 
jouº®_h—d
 *
jh_š
,

638 
jouº®_h—d
 **
jh_out
,

639 
blockÄ
);

642 
__wa™_Ú_jouº®
 (
jouº®_t
 *);

658 
šlše
 
	$lock_jouº®
(
jouº®_t
 *
jouº®
)

660 
	`down
(&
jouº®
->
j_£m
);

661 
	}
}

664 
šlše
 
	$Œy_lock_jouº®
(
jouº®_t
 * 
jouº®
)

666  
	`down_Œylock
(&
jouº®
->
j_£m
);

667 
	}
}

669 
šlše
 
	$uÆock_jouº®
(
jouº®_t
 * 
jouº®
)

671 
	`up
(&
jouº®
->
j_£m
);

672 
	}
}

675 
šlše
 
hªdË_t
 *
	$jouº®_cu¼’t_hªdË
()

677  
cu¼’t
->
jouº®_šfo
;

678 
	}
}

686 
hªdË_t
 *
jouº®_¡¬t
(
jouº®_t
 *, 
nblocks
);

687 
hªdË_t
 *
jouº®_Œy_¡¬t
(
jouº®_t
 *, 
nblocks
);

688 
jouº®_»¡¬t
 (
hªdË_t
 *, 
nblocks
);

689 
jouº®_ex‹nd
 (
hªdË_t
 *, 
nblocks
);

690 
jouº®_g‘_wr™e_acûss
 (
hªdË_t
 *, 
bufãr_h—d
 *);

691 
jouº®_g‘_ü—‹_acûss
 (
hªdË_t
 *, 
bufãr_h—d
 *);

692 
jouº®_g‘_undo_acûss
 (
hªdË_t
 *, 
bufãr_h—d
 *);

693 
jouº®_dœty_d©a
 (
hªdË_t
 *,

694 
bufãr_h—d
 *, 
async
);

695 
jouº®_dœty_m‘ad©a
 (
hªdË_t
 *, 
bufãr_h—d
 *);

696 
jouº®_»Ëa£_bufãr
 (
hªdË_t
 *, 
bufãr_h—d
 *);

697 
jouº®_fÜg‘
 (
hªdË_t
 *, 
bufãr_h—d
 *);

698 
jouº®_sync_bufãr
 (
bufãr_h—d
 *);

699 
jouº®_æush·ge
(
jouº®_t
 *, 
·ge
 *, );

700 
jouº®_Œy_to_ä“_bufãrs
(
jouº®_t
 *, 
·ge
 *, );

701 
jouº®_¡İ
(
hªdË_t
 *);

702 
jouº®_æush
 (
jouº®_t
 *);

704 
jouº®_lock_upd©es
 (
jouº®_t
 *);

705 
jouº®_uÆock_upd©es
 (
jouº®_t
 *);

707 
jouº®_t
 * 
jouº®_š™_dev
(
kdev_t
 
dev
, kdev_ˆ
fs_dev
,

708 
¡¬t
, 
Ën
, 
bsize
);

709 
jouº®_t
 * 
jouº®_š™_šode
 (
šode
 *);

710 
jouº®_upd©e_fÜm©
 (
jouº®_t
 *);

711 
jouº®_check_u£d_ã©u»s


712 (
jouº®_t
 *, , , );

713 
jouº®_check_avaabË_ã©u»s


714 (
jouº®_t
 *, , , );

715 
jouº®_£t_ã©u»s


716 (
jouº®_t
 *, , , );

717 
jouº®_ü—‹
 (
jouº®_t
 *);

718 
jouº®_lßd
 (
jouº®_t
 *
jouº®
);

719 
jouº®_de¡roy
 (
jouº®_t
 *);

720 
jouº®_»cov”
 (
jouº®_t
 *
jouº®
);

721 
jouº®_we
 (
jouº®_t
 *, );

722 
jouº®_sk_»cov”y
 (
jouº®_t
 *);

723 
jouº®_upd©e_su³rblock
 (
jouº®_t
 *, );

724 
__jouº®_abÜt
 (
jouº®_t
 *);

725 
jouº®_abÜt
 (
jouº®_t
 *, );

726 
jouº®_”ºo
 (
jouº®_t
 *);

727 
jouº®_ack_”r
 (
jouº®_t
 *);

728 
jouº®_ş—r_”r
 (
jouº®_t
 *);

729 
jouº®_bm­
(
jouº®_t
 *
jouº®
, 
blockÄ
);

730 
jouº®_fÜû_comm™
(
jouº®_t
 *
jouº®
);

735 
jouº®_h—d


736 *
jouº®_add_jouº®_h—d
(
bufãr_h—d
 *
bh
);

737 
jouº®_»move_jouº®_h—d
(
bufãr_h—d
 *
bh
);

738 
__jouº®_»move_jouº®_h—d
(
bufãr_h—d
 *
bh
);

739 
jouº®_uÆock_jouº®_h—d
(
jouº®_h—d
 *
jh
);

742 
	#JOURNAL_REVOKE_DEFAULT_HASH
 256

	)

743 
jouº®_š™_»voke
(
jouº®_t
 *, );

744 
jouº®_de¡roy_»voke_ÿches
();

745 
jouº®_š™_»voke_ÿches
();

747 
jouº®_de¡roy_»voke
(
jouº®_t
 *);

748 
jouº®_»voke
 (
hªdË_t
 *,

749 , 
bufãr_h—d
 *);

750 
jouº®_ÿnûl_»voke
(
hªdË_t
 *, 
jouº®_h—d
 *);

751 
jouº®_wr™e_»voke_»cÜds
(
jouº®_t
 *, 
Œª§ùiÚ_t
 *);

754 
jouº®_£t_»voke
(
jouº®_t
 *, , 
tid_t
);

755 
jouº®_‹¡_»voke
(
jouº®_t
 *, , 
tid_t
);

756 
jouº®_ş—r_»voke
(
jouº®_t
 *);

757 
jouº®_b»l£_¬¿y
(
bufãr_h—d
 *
b
[], 
n
);

765 
log_¥aû_Ëá
 (
jouº®_t
 *);

766 
tid_t
 
log_¡¬t_comm™
 (
jouº®_t
 *, 
Œª§ùiÚ_t
 *);

767 
log_wa™_comm™
 (
jouº®_t
 *, 
tid_t
);

768 
log_do_checkpošt
 (
jouº®_t
 *, );

770 
log_wa™_fÜ_¥aû
(
jouº®_t
 *, 
nblocks
);

771 
__jouº®_drİ_Œª§ùiÚ
(
jouº®_t
 *, 
Œª§ùiÚ_t
 *);

772 
ş—nup_jouº®_
(
jouº®_t
 *);

775 
shršk_jouº®_memÜy
();

779 
	#jbd_ENOSYS
() \

781 
	`´štk
 (
KERN_ERR
 "JBD unim¶em’‹d funùiÚ " 
__FUNCTION__
); \

782 
cu¼’t
->
¡©e
 = 
TASK_UNINTERRUPTIBLE
; \

783 
	`scheduË
(); \

784 } 1)

	)

796 
šlše
 
	$is_jouº®_abÜ‹d
(
jouº®_t
 *
jouº®
)

798  
jouº®
->
j_æags
 & 
JFS_ABORT
;

799 
	}
}

801 
šlše
 
	$is_hªdË_abÜ‹d
(
hªdË_t
 *
hªdË
)

803 ià(
hªdË
->
h_abÜ‹d
)

805  
	`is_jouº®_abÜ‹d
(
hªdË
->
h_Œª§ùiÚ
->
t_jouº®
);

806 
	}
}

808 
šlše
 
	$jouº®_abÜt_hªdË
(
hªdË_t
 *
hªdË
)

810 
hªdË
->
h_abÜ‹d
 = 1;

811 
	}
}

814 #iâdeà
BUG


815 
	#BUG
() do { \

816 
	`´štk
("k”ÃÈBUG‡ˆ%s:%d!\n", 
__FILE__
, 
__LINE__
); \

818 } 0)

	)

823 
jouº®_»cov”
 (
jouº®_t
 *
jouº®
);

824 
jouº®_sk_»cov”y
 (
jouº®_t
 *);

827 
jouº®_š™_»voke
(
jouº®_t
 *, );

828 
jouº®_de¡roy_»voke_ÿches
();

829 
jouº®_š™_»voke_ÿches
();

832 
jouº®_£t_»voke
(
jouº®_t
 *, , 
tid_t
);

833 
jouº®_‹¡_»voke
(
jouº®_t
 *, , 
tid_t
);

834 
jouº®_ş—r_»voke
(
jouº®_t
 *);

835 
jouº®_b»l£_¬¿y
(
bufãr_h—d
 *
b
[], 
n
);

837 
jouº®_de¡roy_»voke
(
jouº®_t
 *);

840 
šlše
 
	$tid_gt
(
tid_t
 
x
,id_ˆ
y
è
	`EXT2FS_ATTR
((
unu£d
));

841 
šlše
 
	$tid_geq
(
tid_t
 
x
,id_ˆ
y
è
	`EXT2FS_ATTR
((
unu£d
));

846 
šlše
 
	$tid_gt
(
tid_t
 
x
,id_ˆ
y
)

848 
difã»nû
 = (
x
 - 
y
);

849  (
difã»nû
 > 0);

850 
	}
}

852 
šlše
 
	$tid_geq
(
tid_t
 
x
,id_ˆ
y
)

854 
difã»nû
 = (
x
 - 
y
);

855  (
difã»nû
 >= 0);

856 
	}
}

858 
jouº®_blocks_³r_·ge
(
šode
 *inode);

865 
	#BJ_NÚe
 0

	)

866 
	#BJ_SyncD©a
 1

	)

867 
	#BJ_AsyncD©a
 2

	)

868 
	#BJ_M‘ad©a
 3

	)

869 
	#BJ_FÜg‘
 4

	)

870 
	#BJ_IO
 5

	)

871 
	#BJ_Shadow
 6

	)

872 
	#BJ_LogC
 7

	)

873 
	#BJ_Re£rved
 8

	)

874 
	#BJ_Ty³s
 9

	)

876 
jbd_blocks_³r_·ge
(
šode
 *inode);

878 #ifdeà
__KERNEL__


880 
¥šlock_t
 
jh_¥liû_lock
;

885 
	#SPLICE_LOCK
(
ex´1
, 
ex´2
) \

887 
»t
 = (
ex´1
); \

888 ià(
»t
) { \

889 
	`¥š_lock
(&
jh_¥liû_lock
); \

890 
»t
 = (
ex´1
è&& (
ex´2
); \

891 
	`¥š_uÆock
(&
jh_¥liû_lock
); \

893 
»t
; \

894 })

	)

906 
šlše
 
	$bufãr_jli¡_eq
(
bufãr_h—d
 *
bh
, 
li¡
)

908  
	`SPLICE_LOCK
(
	`bufãr_jbd
(
bh
), 
	`bh2jh
(bh)->
b_jli¡
 =ğ
li¡
);

909 
	}
}

912 
šlše
 
	$bufãr_jdœty
(
bufãr_h—d
 *
bh
)

914  
	`bufãr_jbd
(
bh
è&& 
	`__bufãr_¡©e
(bh, 
JBDDœty
);

915 
	}
}

918 
šlše
 
	$bufãr_jbd_d©a
(
bufãr_h—d
 *
bh
)

920  
	`SPLICE_LOCK
(
	`bufãr_jbd
(
bh
),

921 
	`bh2jh
(
bh
)->
b_jli¡
 =ğ
BJ_SyncD©a
 ||

922 
	`bh2jh
(
bh
)->
b_jli¡
 =ğ
BJ_AsyncD©a
);

923 
	}
}

925 #ifdeà
CONFIG_SMP


926 
	#as£¹_¥š_locked
(
lock
è
	`J_ASSERT
(
	`¥š_is_locked
Öock))

	)

928 
	#as£¹_¥š_locked
(
lock
èdØ{} 0)

	)

931 
	#bufãr_Œaû_š™
(
bh
èdØ{} 0)

	)

932 
	#´št_bufãr_f›lds
(
bh
èdØ{} 0)

	)

933 
	#´št_bufãr_Œaû
(
bh
èdØ{} 0)

	)

934 
	#BUFFER_TRACE
(
bh
, 
šfo
èdØ{} 0)

	)

935 
	#BUFFER_TRACE2
(
bh
, 
bh2
, 
šfo
èdØ{} 0)

	)

936 
	#JBUFFER_TRACE
(
jh
, 
šfo
èdØ{} 0)

	)

947 #ià
defšed
(
__KERNEL__
è&& !(defšed(
CONFIG_JBD
è|| defšed(
CONFIG_JBD_MODULE
))

949 
	#J_ASSERT
(
ex´
èdØ{} 0)

	)

950 
	#J_ASSERT_BH
(
bh
, 
ex´
èdØ{} 0)

	)

951 
	#bufãr_jbd
(
bh
è0

	)

952 
	#bufãr_jli¡_eq
(
bh
, 
v®
è0

	)

953 
	#jouº®_bufãr_jouº®_Ìu
(
bh
è0

	)

	@libe2fsck/kernel-list.h

1 #iâdeà
_LINUX_LIST_H


2 
	#_LINUX_LIST_H


	)

14 
	sli¡_h—d
 {

15 
li¡_h—d
 *
	mÃxt
, *
	m´ev
;

18 
	#LIST_HEAD_INIT
(
Çme
è{ &Òame), &Òameè}

	)

20 
	#INIT_LIST_HEAD
(
±r
) do { \

21 (
±r
)->
Ãxt
 = (±r); (±r)->
´ev
 = (ptr); \

22 } 0)

	)

24 #ià(!
defšed
(
__GNUC__
è&& !defšed(
__WATCOMC__
))

25 
	#__šlše__


	)

34 
__šlše__
 
	$__li¡_add
(
li¡_h—d
 * 
Ãw
,

35 
li¡_h—d
 * 
´ev
,

36 
li¡_h—d
 * 
Ãxt
)

38 
Ãxt
->
´ev
 = 
Ãw
;

39 
Ãw
->
Ãxt
 =‚ext;

40 
Ãw
->
´ev
 =…rev;

41 
´ev
->
Ãxt
 = 
Ãw
;

42 
	}
}

47 
__šlše__
 
	$li¡_add
(
li¡_h—d
 *
Ãw
, li¡_h—d *
h—d
)

49 
	`__li¡_add
(
Ãw
, 
h—d
, h—d->
Ãxt
);

50 
	}
}

55 
__šlše__
 
	$li¡_add_
(
li¡_h—d
 *
Ãw
, li¡_h—d *
h—d
)

57 
	`__li¡_add
(
Ãw
, 
h—d
->
´ev
, head);

58 
	}
}

67 
__šlše__
 
	$__li¡_d–
(
li¡_h—d
 * 
´ev
,

68 
li¡_h—d
 * 
Ãxt
)

70 
Ãxt
->
´ev
 =…rev;

71 
´ev
->
Ãxt
 =‚ext;

72 
	}
}

74 
__šlše__
 
	$li¡_d–
(
li¡_h—d
 *
’Œy
)

76 
	`__li¡_d–
(
’Œy
->
´ev
,ƒÁry->
Ãxt
);

77 
	}
}

79 
__šlše__
 
	$li¡_em±y
(
li¡_h—d
 *
h—d
)

81  
h—d
->
Ãxt
 == head;

82 
	}
}

87 
__šlše__
 
	$li¡_¥liû
(
li¡_h—d
 *
li¡
, li¡_h—d *
h—d
)

89 
li¡_h—d
 *
fœ¡
 = 
li¡
->
Ãxt
;

91 ià(
fœ¡
 !ğ
li¡
) {

92 
li¡_h—d
 *
Ï¡
 = 
li¡
->
´ev
;

93 
li¡_h—d
 *
©
 = 
h—d
->
Ãxt
;

95 
fœ¡
->
´ev
 = 
h—d
;

96 
h—d
->
Ãxt
 = 
fœ¡
;

98 
Ï¡
->
Ãxt
 = 
©
;

99 
©
->
´ev
 = 
Ï¡
;

101 
	}
}

103 
	#li¡_’Œy
(
±r
, 
ty³
, 
memb”
) \

104 ((
ty³
 *)((*)(
±r
)-()(&(Ñy³ *)0)->
memb”
)))

	)

106 
	#li¡_fÜ_—ch
(
pos
, 
h—d
) \

107 
pos
 = (
h—d
)->
Ãxt
;…o !ğ(h—d);…o ğpos->Ãxt)

	)

	@libe2fsck/problem.h

12 
__u32
 
	t´obËm_t
;

14 
	s´obËm_cÚ‹xt
 {

15 
”rcode_t
 
	m”rcode
;

16 
ext2_šo_t
 
	mšo
, 
	mšo2
, 
	mdœ
;

17 
ext2_šode
 *
	mšode
;

18 
ext2_dœ_’Œy
 *
	mdœ’t
;

19 
blk64_t
 
	mblk
, 
	mblk2
;

20 
e2_blkút_t
 
	mblkcouÁ
;

21 
dg½_t
 
	mgroup
;

22 
__u32
 
	mcsum1
, 
	mcsum2
;

23 
__u64
 
	mnum
;

24 cÚ¡ *
	m¡r
;

32 
	#PR_LATCH_MASK
 0x0ff0

	)

33 
	#PR_LATCH_BLOCK
 0x0010

	)

34 
	#PR_LATCH_BBLOCK
 0x0020

	)

35 
	#PR_LATCH_IBITMAP
 0x0030

	)

36 
	#PR_LATCH_BBITMAP
 0x0040

	)

37 
	#PR_LATCH_RELOC
 0x0050

	)

38 
	#PR_LATCH_DBLOCK
 0x0060

	)

39 
	#PR_LATCH_LOW_DTIME
 0x0070

	)

40 
	#PR_LATCH_TOOBIG
 0x0080

	)

41 
	#PR_LATCH_OPTIMIZE_DIR
 0x0090

	)

42 
	#PR_LATCH_BG_CHECKSUM
 0x00A0

	)

44 
	#PR_LATCH
(
x
è((((xè& 
PR_LATCH_MASK
è>> 4è- 1)

	)

49 
	#PRL_YES
 0x0001

	)

50 
	#PRL_NO
 0x0002

	)

51 
	#PRL_LATCHED
 0x0004

	)

52 
	#PRL_SUPPRESS
 0x0008

	)

54 
	#PRL_VARIABLE
 0x000à

	)

61 
	#PR_0_BB_NOT_GROUP
 0x000001

	)

64 
	#PR_0_IB_NOT_GROUP
 0x000002

	)

67 
	#PR_0_ITABLE_NOT_GROUP
 0x000003

	)

70 
	#PR_0_SB_CORRUPT
 0x000004

	)

73 
	#PR_0_FS_SIZE_WRONG
 0x000005

	)

76 
	#PR_0_NO_FRAGMENTS
 0x000006

	)

79 
	#PR_0_BLOCKS_PER_GROUP
 0x000007

	)

82 
	#PR_0_FIRST_DATA_BLOCK
 0x000008

	)

85 
	#PR_0_ADD_UUID
 0x000009

	)

88 
	#PR_0_RELOCATE_HINT
 0x00000A

	)

91 
	#PR_0_MISC_CORRUPT_SUPER
 0x00000B

	)

94 
	#PR_0_GETSIZE_ERROR
 0x00000C

	)

97 
	#PR_0_INODE_COUNT_WRONG
 0x00000D

	)

100 
	#PR_0_HURD_CLEAR_FILETYPE
 0x00000E

	)

103 
	#PR_0_JOURNAL_BAD_INODE
 0x00000F

	)

106 
	#PR_0_JOURNAL_UNSUPP_MULTIFS
 0x000010

	)

109 
	#PR_0_CANT_FIND_JOURNAL
 0x000011

	)

112 
	#PR_0_EXT_JOURNAL_BAD_SUPER
 0x000012

	)

115 
	#PR_0_JOURNAL_BAD_UUID
 0x000013

	)

118 
	#PR_0_JOURNAL_UNSUPP_SUPER
 0x000014

	)

121 
	#PR_0_JOURNAL_BAD_SUPER
 0x000015

	)

124 
	#PR_0_JOURNAL_HAS_JOURNAL
 0x000016

	)

127 
	#PR_0_JOURNAL_RECOVER_SET
 0x000017

	)

130 
	#PR_0_JOURNAL_RECOVERY_CLEAR
 0x000018

	)

133 
	#PR_0_JOURNAL_RESET_JOURNAL
 0x000019

	)

136 
	#PR_0_FS_REV_LEVEL
 0x00001A

	)

139 
	#PR_0_ORPHAN_CLEAR_INODE
 0x000020

	)

142 
	#PR_0_ORPHAN_ILLEGAL_BLOCK_NUM
 0x000021

	)

145 
	#PR_0_ORPHAN_ALREADY_CLEARED_BLOCK
 0x000022

	)

148 
	#PR_0_ORPHAN_ILLEGAL_HEAD_INODE
 0x000023

	)

151 
	#PR_0_ORPHAN_ILLEGAL_INODE
 0x000024

	)

154 
	#PR_0_JOURNAL_UNSUPP_ROCOMPAT
 0x000025

	)

157 
	#PR_0_JOURNAL_UNSUPP_INCOMPAT
 0x000026

	)

160 
	#PR_0_JOURNAL_UNSUPP_VERSION
 0x000027

	)

163 
	#PR_0_MOVE_JOURNAL
 0x000028

	)

166 
	#PR_0_ERR_MOVE_JOURNAL
 0x000029

	)

169 
	#PR_0_CLEAR_V2_JOURNAL
 0x00002A

	)

172 
	#PR_0_JOURNAL_RUN
 0x00002B

	)

175 
	#PR_0_JOURNAL_RUN_DEFAULT
 0x00002C

	)

178 
	#PR_0_BACKUP_JNL
 0x00002D

	)

181 
	#PR_0_NONZERO_RESERVED_GDT_BLOCKS
 0x00002E

	)

184 
	#PR_0_CLEAR_RESIZE_INODE
 0x00002F

	)

187 
	#PR_0_RESIZE_INODE_INVALID
 0x000030

	)

190 
	#PR_0_FUTURE_SB_LAST_MOUNT
 0x000031

	)

193 
	#PR_0_FUTURE_SB_LAST_WRITE
 0x000032

	)

196 
	#PR_0_EXTERNAL_JOURNAL_HINT
 0x000033

	)

199 
	#PR_0_DIRHASH_HINT
 0x000034

	)

202 
	#PR_0_GDT_CSUM
 0x000035

	)

205 
	#PR_0_GDT_UNINIT
 0x000036

	)

211 
	#PR_0_GDT_ITABLE_UNUSED
 0x000038

	)

214 
	#PR_0_BB_UNINIT_LAST
 0x000039

	)

217 
	#PR_0_JNL_TXN_CORRUPT
 0x00003A

	)

220 
	#PR_0_CLEAR_TESTFS_FLAG
 0x00003B

	)

223 
	#PR_0_FUTURE_SB_LAST_MOUNT_FUDGED
 0x00003C

	)

226 
	#PR_0_FUTURE_SB_LAST_WRITE_FUDGED
 0x00003D

	)

229 
	#PR_0_GDT_CSUM_LATCH
 0x00003E

	)

232 
	#PR_0_FREE_INODE_COUNT
 0x00003F

	)

235 
	#PR_0_FREE_BLOCK_COUNT
 0x000040

	)

238 
	#PR_0_HIDE_QUOTA
 0x000041

	)

241 
	#PR_0_MMP_INVALID_BLK
 0x000042

	)

244 
	#PR_0_MMP_INVALID_MAGIC
 0x000043

	)

247 
	#PR_0_OPEN_FAILED
 0x000044

	)

250 
	#PR_0_CHECK_DESC_FAILED
 0x000045

	)

253 
	#PR_0_64BIT_WITHOUT_EXTENTS
 0x000048

	)

256 
	#PR_0_FIRST_META_BG_TOO_BIG
 0x000049

	)

263 
	#PR_1_PASS_HEADER
 0x010000

	)

266 
	#PR_1_ROOT_NO_DIR
 0x010001

	)

269 
	#PR_1_ROOT_DTIME
 0x010002

	)

272 
	#PR_1_RESERVED_BAD_MODE
 0x010003

	)

275 
	#PR_1_ZERO_DTIME
 0x010004

	)

278 
	#PR_1_SET_DTIME
 0x010005

	)

281 
	#PR_1_ZERO_LENGTH_DIR
 0x010006

	)

284 
	#PR_1_BB_CONFLICT
 0x010007

	)

287 
	#PR_1_IB_CONFLICT
 0x010008

	)

290 
	#PR_1_ITABLE_CONFLICT
 0x010009

	)

293 
	#PR_1_BB_BAD_BLOCK
 0x01000A

	)

296 
	#PR_1_IB_BAD_BLOCK
 0x01000B

	)

299 
	#PR_1_BAD_I_SIZE
 0x01000C

	)

302 
	#PR_1_BAD_I_BLOCKS
 0x01000D

	)

305 
	#PR_1_ILLEGAL_BLOCK_NUM
 0x01000E

	)

308 
	#PR_1_BLOCK_OVERLAPS_METADATA
 0x01000F

	)

311 
	#PR_1_INODE_BLOCK_LATCH
 0x010010

	)

314 
	#PR_1_TOO_MANY_BAD_BLOCKS
 0x010011

	)

317 
	#PR_1_BB_ILLEGAL_BLOCK_NUM
 0x010012

	)

320 
	#PR_1_INODE_BBLOCK_LATCH
 0x010013

	)

323 
	#PR_1_DUP_BLOCKS_PREENSTOP
 0x010014

	)

326 
	#PR_1_BBINODE_BAD_METABLOCK
 0x010015

	)

329 
	#PR_1_BBINODE_BAD_METABLOCK_PROMPT
 0x010016

	)

332 
	#PR_1_BAD_PRIMARY_BLOCK
 0x010017

	)

335 
	#PR_1_BAD_PRIMARY_BLOCK_PROMPT
 0x010018

	)

338 
	#PR_1_BAD_PRIMARY_SUPERBLOCK
 0x010019

	)

341 
	#PR_1_BAD_PRIMARY_GROUP_DESCRIPTOR
 0x01001A

	)

344 
	#PR_1_BAD_SUPERBLOCK
 0x01001B

	)

347 
	#PR_1_BAD_GROUP_DESCRIPTORS
 0x01001C

	)

350 
	#PR_1_PROGERR_CLAIMED_BLOCK
 0x01001D

	)

353 
	#PR_1_RELOC_BLOCK_ALLOCATE
 0x01001E

	)

356 
	#PR_1_RELOC_MEMORY_ALLOCATE
 0x01001F

	)

359 
	#PR_1_RELOC_FROM_TO
 0x010020

	)

362 
	#PR_1_RELOC_TO
 0x010021

	)

365 
	#PR_1_RELOC_READ_ERR
 0x010022

	)

368 
	#PR_1_RELOC_WRITE_ERR
 0x010023

	)

371 
	#PR_1_ALLOCATE_IBITMAP_ERROR
 0x010024

	)

374 
	#PR_1_ALLOCATE_BBITMAP_ERROR
 0x010025

	)

377 
	#PR_1_ALLOCATE_ICOUNT
 0x010026

	)

380 
	#PR_1_ALLOCATE_DBCOUNT
 0x010027

	)

383 
	#PR_1_ISCAN_ERROR
 0x010028

	)

386 
	#PR_1_BLOCK_ITERATE
 0x010029

	)

389 
	#PR_1_ICOUNT_STORE
 0x01002A

	)

392 
	#PR_1_ADD_DBLOCK
 0x01002B

	)

395 
	#PR_1_READ_INODE
 0x01002C

	)

398 
	#PR_1_SUPPRESS_MESSAGES
 0x01002D

	)

401 
	#PR_1_SET_IMAGIC
 0x01002F

	)

404 
	#PR_1_SET_IMMUTABLE
 0x010030

	)

407 
	#PR_1_COMPR_SET
 0x010031

	)

410 
	#PR_1_SET_NONZSIZE
 0x010032

	)

413 
	#PR_1_FS_REV_LEVEL
 0x010033

	)

416 
	#PR_1_JOURNAL_INODE_NOT_CLEAR
 0x010034

	)

419 
	#PR_1_JOURNAL_BAD_MODE
 0x010035

	)

422 
	#PR_1_LOW_DTIME
 0x010036

	)

425 
	#PR_1_ORPHAN_LIST_REFUGEES
 0x010037

	)

428 
	#PR_1_ALLOCATE_REFCOUNT
 0x010038

	)

431 
	#PR_1_READ_EA_BLOCK
 0x010039

	)

434 
	#PR_1_BAD_EA_BLOCK
 0x01003A

	)

437 
	#PR_1_EXTATTR_READ_ABORT
 0x01003B

	)

440 
	#PR_1_EXTATTR_REFCOUNT
 0x01003C

	)

443 
	#PR_1_EXTATTR_WRITE_ABORT
 0x01003D

	)

446 
	#PR_1_EA_MULTI_BLOCK
 0x01003E

	)

449 
	#PR_1_EA_ALLOC_REGION_ABORT
 0x01003F

	)

452 
	#PR_1_EA_ALLOC_COLLISION
 0x010040

	)

455 
	#PR_1_EA_BAD_NAME
 0x010041

	)

458 
	#PR_1_EA_BAD_VALUE
 0x010042

	)

461 
	#PR_1_INODE_TOOBIG
 0x010043

	)

464 
	#PR_1_TOOBIG_DIR
 0x010044

	)

467 
	#PR_1_TOOBIG_REG
 0x010045

	)

470 
	#PR_1_TOOBIG_SYMLINK
 0x010046

	)

473 
	#PR_1_HTREE_SET
 0x010047

	)

476 
	#PR_1_HTREE_NODIR
 0x010048

	)

479 
	#PR_1_HTREE_BADROOT
 0x010049

	)

482 
	#PR_1_HTREE_HASHV
 0x01004A

	)

485 
	#PR_1_HTREE_INCOMPAT
 0x01004B

	)

488 
	#PR_1_HTREE_DEPTH
 0x01004C

	)

491 
	#PR_1_BB_FS_BLOCK
 0x01004D

	)

494 
	#PR_1_RESIZE_INODE_CREATE
 0x01004E

	)

497 
	#PR_1_EXTRA_ISIZE
 0x01004F

	)

500 
	#PR_1_ATTR_NAME_LEN
 0x010050

	)

503 
	#PR_1_ATTR_VALUE_OFFSET
 0x010051

	)

506 
	#PR_1_ATTR_VALUE_BLOCK
 0x010052

	)

509 
	#PR_1_ATTR_VALUE_SIZE
 0x010053

	)

512 
	#PR_1_ATTR_HASH
 0x010054

	)

515 
	#PR_1_TREAT_AS_DIRECTORY
 0x010055

	)

518 
	#PR_1_READ_EXTENT
 0x010056

	)

521 
	#PR_1_EXTENT_ITERATE_FAILURE
 0x010057

	)

524 
	#PR_1_EXTENT_BAD_START_BLK
 0x010058

	)

527 
	#PR_1_EXTENT_ENDS_BEYOND
 0x010059

	)

530 
	#PR_1_EXTENTS_SET
 0x01005A

	)

533 
	#PR_1_EXTENT_FEATURE
 0x01005B

	)

536 
	#PR_1_UNSET_EXTENT_FL
 0x01005C

	)

539 
	#PR_1_FAST_SYMLINK_EXTENT_FL
 0x01005D

	)

542 
	#PR_1_OUT_OF_ORDER_EXTENTS
 0x01005E

	)

545 
	#PR_1_EXTENT_HEADER_INVALID
 0x01005F

	)

550 
	#PR_1_CONVERT_SUBCLUSTER
 0x010061

	)

553 
	#PR_1_QUOTA_BAD_MODE
 0x010062

	)

556 
	#PR_1_QUOTA_INODE_NOT_CLEAR
 0x010063

	)

559 
	#PR_1_QUOTA_INODE_NOT_HIDDEN
 0x010064

	)

562 
	#PR_1_INVALID_BAD_INODE
 0x010065

	)

565 
	#PR_1_EXTENT_LENGTH_ZERO
 0x010066

	)

568 
	#PR_1_EXTENT_INDEX_START_INVALID
 0x01006D

	)

570 
	#PR_1_EXTENT_END_OUT_OF_BOUNDS
 0x01006E

	)

573 
	#PR_1_INLINE_DATA_FEATURE
 0x01006F

	)

576 
	#PR_1_INLINE_DATA_SET
 0x010070

	)

579 
	#PR_1_CRITICAL_METADATA_COLLISION
 0x010071

	)

582 
	#PR_1_COLLAPSE_DBLOCK
 0x010072

	)

585 
	#PR_1_UNINIT_DBLOCK
 0x010073

	)

588 
	#PR_1_MISALIGNED_CLUSTER
 0x010074

	)

595 
	#PR_1B_PASS_HEADER
 0x011000

	)

598 
	#PR_1B_DUP_BLOCK_HEADER
 0x011001

	)

601 
	#PR_1B_DUP_BLOCK
 0x011002

	)

604 
	#PR_1B_DUP_BLOCK_END
 0x011003

	)

607 
	#PR_1B_ISCAN_ERROR
 0x011004

	)

610 
	#PR_1B_ALLOCATE_IBITMAP_ERROR
 0x011005

	)

613 
	#PR_1B_BLOCK_ITERATE
 0x011006

	)

616 
	#PR_1B_ADJ_EA_REFCOUNT
 0x011007

	)

619 
	#PR_1C_PASS_HEADER
 0x012000

	)

623 
	#PR_1D_PASS_HEADER
 0x013000

	)

626 
	#PR_1D_DUP_FILE
 0x013001

	)

629 
	#PR_1D_DUP_FILE_LIST
 0x013002

	)

632 
	#PR_1D_SHARE_METADATA
 0x013003

	)

635 
	#PR_1D_NUM_DUP_INODES
 0x013004

	)

638 
	#PR_1D_DUP_BLOCKS_DEALT
 0x013005

	)

641 
	#PR_1D_CLONE_QUESTION
 0x013006

	)

644 
	#PR_1D_DELETE_QUESTION
 0x013007

	)

647 
	#PR_1D_CLONE_ERROR
 0x013008

	)

654 
	#PR_2_PASS_HEADER
 0x020000

	)

657 
	#PR_2_BAD_INODE_DOT
 0x020001

	)

660 
	#PR_2_BAD_INO
 0x020002

	)

663 
	#PR_2_UNUSED_INODE
 0x020003

	)

666 
	#PR_2_LINK_DOT
 0x020004

	)

669 
	#PR_2_BB_INODE
 0x020005

	)

672 
	#PR_2_LINK_DIR
 0x020006

	)

675 
	#PR_2_LINK_ROOT
 0x020007

	)

678 
	#PR_2_BAD_NAME
 0x020008

	)

681 
	#PR_2_MISSING_DOT
 0x020009

	)

684 
	#PR_2_MISSING_DOT_DOT
 0x02000A

	)

687 
	#PR_2_1ST_NOT_DOT
 0x02000B

	)

690 
	#PR_2_2ND_NOT_DOT_DOT
 0x02000C

	)

693 
	#PR_2_FADDR_ZERO
 0x02000D

	)

696 
	#PR_2_FILE_ACL_ZERO
 0x02000E

	)

699 
	#PR_2_DIR_ACL_ZERO
 0x02000F

	)

702 
	#PR_2_FRAG_ZERO
 0x020010

	)

705 
	#PR_2_FSIZE_ZERO
 0x020011

	)

708 
	#PR_2_BAD_MODE
 0x020012

	)

711 
	#PR_2_DIR_CORRUPTED
 0x020013

	)

714 
	#PR_2_FILENAME_LONG
 0x020014

	)

717 
	#PR_2_DIRECTORY_HOLE
 0x020015

	)

720 
	#PR_2_DOT_NULL_TERM
 0x020016

	)

723 
	#PR_2_DOT_DOT_NULL_TERM
 0x020017

	)

726 
	#PR_2_BAD_CHAR_DEV
 0x020018

	)

729 
	#PR_2_BAD_BLOCK_DEV
 0x020019

	)

732 
	#PR_2_DUP_DOT
 0x02001A

	)

735 
	#PR_2_DUP_DOT_DOT
 0x02001B

	)

738 
	#PR_2_NO_DIRINFO
 0x02001C

	)

741 
	#PR_2_FINAL_RECLEN
 0x02001D

	)

744 
	#PR_2_ALLOCATE_ICOUNT
 0x02001E

	)

747 
	#PR_2_DBLIST_ITERATE
 0x02001F

	)

750 
	#PR_2_READ_DIRBLOCK
 0x020020

	)

753 
	#PR_2_WRITE_DIRBLOCK
 0x020021

	)

756 
	#PR_2_ALLOC_DIRBOCK
 0x020022

	)

759 
	#PR_2_DEALLOC_INODE
 0x020023

	)

762 
	#PR_2_SPLIT_DOT
 0x020024

	)

765 
	#PR_2_BAD_FIFO
 0x020025

	)

768 
	#PR_2_BAD_SOCKET
 0x020026

	)

771 
	#PR_2_SET_FILETYPE
 0x020027

	)

774 
	#PR_2_BAD_FILETYPE
 0x020028

	)

777 
	#PR_2_CLEAR_FILETYPE
 0x020029

	)

780 
	#PR_2_NULL_NAME
 0x020030

	)

783 
	#PR_2_INVALID_SYMLINK
 0x020031

	)

786 
	#PR_2_FILE_ACL_BAD
 0x020032

	)

789 
	#PR_2_FEATURE_LARGE_FILES
 0x020033

	)

792 
	#PR_2_HTREE_NOTREF
 0x020034

	)

795 
	#PR_2_HTREE_DUPREF
 0x020035

	)

798 
	#PR_2_HTREE_MIN_HASH
 0x020036

	)

801 
	#PR_2_HTREE_MAX_HASH
 0x020037

	)

804 
	#PR_2_HTREE_CLEAR
 0x020038

	)

810 
	#PR_2_HTREE_BADBLK
 0x02003A

	)

813 
	#PR_2_ADJ_EA_REFCOUNT
 0x02003B

	)

816 
	#PR_2_HTREE_BAD_ROOT
 0x02003C

	)

819 
	#PR_2_HTREE_BAD_LIMIT
 0x02003D

	)

822 
	#PR_2_HTREE_BAD_COUNT
 0x02003E

	)

825 
	#PR_2_HTREE_HASH_ORDER
 0x02003F

	)

828 
	#PR_2_HTREE_BAD_DEPTH
 0x020040

	)

831 
	#PR_2_DUPLICATE_DIRENT
 0x020041

	)

834 
	#PR_2_NON_UNIQUE_FILE
 0x020042

	)

837 
	#PR_2_REPORT_DUP_DIRENT
 0x020043

	)

840 
	#PR_2_BLOCKS_HI_ZERO
 0x020044

	)

843 
	#PR_2_UNEXPECTED_HTREE_BLOCK
 0x020045

	)

846 
	#PR_2_INOREF_BG_INO_UNINIT
 0x020046

	)

849 
	#PR_2_INOREF_IN_UNUSED
 0x020047

	)

852 
	#PR_2_I_FILE_ACL_HI_ZERO
 0x020048

	)

859 
	#PR_3_PASS_HEADER
 0x030000

	)

862 
	#PR_3_NO_ROOT_INODE
 0x030001

	)

865 
	#PR_3_EXPAND_LF_DIR
 0x030002

	)

868 
	#PR_3_UNCONNECTED_DIR
 0x030003

	)

871 
	#PR_3_NO_LF_DIR
 0x030004

	)

874 
	#PR_3_BAD_DOT_DOT
 0x030005

	)

877 
	#PR_3_NO_LPF
 0x030006

	)

880 
	#PR_3_CANT_EXPAND_LPF
 0x030007

	)

883 
	#PR_3_CANT_RECONNECT
 0x030008

	)

886 
	#PR_3_ERR_FIND_LPF
 0x030009

	)

889 
	#PR_3_ERR_LPF_NEW_BLOCK
 0x03000A

	)

892 
	#PR_3_ERR_LPF_NEW_INODE
 0x03000B

	)

895 
	#PR_3_ERR_LPF_NEW_DIR_BLOCK
 0x03000C

	)

898 
	#PR_3_ERR_LPF_WRITE_BLOCK
 0x03000D

	)

901 
	#PR_3_ADJUST_INODE
 0x03000E

	)

904 
	#PR_3_FIX_PARENT_ERR
 0x03000F

	)

907 
	#PR_3_FIX_PARENT_NOFIND
 0x030010

	)

910 
	#PR_3_ALLOCATE_IBITMAP_ERROR
 0x030011

	)

913 
	#PR_3_CREATE_ROOT_ERROR
 0x030012

	)

916 
	#PR_3_CREATE_LPF_ERROR
 0x030013

	)

919 
	#PR_3_ROOT_NOT_DIR_ABORT
 0x030014

	)

922 
	#PR_3_NO_ROOT_INODE_ABORT
 0x030015

	)

925 
	#PR_3_NO_DIRINFO
 0x030016

	)

928 
	#PR_3_LPF_NOTDIR
 0x030017

	)

934 
	#PR_3A_PASS_HEADER
 0x031000

	)

937 
	#PR_3A_OPTIMIZE_ITER
 0x031001

	)

940 
	#PR_3A_OPTIMIZE_DIR_ERR
 0x031002

	)

943 
	#PR_3A_OPTIMIZE_DIR_HEADER
 0x031003

	)

946 
	#PR_3A_OPTIMIZE_DIR
 0x031004

	)

949 
	#PR_3A_OPTIMIZE_DIR_END
 0x031005

	)

956 
	#PR_4_PASS_HEADER
 0x040000

	)

959 
	#PR_4_ZERO_LEN_INODE
 0x040001

	)

962 
	#PR_4_UNATTACHED_INODE
 0x040002

	)

965 
	#PR_4_BAD_REF_COUNT
 0x040003

	)

968 
	#PR_4_INCONSISTENT_COUNT
 0x040004

	)

975 
	#PR_5_PASS_HEADER
 0x050000

	)

978 
	#PR_5_INODE_BMAP_PADDING
 0x050001

	)

981 
	#PR_5_BLOCK_BMAP_PADDING
 0x050002

	)

984 
	#PR_5_BLOCK_BITMAP_HEADER
 0x050003

	)

987 
	#PR_5_BLOCK_UNUSED
 0x050004

	)

990 
	#PR_5_BLOCK_USED
 0x050005

	)

993 
	#PR_5_BLOCK_BITMAP_END
 0x050006

	)

996 
	#PR_5_INODE_BITMAP_HEADER
 0x050007

	)

999 
	#PR_5_INODE_UNUSED
 0x050008

	)

1002 
	#PR_5_INODE_USED
 0x050009

	)

1005 
	#PR_5_INODE_BITMAP_END
 0x05000A

	)

1008 
	#PR_5_FREE_INODE_COUNT_GROUP
 0x05000B

	)

1011 
	#PR_5_FREE_DIR_COUNT_GROUP
 0x05000C

	)

1014 
	#PR_5_FREE_INODE_COUNT
 0x05000D

	)

1017 
	#PR_5_FREE_BLOCK_COUNT_GROUP
 0x05000E

	)

1020 
	#PR_5_FREE_BLOCK_COUNT
 0x05000F

	)

1023 
	#PR_5_BMAP_ENDPOINTS
 0x050010

	)

1026 
	#PR_5_FUDGE_BITMAP_ERROR
 0x050011

	)

1029 
	#PR_5_COPY_IBITMAP_ERROR
 0x050012

	)

1032 
	#PR_5_COPY_BBITMAP_ERROR
 0x050013

	)

1035 
	#PR_5_BLOCK_RANGE_UNUSED
 0x050014

	)

1038 
	#PR_5_BLOCK_RANGE_USED
 0x050015

	)

1041 
	#PR_5_INODE_RANGE_UNUSED
 0x050016

	)

1044 
	#PR_5_INODE_RANGE_USED
 0x050017

	)

1047 
	#PR_5_BLOCK_UNINIT
 0x050018

	)

1050 
	#PR_5_INODE_UNINIT
 0x050019

	)

1057 
	#PR_6_RECREATE_JOURNAL
 0x060001

	)

1060 
	#PR_6_UPDATE_QUOTAS
 0x060002

	)

1063 
	#PR_6_SET_BG_CHECKSUM
 0x060003

	)

1066 
	#PR_6_FLUSH_FILESYSTEM
 0x060004

	)

1069 
	#PR_6_IO_FLUSH
 0x060005

	)

1074 
fix_´obËm
(
e2fsck_t
 
ùx
, 
´obËm_t
 
code
, 
´obËm_cÚ‹xt
 *
pùx
);

1075 
’d_´obËm_Ïtch
(
e2fsck_t
 
ùx
, 
mask
);

1076 
£t_Ïtch_æags
(
mask
, 
£tæags
, 
ş—ræags
);

1077 
g‘_Ïtch_æags
(
mask
, *
v®ue
);

1078 
ş—r_´obËm_cÚ‹xt
(
´obËm_cÚ‹xt
 *
pùx
);

1081 
´št_e2fsck_mes§ge
(
FILE
 *
f
, 
e2fsck_t
 
ùx
, cÚ¡ *
msg
,

1082 
´obËm_cÚ‹xt
 *
pùx
, 
fœ¡
,

1083 
»cur£
);

	@libe2fsck/problemP.h

12 
	se2fsck_´obËm
 {

13 
´obËm_t
 
	me2p_code
;

14 cÚ¡ * 
	me2p_desütiÚ
;

15 
	m´om±
;

16 
	mæags
;

17 
´obËm_t
 
	m£cÚd_code
;

18 
	mcouÁ
;

19 
	mmax_couÁ
;

22 
	sÏtch_desü
 {

23 
	mÏtch_code
;

24 
´obËm_t
 
	mque¡iÚ
;

25 
´obËm_t
 
	m’d_mes§ge
;

26 
	mæags
;

29 
	#PR_PREEN_OK
 0x000001

	)

30 
	#PR_NO_OK
 0x000002

	)

31 
	#PR_NO_DEFAULT
 0x000004

	)

32 
	#PR_MSG_ONLY
 0x000008

	)

36 
	#PR_FATAL
 0x001000

	)

37 
	#PR_AFTER_CODE
 0x002000

	)

39 
	#PR_PREEN_NOMSG
 0x004000

	)

40 
	#PR_NOCOLLATE
 0x008000

	)

41 
	#PR_NO_NOMSG
 0x010000

	)

42 
	#PR_PREEN_NO
 0x020000

	)

43 
	#PR_PREEN_NOHDR
 0x040000

	)

44 
	#PR_CONFIG
 0x080000

	)

46 
	#PR_FORCE_NO
 0x100000

	)

	@libe2fsck/profile.h

39 #iâdeà
_PROFILE_H


40 
	#_PROFILE_H


	)

42 
_´ofe_t
 *
	t´ofe_t
;

44 (*
	t´ofe_syÁax_”r_cb_t
)(cÚ¡ *
	tfe
, 
	t”r
,

45 
	tlše_num
);

50 
	#PROFILE_ITER_LIST_SECTION
 0x0001

	)

51 
	#PROFILE_ITER_SECTIONS_ONLY
 0x0002

	)

52 
	#PROFILE_ITER_RELATIONS_ONLY
 0x0004

	)

54 #ifdeà
__ılu¥lus


58 
´ofe_š™


59 (cÚ¡ * *
fes
, 
´ofe_t
 *
»t_´ofe
);

61 
´ofe_»Ëa£


62 (
´ofe_t
 
´ofe
);

64 
´ofe_£t_deçuÉ


65 (
´ofe_t
 
´ofe
, cÚ¡ *
def_¡ršg
);

67 
´ofe_g‘_¡ršg


68 (
´ofe_t
 
´ofe
, cÚ¡ *
Çme
, cÚ¡ *
subÇme
,

69 cÚ¡ *
subsubÇme
, cÚ¡ *
def_v®
,

70 **
»t_¡ršg
);

71 
´ofe_g‘_š‹g”


72 (
´ofe_t
 
´ofe
, cÚ¡ *
Çme
, cÚ¡ *
subÇme
,

73 cÚ¡ *
subsubÇme
, 
def_v®
,

74 *
»t_deçuÉ
);

76 
´ofe_g‘_ušt


77 (
´ofe_t
 
´ofe
, cÚ¡ *
Çme
, cÚ¡ *
subÇme
,

78 cÚ¡ *
subsubÇme
, 
def_v®
,

79 *
»t_št
);

81 
´ofe_g‘_doubË


82 (
´ofe_t
 
´ofe
, cÚ¡ *
Çme
, cÚ¡ *
subÇme
,

83 cÚ¡ *
subsubÇme
, 
def_v®
,

84 *
»t_æßt
);

86 
´ofe_g‘_boŞ—n


87 (
´ofe_t
 
´ofe
, cÚ¡ *
Çme
, cÚ¡ *
subÇme
,

88 cÚ¡ *
subsubÇme
, 
def_v®
,

89 *
»t_deçuÉ
);

91 
´ofe_™”©Ü_ü—‹


92 (
´ofe_t
 
´ofe
, cÚ¡ *cÚ¡ *
Çmes
,

93 
æags
, **
»t_™”
);

95 
´ofe_™”©Ü_ä“


96 (**
™”_p
);

98 
´ofe_™”©Ü


99 (**
™”_p
, **
»t_Çme
, **
»t_v®ue
);

101 
´ofe_syÁax_”r_cb_t
 
	`´ofe_£t_syÁax_”r_cb
Õrofe_syÁax_”r_cb_ˆ
hook
);

103 #ifdeà
__ılu¥lus


104 
	}
}

	@libmdadm/bitmap.h

6 #iâdeà
BITMAP_H


7 
	#BITMAP_H
 1

	)

9 
	#BITMAP_MAJOR_LO
 3

	)

13 
	#BITMAP_MAJOR_HI
 4

	)

14 
	#BITMAP_MAJOR_HOSTENDIAN
 3

	)

16 
	#BITMAP_MINOR
 39

	)

80 #ifdeà
__KERNEL__


82 
	#PAGE_BITS
 (
PAGE_SIZE
 << 3)

	)

83 
	#PAGE_BIT_SHIFT
 (
PAGE_SHIFT
 + 3)

	)

85 
__u16
 
	tb™m­_couÁ”_t
;

86 
	#COUNTER_BITS
 16

	)

87 
	#COUNTER_BIT_SHIFT
 4

	)

88 
	#COUNTER_BYTE_RATIO
 (
COUNTER_BITS
 / 8)

	)

89 
	#COUNTER_BYTE_SHIFT
 (
COUNTER_BIT_SHIFT
 - 3)

	)

91 
	#NEEDED_MASK
 ((
b™m­_couÁ”_t
è(1 << (
COUNTER_BITS
 - 1)))

	)

92 
	#RESYNC_MASK
 ((
b™m­_couÁ”_t
è(1 << (
COUNTER_BITS
 - 2)))

	)

93 
	#COUNTER_MAX
 ((
b™m­_couÁ”_t
è
RESYNC_MASK
 - 1)

	)

94 
	#NEEDED
(
x
è(((
b™m­_couÁ”_t
èxè& 
NEEDED_MASK
)

	)

95 
	#RESYNC
(
x
è(((
b™m­_couÁ”_t
èxè& 
RESYNC_MASK
)

	)

96 
	#COUNTER
(
x
è(((
b™m­_couÁ”_t
èxè& 
COUNTER_MAX
)

	)

99 
	#PAGE_COUNTER_RATIO
 (
PAGE_BITS
 / 
COUNTER_BITS
)

	)

101 
	#PAGE_COUNTER_SHIFT
 (
PAGE_BIT_SHIFT
 - 
COUNTER_BIT_SHIFT
)

	)

103 
	#PAGE_COUNTER_MASK
 (
PAGE_COUNTER_RATIO
 - 1)

	)

105 
	#BITMAP_BLOCK_SIZE
 512

	)

106 
	#BITMAP_BLOCK_SHIFT
 9

	)

109 
	#CHUNK_BLOCK_RATIO
(
b™m­
è((b™m­)->
chunksize
 >> 
BITMAP_BLOCK_SHIFT
)

	)

110 
	#CHUNK_BLOCK_SHIFT
(
b™m­
è((b™m­)->
chunkshiá
 - 
BITMAP_BLOCK_SHIFT
)

	)

111 
	#CHUNK_BLOCK_MASK
(
b™m­
è(
	`CHUNK_BLOCK_RATIO
(b™m­è- 1)

	)

115 
	#PAGEPTR_BLOCK_RATIO
(
b™m­
) \

116 (
	`CHUNK_BLOCK_RATIO
(
b™m­
è<< 
PAGE_COUNTER_SHIFT
 >> 1)

	)

117 
	#PAGEPTR_BLOCK_SHIFT
(
b™m­
) \

118 (
	`CHUNK_BLOCK_SHIFT
(
b™m­
è+ 
PAGE_COUNTER_SHIFT
 - 1)

	)

119 
	#PAGEPTR_BLOCK_MASK
(
b™m­
è(
	`PAGEPTR_BLOCK_RATIO
(b™m­è- 1)

	)

129 
	#CHUNK_BIT_OFFSET
(
chunk
è((chunkè+ ((
b™m­_su³r_t
è<< 3))

	)

137 
	#BITMAP_MAGIC
 0x6d746962

	)

140 
	eb™m­_¡©e
 {

141 
	mBITMAP_ACTIVE
 = 0x001,

142 
	mBITMAP_STALE
 = 0x002

146 
	sb™m­_su³r_s
 {

147 
__u32
 
	mmagic
;

148 
__u32
 
	mv”siÚ
;

149 
__u8
 
	muuid
[16];

150 
__u64
 
	mev’ts
;

151 
__u64
 
	mev’ts_ş—»d
;

152 
__u64
 
	msync_size
;

153 
__u32
 
	m¡©e
;

154 
__u32
 
	mchunksize
;

155 
__u32
 
	md«mÚ_¦“p
;

156 
__u32
 
	mwr™e_behšd
;

158 
__u8
 
	m·d
[256 - 64];

159 } 
	tb™m­_su³r_t
;

175 #ifdeà
__KERNEL__


178 
	sb™m­_·ge
 {

182 *
	mm­
;

187 
	mhijacked
;

191 
	mcouÁ
;

195 
	s·ge_li¡
 {

196 
li¡_h—d
 
	mli¡
;

197 
·ge
 *
	m·ge
;

201 
	sb™m­
 {

202 
b™m­_·ge
 *
	mbp
;

203 
	m·ges
;

204 
	mmissšg_·ges
;

206 
mddev_t
 *
	mmddev
;

208 
	mcouÁ”_b™s
;

211 
	mchunksize
;

212 
	mchunkshiá
;

213 
	mchunks
;

220 
	msyncchunk
;

222 
__u64
 
	mev’ts_ş—»d
;

225 
¥šlock_t
 
	mlock
;

227 
fe
 *
	mfe
;

228 
·ge
 *
	msb_·ge
;

229 
·ge
 **
	mfem­
;

230 *
	mfem­_©Œ
;

231 
	mfe_·ges
;

233 
	mæags
;

239 
mdk_th»ad_t
 *
	md«mÚ
;

240 
	md«mÚ_¦“p
;

251 
mdk_th»ad_t
 *
	mwr™e_d«mÚ
;

252 
mdk_th»ad_t
 *
	mwr™eback_d«mÚ
;

253 
¥šlock_t
 
	mwr™e_lock
;

254 
£m­hÜe
 
	mwr™e_»ady
;

255 
£m­hÜe
 
	mwr™e_dÚe
;

256 
	mwr™es_³ndšg
;

257 
wa™_queue_h—d_t
 
	mwr™e_wa™
;

258 
li¡_h—d
 
	mwr™e_·ges
;

259 
li¡_h—d
 
	mcom¶‘e_·ges
;

260 
mempoŞ_t
 *
	mwr™e_poŞ
;

266 
b™m­_ü—‹
(
mddev_t
 *
mddev
);

267 
b™m­_de¡roy
(
mddev_t
 *
mddev
);

268 
b™m­_aùive
(
b™m­
 *bitmap);

270 *
fe_·th
(
fe
 *fe, *
buf
, 
couÁ
);

271 
b™m­_´št_sb
(
b™m­
 *bitmap);

272 
b™m­_upd©e_sb
(
b™m­
 *bitmap);

274 
b™m­_£Îb™s
(
b™m­
 *bitmap);

277 
b™m­_¡¬twr™e
(
b™m­
 *b™m­, 
£ùÜ_t
 
off£t
, 
£ùÜs
);

278 
b™m­_’dwr™e
(
b™m­
 *b™m­, 
£ùÜ_t
 
off£t
, 
£ùÜs
,

279 
sucûss
);

280 
b™m­_¡¬t_sync
(
b™m­
 *b™m­, 
£ùÜ_t
 
off£t
, *
blocks
);

281 
b™m­_’d_sync
(
b™m­
 *b™m­, 
£ùÜ_t
 
off£t
, *
blocks
, 
abÜ‹d
);

282 
b™m­_şo£_sync
(
b™m­
 *bitmap);

284 
b™m­_uÅlug
(
b™m­
 *bitmap);

	@libmdadm/build/CMakeFiles/2.8.12.2/CompilerIdCXX/CMakeCXXCompilerId.cpp

4 #iâdeà
__ılu¥lus


11 #ià
defšed
(
__COMO__
)

12 
	#COMPILER_ID
 "Com—u"

	)

14 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__COMO_VERSION__
 / 100)

	)

15 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__COMO_VERSION__
 % 100)

	)

17 #–ià
defšed
(
__INTEL_COMPILER
è|| defšed(
__ICC
)

18 
	#COMPILER_ID
 "IÁ–"

	)

20 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_COMPILER
/100)

	)

21 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_COMPILER
/10 % 10)

	)

22 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER
 % 10)

	)

23 #ià
defšed
(
__INTEL_COMPILER_BUILD_DATE
)

25 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__INTEL_COMPILER_BUILD_DATE
)

	)

28 #–ià
defšed
(
__PATHCC__
)

29 
	#COMPILER_ID
 "P©hSÿË"

	)

30 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PATHCC__
)

	)

31 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PATHCC_MINOR__
)

	)

32 #ià
defšed
(
__PATHCC_PATCHLEVEL__
)

33 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PATHCC_PATCHLEVEL__
)

	)

36 #–ià
defšed
(
__şªg__
)

37 
	#COMPILER_ID
 "CÏng"

	)

38 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__şªg_majÜ__
)

	)

39 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__şªg_mšÜ__
)

	)

40 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__şªg_·tchËv–__
)

	)

42 #–ià
defšed
(
__BORLANDC__
è&& defšed(
__CODEGEARC_VERSION__
)

43 
	#COMPILER_ID
 "Emb¬ÿd”o"

	)

44 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>24 & 0x00FF)

	)

45 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>16 & 0x00FF)

	)

46 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__CODEGEARC_VERSION__
 & 0xFFFF)

	)

48 #–ià
defšed
(
__BORLANDC__
)

49 
	#COMPILER_ID
 "BÜÏnd"

	)

51 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__BORLANDC__
>>8)

	)

52 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__BORLANDC__
 & 0xFF)

	)

54 #–ià
defšed
(
__WATCOMC__
)

55 
	#COMPILER_ID
 "W©com"

	)

57 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__WATCOMC__
 / 100)

	)

58 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__WATCOMC__
 % 100)

	)

60 #–ià
defšed
(
__SUNPRO_CC
)

61 
	#COMPILER_ID
 "SunPro"

	)

62 #ià
__SUNPRO_CC
 >= 0x5100

64 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_CC
>>12)

	)

65 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_CC
>>4 & 0xFF)

	)

66 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_CC
 & 0xF)

	)

69 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_CC
>>8)

	)

70 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_CC
>>4 & 0xF)

	)

71 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_CC
 & 0xF)

	)

74 #–ià
defšed
(
__HP_aCC
)

75 
	#COMPILER_ID
 "HP"

	)

77 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__HP_aCC
/10000)

	)

78 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__HP_aCC
/100 % 100)

	)

79 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__HP_aCC
 % 100)

	)

81 #–ià
defšed
(
__DECCXX
)

82 
	#COMPILER_ID
 "Com·q"

	)

84 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__DECCXX_VER
/10000000)

	)

85 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__DECCXX_VER
/100000 % 100)

	)

86 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__DECCXX_VER
 % 10000)

	)

88 #–ià
defšed
(
__IBMCPP__
)

89 #ià
defšed
(
__COMPILER_VER__
)

90 
	#COMPILER_ID
 "zOS"

	)

92 #ià
__IBMCPP__
 >= 800

93 
	#COMPILER_ID
 "XL"

	)

95 
	#COMPILER_ID
 "Visu®Age"

	)

98 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMCPP__
/100)

	)

99 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMCPP__
/10 % 10)

	)

100 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMCPP__
 % 10)

	)

103 #–ià
defšed
(
__PGI
)

104 
	#COMPILER_ID
 "PGI"

	)

105 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PGIC__
)

	)

106 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PGIC_MINOR__
)

	)

107 #ià
defšed
(
__PGIC_PATCHLEVEL__
)

108 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PGIC_PATCHLEVEL__
)

	)

111 #–ià
defšed
(
_CRAYC
)

112 
	#COMPILER_ID
 "C¿y"

	)

113 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_RELEASE
)

	)

114 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_RELEASE_MINOR
)

	)

116 #–ià
defšed
(
__TI_COMPILER_VERSION__
)

117 
	#COMPILER_ID
 "TI"

	)

119 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000000)

	)

120 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000 % 1000)

	)

121 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__TI_COMPILER_VERSION__
 % 1000)

	)

123 #–ià
defšed
(
__SCO_VERSION__
)

124 
	#COMPILER_ID
 "SCO"

	)

126 #–ià
defšed
(
__GNUC__
)

127 
	#COMPILER_ID
 "GNU"

	)

128 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

129 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

130 #ià
defšed
(
__GNUC_PATCHLEVEL__
)

131 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

134 #–ià
defšed
(
_MSC_VER
)

135 
	#COMPILER_ID
 "MSVC"

	)

137 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

138 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

139 #ià
defšed
(
_MSC_FULL_VER
)

140 #ià
_MSC_VER
 >= 1400

142 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 100000)

	)

145 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 10000)

	)

148 #ià
defšed
(
_MSC_BUILD
)

149 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
_MSC_BUILD
)

	)

153 #–ià
defšed
(
__VISUALDSPVERSION__
)

154 
	#COMPILER_ID
 "ADSP"

	)

156 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__VISUALDSPVERSION__
>>24)

	)

157 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__VISUALDSPVERSION__
>>16 & 0xFF)

	)

158 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__VISUALDSPVERSION__
>>8 & 0xFF)

	)

161 #–ià
defšed
(
__ADSPBLACKFIN__
è|| defšed(
__ADSPTS__
è|| defšed(
__ADSP21000__
)

162 
	#COMPILER_ID
 "ADSP"

	)

166 #–ià
defšed
(
__IAR_SYSTEMS_ICC__
 ) || defšed(
__IAR_SYSTEMS_ICC
)

167 
	#COMPILER_ID
 "IAR"

	)

169 #–ià
defšed
(
_SGI_COMPILER_VERSION
è|| defšed(
_COMPILER_VERSION
)

170 
	#COMPILER_ID
 "MIPS´o"

	)

171 #ià
defšed
(
_SGI_COMPILER_VERSION
)

173 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_SGI_COMPILER_VERSION
/100)

	)

174 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_SGI_COMPILER_VERSION
/10 % 10)

	)

175 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_SGI_COMPILER_VERSION
 % 10)

	)

178 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_COMPILER_VERSION
/100)

	)

179 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_COMPILER_VERSION
/10 % 10)

	)

180 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_COMPILER_VERSION
 % 10)

	)

186 #–ià
defšed
(
__sgi
)

187 
	#COMPILER_ID
 "MIPS´o"

	)

189 #–ià
defšed
(
__hpux
è|| defšed(
__hpua
)

190 
	#COMPILER_ID
 "HP"

	)

193 
	#COMPILER_ID
 ""

	)

201 cÚ¡* 
	gšfo_comp”
 = "INFO" ":" "comp”[" 
COMPILER_ID
 "]";

204 #ià
defšed
(
__lšux
è|| defšed(
__lšux__
è|| defšed(
lšux
)

205 
	#PLATFORM_ID
 "Lšux"

	)

207 #–ià
defšed
(
__CYGWIN__
)

208 
	#PLATFORM_ID
 "Cygwš"

	)

210 #–ià
defšed
(
__MINGW32__
)

211 
	#PLATFORM_ID
 "MšGW"

	)

213 #–ià
defšed
(
__APPLE__
)

214 
	#PLATFORM_ID
 "D¬wš"

	)

216 #–ià
defšed
(
_WIN32
è|| defšed(
__WIN32__
è|| defšed(
WIN32
)

217 
	#PLATFORM_ID
 "Wšdows"

	)

219 #–ià
defšed
(
__F»eBSD__
è|| defšed(
__F»eBSD
)

220 
	#PLATFORM_ID
 "F»eBSD"

	)

222 #–ià
defšed
(
__N‘BSD__
è|| defšed(
__N‘BSD
)

223 
	#PLATFORM_ID
 "N‘BSD"

	)

225 #–ià
defšed
(
__O³nBSD__
è|| defšed(
__OPENBSD
)

226 
	#PLATFORM_ID
 "O³nBSD"

	)

228 #–ià
defšed
(
__sun
è|| defšed(
sun
)

229 
	#PLATFORM_ID
 "SunOS"

	)

231 #–ià
defšed
(
_AIX
è|| defšed(
__AIX
è|| defšed(
__AIX__
è|| defšed(
__aix
è|| defšed(
__aix__
)

232 
	#PLATFORM_ID
 "AIX"

	)

234 #–ià
defšed
(
__sgi
è|| defšed(
__sgi__
è|| defšed(
_SGI
)

235 
	#PLATFORM_ID
 "IRIX"

	)

237 #–ià
defšed
(
__hpux
è|| defšed(
__hpux__
)

238 
	#PLATFORM_ID
 "HP-UX"

	)

240 #–ià
defšed
(
__HAIKU__
)

241 
	#PLATFORM_ID
 "Haiku"

	)

243 #–ià
defšed
(
__BeOS
è|| defšed(
__BEOS__
è|| defšed(
_BEOS
)

244 
	#PLATFORM_ID
 "BeOS"

	)

246 #–ià
defšed
(
__QNX__
è|| defšed(
__QNXNTO__
)

247 
	#PLATFORM_ID
 "QNX"

	)

249 #–ià
defšed
(
__Œu64
è|| defšed(
_Œu64
è|| defšed(
__TRU64__
)

250 
	#PLATFORM_ID
 "Tru64"

	)

252 #–ià
defšed
(
__riscos
è|| defšed(
__riscos__
)

253 
	#PLATFORM_ID
 "RISCos"

	)

255 #–ià
defšed
(
__sšix
è|| defšed(
__sšix__
è|| defšed(
__SINIX__
)

256 
	#PLATFORM_ID
 "SINIX"

	)

258 #–ià
defšed
(
__UNIX_SV__
)

259 
	#PLATFORM_ID
 "UNIX_SV"

	)

261 #–ià
defšed
(
__bsdos__
)

262 
	#PLATFORM_ID
 "BSDOS"

	)

264 #–ià
defšed
(
_MPRAS
è|| defšed(
MPRAS
)

265 
	#PLATFORM_ID
 "MP-RAS"

	)

267 #–ià
defšed
(
__osf
è|| defšed(
__osf__
)

268 
	#PLATFORM_ID
 "OSF1"

	)

270 #–ià
defšed
(
_SCO_SV
è|| defšed(
SCO_SV
è|| defšed(
sco_sv
)

271 
	#PLATFORM_ID
 "SCO_SV"

	)

273 #–ià
defšed
(
__uÉrix
è|| defšed(
__uÉrix__
è|| defšed(
_ULTRIX
)

274 
	#PLATFORM_ID
 "ULTRIX"

	)

276 #–ià
defšed
(
__XENIX__
è|| defšed(
_XENIX
è|| defšed(
XENIX
)

277 
	#PLATFORM_ID
 "X’ix"

	)

280 
	#PLATFORM_ID
 ""

	)

289 #ià
defšed
(
_WIN32
è&& defšed(
_MSC_VER
)

290 #ià
defšed
(
_M_IA64
)

291 
	#ARCHITECTURE_ID
 "IA64"

	)

293 #–ià
defšed
(
_M_X64
è|| defšed(
_M_AMD64
)

294 
	#ARCHITECTURE_ID
 "x64"

	)

296 #–ià
defšed
(
_M_IX86
)

297 
	#ARCHITECTURE_ID
 "X86"

	)

299 #–ià
defšed
(
_M_ARM
)

300 
	#ARCHITECTURE_ID
 "ARM"

	)

302 #–ià
defšed
(
_M_MIPS
)

303 
	#ARCHITECTURE_ID
 "MIPS"

	)

305 #–ià
defšed
(
_M_SH
)

306 
	#ARCHITECTURE_ID
 "SHx"

	)

309 
	#ARCHITECTURE_ID
 ""

	)

313 
	#ARCHITECTURE_ID
 ""

	)

317 
	#DEC
(
n
) \

318 ('0' + (((
n
) / 10000000)%10)), \

319 ('0' + (((
n
) / 1000000)%10)), \

320 ('0' + (((
n
) / 100000)%10)), \

321 ('0' + (((
n
) / 10000)%10)), \

322 ('0' + (((
n
) / 1000)%10)), \

323 ('0' + (((
n
) / 100)%10)), \

324 ('0' + (((
n
) / 10)%10)), \

325 ('0' + ((
n
è% 10))

	)

328 
	#HEX
(
n
) \

329 ('0' + ((
n
)>>28 & 0xF)), \

330 ('0' + ((
n
)>>24 & 0xF)), \

331 ('0' + ((
n
)>>20 & 0xF)), \

332 ('0' + ((
n
)>>16 & 0xF)), \

333 ('0' + ((
n
)>>12 & 0xF)), \

334 ('0' + ((
n
)>>8 & 0xF)), \

335 ('0' + ((
n
)>>4 & 0xF)), \

336 ('0' + ((
n
è& 0xF))

	)

339 #ifdeà
COMPILER_VERSION_MAJOR


340 cÚ¡ 
	gšfo_v”siÚ
[] = {

343 
COMPILER_VERSION_MAJOR
,

344 #ifdeà
COMPILER_VERSION_MINOR


345 '.', 
COMPILER_VERSION_MINOR
,

346 #ifdeà
COMPILER_VERSION_PATCH


347 '.', 
COMPILER_VERSION_PATCH
,

348 #ifdeà
COMPILER_VERSION_TWEAK


349 '.', 
COMPILER_VERSION_TWEAK
,

360 cÚ¡* 
	gšfo_¶©fÜm
 = "INFO" ":" "¶©fÜm[" 
PLATFORM_ID
 "]";

361 cÚ¡* 
	gšfo_¬ch
 = "INFO" ":" "¬ch[" 
ARCHITECTURE_ID
 "]";

367 
	$maš
(
¬gc
, * 
¬gv
[])

369 
»quœe
 = 0;

370 
»quœe
 +ğ
šfo_comp”
[
¬gc
];

371 
»quœe
 +ğ
šfo_¶©fÜm
[
¬gc
];

372 #ifdeà
COMPILER_VERSION_MAJOR


373 
»quœe
 +ğ
šfo_v”siÚ
[
¬gc
];

375 ()
¬gv
;

376  
»quœe
;

377 
	}
}

	@libmdadm/crc32.h

5 
loÿl
 cÚ¡ 
FAR
 
	güc_bË
[
TBLS
][256] =

60 #ifdeà
BYFOUR


	@libmdadm/dlink.h

5 
	s__dl_h—d


7 * 
	mdh_´ev
;

8 * 
	mdh_Ãxt
;

11 
	#dl_®loc
(
size
è((*)(((*)
	`xÿÎoc
(1,(size)+(
__dl_h—d
)))+(__dl_h—d)))

	)

12 
	#dl_Ãw
(
t
è(Ñ*)
	`dl_®loc
(Ñ)))

	)

13 
	#dl_Ãwv
(
t
,
n
è(Ñ*)
	`dl_®loc
(Ñ)*n))

	)

15 
	#dl_Ãxt
(
p
è*(&(((
__dl_h—d
*)Õ))[-1].
dh_Ãxt
))

	)

16 
	#dl_´ev
(
p
è*(&(((
__dl_h—d
*)Õ))[-1].
dh_´ev
))

	)

18 *
dl_h—d
();

19 *
dl_¡rdup
(*);

20 *
dl_¡ºdup
(*, );

21 
dl_š£¹
(*, *);

22 
dl_add
(*, *);

23 
dl_d–
(*);

24 
dl_ä“
(*);

25 
dl_š™
(*);

	@libmdadm/md_p.h

15 #iâdeà
_MD_P_H


16 
	#_MD_P_H


	)

44 
	#MD_RESERVED_BYTES
 (64 * 1024)

	)

45 
	#MD_RESERVED_SECTORS
 (
MD_RESERVED_BYTES
 / 512)

	)

46 
	#MD_RESERVED_BLOCKS
 (
MD_RESERVED_BYTES
 / 
BLOCK_SIZE
)

	)

48 
	#MD_NEW_SIZE_SECTORS
(
x
è((x & ~(
MD_RESERVED_SECTORS
 - 1)è- MD_RESERVED_SECTORS)

	)

49 
	#MD_NEW_SIZE_BLOCKS
(
x
è((x & ~(
MD_RESERVED_BLOCKS
 - 1)è- MD_RESERVED_BLOCKS)

	)

51 
	#MD_SB_BYTES
 4096

	)

52 
	#MD_SB_WORDS
 (
MD_SB_BYTES
 / 4)

	)

53 
	#MD_SB_BLOCKS
 (
MD_SB_BYTES
 / 
BLOCK_SIZE
)

	)

54 
	#MD_SB_SECTORS
 (
MD_SB_BYTES
 / 512)

	)

59 
	#MD_SB_GENERIC_OFFSET
 0

	)

60 
	#MD_SB_PERSONALITY_OFFSET
 64

	)

61 
	#MD_SB_DISKS_OFFSET
 128

	)

62 
	#MD_SB_DESCRIPTOR_OFFSET
 992

	)

64 
	#MD_SB_GENERIC_CONSTANT_WORDS
 32

	)

65 
	#MD_SB_GENERIC_STATE_WORDS
 32

	)

66 
	#MD_SB_GENERIC_WORDS
 (
MD_SB_GENERIC_CONSTANT_WORDS
 + 
MD_SB_GENERIC_STATE_WORDS
)

	)

67 
	#MD_SB_PERSONALITY_WORDS
 64

	)

68 
	#MD_SB_DESCRIPTOR_WORDS
 32

	)

69 
	#MD_SB_DISKS
 27

	)

70 
	#MD_SB_DISKS_WORDS
 (
MD_SB_DISKS
*
MD_SB_DESCRIPTOR_WORDS
)

	)

71 
	#MD_SB_RESERVED_WORDS
 (1024 - 
MD_SB_GENERIC_WORDS
 - 
MD_SB_PERSONALITY_WORDS
 - 
MD_SB_DISKS_WORDS
 - 
MD_SB_DESCRIPTOR_WORDS
)

	)

72 
	#MD_SB_EQUAL_WORDS
 (
MD_SB_GENERIC_WORDS
 + 
MD_SB_PERSONALITY_WORDS
 + 
MD_SB_DISKS_WORDS
)

	)

77 
	#MD_DISK_FAULTY
 0

	)

78 
	#MD_DISK_ACTIVE
 1

	)

79 
	#MD_DISK_SYNC
 2

	)

80 
	#MD_DISK_REMOVED
 3

	)

82 
	#MD_DISK_WRITEMOSTLY
 9

	)

87 
	#MD_DISK_REPLACEMENT
 17

	)

89 
	smdp_deviû_desütÜ_s
 {

90 
__u32
 
	mnumb”
;

91 
__u32
 
	mmajÜ
;

92 
__u32
 
	mmšÜ
;

93 
__u32
 
	m¿id_disk
;

94 
__u32
 
	m¡©e
;

95 
__u32
 
	m»£rved
[
MD_SB_DESCRIPTOR_WORDS
 - 5];

96 } 
	tmdp_disk_t
;

98 
	#MD_SB_MAGIC
 0xa92b4efc

	)

103 
	#MD_SB_CLEAN
 0

	)

104 
	#MD_SB_ERRORS
 1

	)

105 
	#MD_SB_BBM_ERRORS
 2

	)

106 
	#MD_SB_BLOCK_CONTAINER_RESHAPE
 3

	)

107 
	#MD_SB_BLOCK_VOLUME
 4

	)

109 
	#MD_SB_BITMAP_PRESENT
 8

	)

111 
	smdp_su³rblock_s
 {

115 
__u32
 
	mmd_magic
;

116 
__u32
 
	mmajÜ_v”siÚ
;

117 
__u32
 
	mmšÜ_v”siÚ
;

118 
__u32
 
	m·tch_v”siÚ
;

119 
__u32
 
	mgv®id_wÜds
;

120 
__u32
 
	m£t_uuid0
;

121 
__u32
 
	mùime
;

122 
__u32
 
	mËv–
;

123 
__u32
 
	msize
;

124 
__u32
 
	mÄ_disks
;

125 
__u32
 
	m¿id_disks
;

126 
__u32
 
	mmd_mšÜ
;

127 
__u32
 
	mnÙ_³rsi¡’t
;

128 
__u32
 
	m£t_uuid1
;

129 
__u32
 
	m£t_uuid2
;

130 
__u32
 
	m£t_uuid3
;

131 
__u32
 
	mg¡©e_üe£rved
[
MD_SB_GENERIC_CONSTANT_WORDS
 - 16];

136 
__u32
 
	mutime
;

137 
__u32
 
	m¡©e
;

138 
__u32
 
	maùive_disks
;

139 
__u32
 
	mwÜkšg_disks
;

140 
__u32
 
	mçed_disks
;

141 
__u32
 
	m¥¬e_disks
;

142 
__u32
 
	msb_csum
;

143 #ià 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


144 
__u32
 
	mev’ts_hi
;

145 
__u32
 
	mev’ts_lo
;

146 
__u32
 
	mı_ev’ts_hi
;

147 
__u32
 
	mı_ev’ts_lo
;

149 
__u32
 
	mev’ts_lo
;

150 
__u32
 
	mev’ts_hi
;

151 
__u32
 
	mı_ev’ts_lo
;

152 
__u32
 
	mı_ev’ts_hi
;

154 
__u32
 
	m»cov”y_ı
;

156 
__u64
 
	m»sh­e_pos™iÚ
;

157 
__u32
 
	mÃw_Ëv–
;

158 
__u32
 
	md–_disks
;

159 
__u32
 
	mÃw_Ïyout
;

160 
__u32
 
	mÃw_chunk
;

161 
__u32
 
	mg¡©e_¤e£rved
[
MD_SB_GENERIC_STATE_WORDS
 - 18];

166 
__u32
 
	mÏyout
;

167 
__u32
 
	mchunk_size
;

168 
__u32
 
	mroÙ_pv
;

169 
__u32
 
	mroÙ_block
;

170 
__u32
 
	mp¡©e_»£rved
[
MD_SB_PERSONALITY_WORDS
 - 4];

175 
mdp_disk_t
 
	mdisks
[
MD_SB_DISKS
];

180 
__u32
 
	m»£rved
[
MD_SB_RESERVED_WORDS
];

185 
mdp_disk_t
 
	mthis_disk
;

187 } 
	tmdp_su³r_t
;

189 #ifdeà
__TINYC__


190 
	t__u64
;

193 
šlše
 
__u64
 
	$md_ev’t
(
mdp_su³r_t
 *
sb
) {

194 
__u64
 
ev
 = 
sb
->
ev’ts_hi
;

195  (
ev
<<32)| 
sb
->
ev’ts_lo
;

196 
	}
}

	@libmdadm/md_u.h

15 #iâdeà
_MD_U_H


16 
	#_MD_U_H


	)

21 
	#RAID_VERSION
 
	`_IOR
 (
MD_MAJOR
, 0x10, 
mdu_v”siÚ_t
)

	)

22 
	#GET_ARRAY_INFO
 
	`_IOR
 (
MD_MAJOR
, 0x11, 
mdu_¬¿y_šfo_t
)

	)

23 
	#GET_DISK_INFO
 
	`_IOR
 (
MD_MAJOR
, 0x12, 
mdu_disk_šfo_t
)

	)

24 
	#PRINT_RAID_DEBUG
 
	`_IO
 (
MD_MAJOR
, 0x13)

	)

25 
	#RAID_AUTORUN
 
	`_IO
 (
MD_MAJOR
, 0x14)

	)

26 
	#GET_BITMAP_FILE
 
	`_IOR
 (
MD_MAJOR
, 0x15, 
mdu_b™m­_fe_t
)

	)

29 
	#CLEAR_ARRAY
 
	`_IO
 (
MD_MAJOR
, 0x20)

	)

30 
	#ADD_NEW_DISK
 
	`_IOW
 (
MD_MAJOR
, 0x21, 
mdu_disk_šfo_t
)

	)

31 
	#HOT_REMOVE_DISK
 
	`_IO
 (
MD_MAJOR
, 0x22)

	)

32 
	#SET_ARRAY_INFO
 
	`_IOW
 (
MD_MAJOR
, 0x23, 
mdu_¬¿y_šfo_t
)

	)

33 
	#SET_DISK_INFO
 
	`_IO
 (
MD_MAJOR
, 0x24)

	)

34 
	#WRITE_RAID_INFO
 
	`_IO
 (
MD_MAJOR
, 0x25)

	)

35 
	#UNPROTECT_ARRAY
 
	`_IO
 (
MD_MAJOR
, 0x26)

	)

36 
	#PROTECT_ARRAY
 
	`_IO
 (
MD_MAJOR
, 0x27)

	)

37 
	#HOT_ADD_DISK
 
	`_IO
 (
MD_MAJOR
, 0x28)

	)

38 
	#SET_DISK_FAULTY
 
	`_IO
 (
MD_MAJOR
, 0x29)

	)

39 
	#SET_BITMAP_FILE
 
	`_IOW
 (
MD_MAJOR
, 0x2b, )

	)

42 
	#RUN_ARRAY
 
	`_IOW
 (
MD_MAJOR
, 0x30, 
mdu_·¿m_t
)

	)

43 
	#START_ARRAY
 
	`_IO
 (
MD_MAJOR
, 0x31)

	)

44 
	#STOP_ARRAY
 
	`_IO
 (
MD_MAJOR
, 0x32)

	)

45 
	#STOP_ARRAY_RO
 
	`_IO
 (
MD_MAJOR
, 0x33)

	)

46 
	#RESTART_ARRAY_RW
 
	`_IO
 (
MD_MAJOR
, 0x34)

	)

48 
	smdu_v”siÚ_s
 {

49 
	mmajÜ
;

50 
	mmšÜ
;

51 
	m·tchËv–
;

52 } 
	tmdu_v”siÚ_t
;

54 
	smdu_¬¿y_šfo_s
 {

58 
	mmajÜ_v”siÚ
;

59 
	mmšÜ_v”siÚ
;

60 
	m·tch_v”siÚ
;

61 
	mùime
;

62 
	mËv–
;

63 
	msize
;

64 
	mÄ_disks
;

65 
	m¿id_disks
;

66 
	mmd_mšÜ
;

67 
	mnÙ_³rsi¡’t
;

72 
	mutime
;

73 
	m¡©e
;

74 
	maùive_disks
;

75 
	mwÜkšg_disks
;

76 
	mçed_disks
;

77 
	m¥¬e_disks
;

82 
	mÏyout
;

83 
	mchunk_size
;

85 } 
	tmdu_¬¿y_šfo_t
;

87 
	smdu_disk_šfo_s
 {

91 
	mnumb”
;

92 
	mmajÜ
;

93 
	mmšÜ
;

94 
	m¿id_disk
;

95 
	m¡©e
;

97 } 
	tmdu_disk_šfo_t
;

99 
	smdu_¡¬t_šfo_s
 {

103 
	mmajÜ
;

104 
	mmšÜ
;

105 
	m¿id_disk
;

106 
	m¡©e
;

108 } 
	tmdu_¡¬t_šfo_t
;

110 
	smdu_b™m­_fe_s


112 
	m·thÇme
[4096];

113 } 
	tmdu_b™m­_fe_t
;

115 
	smdu_·¿m_s


117 
	m³rsÚ®™y
;

118 
	mchunk_size
;

119 
	mmax_çuÉ
;

120 } 
	tmdu_·¿m_t
;

	@libmdadm/mdadm.h

25 
	#_GNU_SOURCE


	)

26 
	#_FILE_OFFSET_BITS
 64

	)

27 
	~<uni¡d.h
>

28 #ifdeà
__GLIBC__


29 
__off64_t
 
l£ek64
 
__P
 ((
__fd
, __off64_ˆ
__off£t
, 
__wh’û
));

30 #–ià!
defšed
(
l£ek64
)

31 #ià
defšed
(
__NO_STAT64
è|| 
__WORDSIZE
 != 32

32 
	#l£ek64
 
l£ek


	)

36 
	~<sys/ty³s.h
>

37 
	~<sys/¡©.h
>

38 
	~<¡dlib.h
>

39 
	~<time.h
>

40 
	~<sys/time.h
>

41 
	~<g‘İt.h
>

42 
	~<fú.h
>

43 
	~<¡dio.h
>

44 
	~<”ºo.h
>

45 
	~<¡ršg.h
>

46 
	~<sy¦og.h
>

47 #ifdeà
__d›ibc__


48 
	~<¡ršgs.h
>

50 
	#¿ndom
 
¿nd


	)

51 
	#¤ªdom
 
¤ªd


	)

54 
	~<lšux/kdev_t.h
>

56 
	~<sys/mouÁ.h
>

57 
	~<asm/ty³s.h
>

58 
	~<sys/ioùl.h
>

59 
	#MD_MAJOR
 9

	)

60 
	#MdpMšÜShiá
 6

	)

62 #iâdeà
BLKGETSIZE64


63 
	#BLKGETSIZE64
 
	`_IOR
(0x12,114,
size_t
è

	)

66 
	#DEFAULT_CHUNK
 512

	)

67 
	#DEFAULT_BITMAP_CHUNK
 4096

	)

68 
	#DEFAULT_BITMAP_DELAY
 5

	)

69 
	#DEFAULT_MAX_WRITE_BEHIND
 256

	)

75 #iâdeà
MAP_DIR


76 
	#MAP_DIR
 "/run/mdadm"

	)

81 #iâdeà
MAP_FILE


82 
	#MAP_FILE
 "m­"

	)

92 #iâdeà
MDMON_DIR


93 
	#MDMON_DIR
 "/run/mdadm"

	)

100 #iâdeà
FAILED_SLOTS_DIR


101 
	#FAILED_SLOTS_DIR
 "/run/mdadm/çed-¦Ùs"

	)

104 
	~"md_u.h
"

105 
	~"md_p.h
"

106 
	~"b™m­.h
"

107 
	~"msg.h
"

108 
	~"mdadm_”rcode.h
"

109 
	~"mdadm_Ùh”.h
"

111 
	~<’dŸn.h
>

117 
	#bsw­_16
(
x
) (((x) & 0x00ffU) << 8 | \

118 ((
x
è& 0xff00Uè>> 8)

	)

119 
	#bsw­_32
(
x
) (((x) & 0x000000ffU) << 24 | \

120 ((
x
) & 0xff000000U) >> 24 | \

121 ((
x
) & 0x0000ff00U) << 8 | \

122 ((
x
è& 0x00ff0000Uè>> 8)

	)

123 
	#bsw­_64
(
x
) (((x) & 0x00000000000000ffULL) << 56 | \

124 ((
x
) & 0xff00000000000000ULL) >> 56 | \

125 ((
x
) & 0x000000000000ff00ULL) << 40 | \

126 ((
x
) & 0x00ff000000000000ULL) >> 40 | \

127 ((
x
) & 0x0000000000ff0000ULL) << 24 | \

128 ((
x
) & 0x0000ff0000000000ULL) >> 24 | \

129 ((
x
) & 0x00000000ff000000ULL) << 8 | \

130 ((
x
è& 0x000000ff00000000ULLè>> 8)

	)

132 #ià!
defšed
(
__KLIBC__
)

133 #ià
BYTE_ORDER
 =ğ
LITTLE_ENDIAN


134 
	#__ıu_to_Ë16
(
_x
è()(_x)

	)

135 
	#__ıu_to_Ë32
(
_x
è()(_x)

	)

136 
	#__ıu_to_Ë64
(
_x
è()(_x)

	)

137 
	#__Ë16_to_ıu
(
_x
è()(_x)

	)

138 
	#__Ë32_to_ıu
(
_x
è()(_x)

	)

139 
	#__Ë64_to_ıu
(
_x
è()(_x)

	)

141 
	#__ıu_to_be16
(
_x
è
	`bsw­_16
(_x)

	)

142 
	#__ıu_to_be32
(
_x
è
	`bsw­_32
(_x)

	)

143 
	#__ıu_to_be64
(
_x
è
	`bsw­_64
(_x)

	)

144 
	#__be16_to_ıu
(
_x
è
	`bsw­_16
(_x)

	)

145 
	#__be32_to_ıu
(
_x
è
	`bsw­_32
(_x)

	)

146 
	#__be64_to_ıu
(
_x
è
	`bsw­_64
(_x)

	)

147 #–ià
BYTE_ORDER
 =ğ
BIG_ENDIAN


148 
	#__ıu_to_Ë16
(
_x
è
	`bsw­_16
(_x)

	)

149 
	#__ıu_to_Ë32
(
_x
è
	`bsw­_32
(_x)

	)

150 
	#__ıu_to_Ë64
(
_x
è
	`bsw­_64
(_x)

	)

151 
	#__Ë16_to_ıu
(
_x
è
	`bsw­_16
(_x)

	)

152 
	#__Ë32_to_ıu
(
_x
è
	`bsw­_32
(_x)

	)

153 
	#__Ë64_to_ıu
(
_x
è
	`bsw­_64
(_x)

	)

155 
	#__ıu_to_be16
(
_x
è()(_x)

	)

156 
	#__ıu_to_be32
(
_x
è()(_x)

	)

157 
	#__ıu_to_be64
(
_x
è()(_x)

	)

158 
	#__be16_to_ıu
(
_x
è()(_x)

	)

159 
	#__be32_to_ıu
(
_x
è()(_x)

	)

160 
	#__be64_to_ıu
(
_x
è()(_x)

	)

171 
	#mš
(
x
, 
y
) ({ \

172 
	`ty³of
(
x
è
_mš1
 = (x); \

173 
	`ty³of
(
y
è
_mš2
 = (y); \

174 (è(&
_mš1
 =ğ&
_mš2
); \

175 
_mš1
 < 
_mš2
 ? _mš1 : _mš2; })

	)

177 
	#max
(
x
, 
y
) ({ \

178 
	`ty³of
(
x
è
_max1
 = (x); \

179 
	`ty³of
(
y
è
_max2
 = (y); \

180 (è(&
_max1
 =ğ&
_max2
); \

181 
_max1
 > 
_max2
 ? _max1 : _max2; })

	)

183 
	#ARRAY_SIZE
(
x
è((x)/(x[0]))

	)

186 
	smdšfo
 {

187 
mdu_¬¿y_šfo_t
 
	m¬¿y
;

188 
mdu_disk_šfo_t
 
	mdisk
;

189 
__u64
 
	mev’ts
;

190 
	muuid
[4];

191 
	mÇme
[33];

192 
	md©a_off£t
;

193 
	mÃw_d©a_off£t
;

194 
	mcompÚ’t_size
;

197 
	mcu¡om_¬¿y_size
;

200 
	#NO_RESHAPE
 0

	)

201 
	#VOLUME_RESHAPE
 1

	)

202 
	#CONTAINER_RESHAPE
 2

	)

203 
	#RESHAPE_NO_BACKUP
 16

	)

204 
	m»sh­e_aùive
;

205 
	m»sh­e_´og»ss
;

206 
	m»cov”y_blocked
;

218 
	m¥aû_befÜe
, 
	m¥aû_aá”
;

220 
	m»sync_¡¬t
;

221 
	m»cov”y_¡¬t
;

222 
	#MaxSeùÜ
 (~0ULLè

	)

224 
	mb™m­_off£t
;

225 
	m§ã_mode_d–ay
;

226 
	mÃw_Ëv–
, 
	md–_disks
, 
	mÃw_Ïyout
, 
	mÃw_chunk
;

227 
	m”rÜs
;

228 
	mÿche_size
;

229 
	mmism©ch_út
;

230 
	m‹xt_v”siÚ
[50];

232 
	mcÚš”_memb”
;

235 
	mcÚš”_’ough
;

238 
	msys_Çme
[20];

239 
mdšfo
 *
	mdevs
;

240 
mdšfo
 *
	mÃxt
;

243 
	m»cov”y_fd
;

244 
	m¡©e_fd
;

245 
	#DS_FAULTY
 1

	)

246 
	#DS_INSYNC
 2

	)

247 
	#DS_WRITE_MOSTLY
 4

	)

248 
	#DS_SPARE
 8

	)

249 
	#DS_BLOCKED
 16

	)

250 
	#DS_REMOVE
 1024

	)

251 
	#DS_UNBLOCK
 2048

	)

252 
	m´ev_¡©e
, 
	mcu¼_¡©e
, 
	mÃxt_¡©e
;

256 
	sü—‹šfo
 {

257 
	muid
;

258 
	mgid
;

259 
	mautof
;

260 
	mmode
;

261 
	msymlšks
;

262 
	mÇmes
;

263 
	mbbli¡
;

264 
su³¹y³
 *
	msu³¹y³
;

267 
	#Name
 "mdadm"

	)

269 
	emode
 {

270 
	mASSEMBLE
=1,

271 
	mBUILD
,

272 
	mCREATE
,

273 
	mMANAGE
,

274 
	mMISC
,

275 
	mMONITOR
,

276 
	mGROW
,

277 
	mINCREMENTAL
,

278 
	mAUTODETECT
,

279 
	mmode_couÁ


282 
	e´efix_¡ªd¬d
 {

283 
	mJEDEC
,

284 
	mIEC


297 
	#UnS‘
 (0xffã)

	)

298 
	smddev_id’t
 {

299 *
	mdevÇme
;

301 
	muuid_£t
;

302 
	muuid
[4];

303 
	mÇme
[33];

305 
	msu³r_mšÜ
;

307 *
	mdeviûs
;

310 
	mËv–
;

311 
	m¿id_disks
;

312 
	m¥¬e_disks
;

313 
su³¹y³
 *
	m¡
;

314 
	mautof
;

315 *
	m¥¬e_group
;

316 *
	mb™m­_fe
;

317 
	mb™m­_fd
;

319 *
	mcÚš”
;

324 *
	mmemb”
;

326 
mddev_id’t
 *
	mÃxt
;

329 
	mas£mbËd
;

333 
	scÚ‹xt
 {

334 
	m»adÚly
;

335 
	mrun¡İ
;

336 
	mv”bo£
;

337 
	mbr›f
;

338 
	mfÜû
;

339 *
	mhomeho¡
;

340 
	m»quœe_homeho¡
;

341 *
	m´eãr
;

342 
	m_expÜt
;

343 
	m‹¡
;

344 *
	msub¬¿y
;

345 *
	mupd©e
;

346 
	msÿn
;

347 
	mS·rcAdju¡
;

348 
	mautof
;

349 
	md–ay
;

350 
	mä“ze_»sh­e
;

351 *
	mbackup_fe
;

352 
	mšv®id_backup
;

353 *
	maùiÚ
;

356 
	ssh­e
 {

357 
	m¿iddisks
;

358 
	m¥¬edisks
;

359 
	mËv–
;

360 
	mÏyout
;

361 *
	mÏyout_¡r
;

362 
	mchunk
;

363 
	mb™m­_chunk
;

364 *
	mb™m­_fe
;

365 
	massume_ş—n
;

366 
	mwr™e_behšd
;

367 
	msize
;

371 
	smddev_dev
 {

372 *
	mdevÇme
;

373 
	mdi¥os™iÚ
;

377 
	mwr™emo¡ly
;

378 
	mu£d
;

379 
	md©a_off£t
;

380 
mddev_dev
 *
	mÃxt
;

383 
	sm­pšg
 {

384 *
	mÇme
;

385 
	mnum
;

386 } 
	tm­pšg_t
;

388 
	smd¡©_’t
 {

389 *
	mdev
;

390 
	mdevnm
[32];

391 
	maùive
;

392 *
	mËv–
;

393 *
	m·‰”n
;

394 
	m³rûÁ
;

395 
	m»sync
;

396 
	mdevút
;

397 
	m¿id_disks
;

398 * 
	mm‘ad©a_v”siÚ
;

399 
	sdev_memb”
 {

400 *
	mÇme
;

401 
dev_memb”
 *
	mÃxt
;

402 } *
	mmemb”s
;

403 
md¡©_’t
 *
	mÃxt
;

406 
md¡©_’t
 *
md¡©_»ad
(
hŞd
, 
¡¬t
);

407 
md¡©_şo£
();

408 
ä“_md¡©
(
md¡©_’t
 *
ms
);

409 
md¡©_wa™
(
£cÚds
);

410 
md¡©_wa™_fd
(
fd
, cÚ¡ 
sig£t_t
 *
sigmask
);

411 
mddev_busy
(*
devnm
);

412 
md¡©_’t
 *
md¡©_by_compÚ’t
(*
Çme
);

413 
md¡©_’t
 *
md¡©_by_subdev
(*
subdev
, *
cÚš”
);

415 
	sm­_’t
 {

416 
m­_’t
 *
	mÃxt
;

417 
	mdevnm
[32];

418 
	mm‘ad©a
[20];

419 
	muuid
[4];

420 
	mbad
;

421 *
	m·th
;

423 
m­_upd©e
(
m­_’t
 **
mµ
, *
devnm
, *
m‘ad©a
,

424 
uuid
[4], *
·th
);

425 
m­_»move
(
m­_’t
 **
m­
, *
devnm
);

426 
m­_’t
 *
m­_by_uuid
(m­_’ˆ**
m­
, 
uuid
[4]);

427 #ifdeà
MDASSEMBLE


428 
šlše
 
m­_’t
 *
	$m­_by_devnm
(
m­_’t
 **
m­
, *
Çme
)

430  
NULL
;

431 
	}
}

432 
šlše
 
	$m­_ä“
(
m­_’t
 *
m­
)

434 
	}
}

436 
m­_’t
 *
m­_by_devnm
(m­_’ˆ**
m­
, *
devnm
);

437 
m­_ä“
(
m­_’t
 *
m­
);

439 
m­_’t
 *
m­_by_Çme
(m­_’ˆ**
m­
, *
Çme
);

440 
m­_»ad
(
m­_’t
 **
m–p
);

441 
m­_wr™e
(
m­_’t
 *
m–
);

442 
m­_d–‘e
(
m­_’t
 **
m­p
, *
devnm
);

443 
m­_add
(
m­_’t
 **
m–p
,

444 *
devnm
, *
m‘ad©a
, 
uuid
[4], *
·th
);

445 
m­_lock
(
m­_’t
 **
m–p
);

446 
m­_uÆock
(
m­_’t
 **
m–p
);

447 
m­_fÜk
();

450 
	esysfs_»ad_æags
 {

451 
	mGET_LEVEL
 = (1 << 0),

452 
	mGET_LAYOUT
 = (1 << 1),

453 
	mGET_COMPONENT
 = (1 << 2),

454 
	mGET_CHUNK
 = (1 << 3),

455 
	mGET_CACHE
 = (1 << 4),

456 
	mGET_MISMATCH
 = (1 << 5),

457 
	mGET_VERSION
 = (1 << 6),

458 
	mGET_DISKS
 = (1 << 7),

459 
	mGET_DEGRADED
 = (1 << 8),

460 
	mGET_SAFEMODE
 = (1 << 9),

461 
	mGET_BITMAP_LOCATION
 = (1 << 10),

463 
	mGET_DEVS
 = (1 << 20),

464 
	mGET_OFFSET
 = (1 << 21),

465 
	mGET_SIZE
 = (1 << 22),

466 
	mGET_STATE
 = (1 << 23),

467 
	mGET_ERROR
 = (1 << 24),

473 
sysfs_İ’
(*
devnm
, *
devÇme
, *
©Œ
);

474 
sysfs_š™
(
mdšfo
 *
mdi
, 
fd
, *
devnm
);

475 
sysfs_ä“
(
mdšfo
 *
¤a
);

476 
mdšfo
 *
sysfs_»ad
(
fd
, *
devnm
, 
İtiÚs
);

477 
sysfs_©Œ_m©ch
(cÚ¡ *
©Œ
, cÚ¡ *
¡r
);

478 
sysfs_m©ch_wÜd
(cÚ¡ *
wÜd
, **
li¡
);

479 
sysfs_£t_¡r
(
mdšfo
 *
¤a
, mdšfØ*
dev
,

480 *
Çme
, *
v®
);

481 
sysfs_£t_num
(
mdšfo
 *
¤a
, mdšfØ*
dev
,

482 *
Çme
, 
v®
);

483 
sysfs_£t_num_sigÃd
(
mdšfo
 *
¤a
, mdšfØ*
dev
,

484 *
Çme
, 
v®
);

485 
sysfs_uev’t
(
mdšfo
 *
¤a
, *
ev’t
);

486 
sysfs_g‘_fd
(
mdšfo
 *
¤a
, mdšfØ*
dev
,

487 *
Çme
);

488 
sysfs_fd_g‘_Î
(
fd
, *
v®
);

489 
sysfs_g‘_Î
(
mdšfo
 *
¤a
, mdšfØ*
dev
,

490 *
Çme
, *
v®
);

491 
sysfs_fd_g‘_two
(
fd
, *
v1
, *
v2
);

492 
sysfs_g‘_two
(
mdšfo
 *
¤a
, mdšfØ*
dev
,

493 *
Çme
, *
v1
, *
v2
);

494 
sysfs_fd_g‘_¡r
(
fd
, *
v®
, 
size
);

495 
sysfs_©Œibu‹_avaabË
(
mdšfo
 *
¤a
, mdšfØ*
dev
,

496 *
Çme
);

497 
sysfs_g‘_¡r
(
mdšfo
 *
¤a
, mdšfØ*
dev
,

498 *
Çme
, *
v®
, 
size
);

499 
sysfs_£t_§ãmode
(
mdšfo
 *
¤a
, 
ms
);

500 
sysfs_£t_¬¿y
(
mdšfo
 *
šfo
, 
v”s
);

501 
sysfs_add_disk
(
mdšfo
 *
¤a
, mdšfØ*
sd
, 
»sume
);

502 
sysfs_disk_to_scsi_id
(
fd
, 
__u32
 *
id
);

503 
sysfs_unique_hŞd”
(*
devnm
, 
rdev
);

504 
sysfs_ä“ze_¬¿y
(
mdšfo
 *
¤a
);

505 
sysfs_wa™
(
fd
, *
m£c
);

506 
lßd_sys
(*
·th
, *
buf
);

507 
»sh­e_´•¬e_fdli¡
(*
devÇme
,

508 
mdšfo
 *
¤a
,

509 
¿id_disks
,

510 
Ädisks
,

511 
blocks
,

512 *
backup_fe
,

513 *
fdli¡
,

514 *
off£ts
);

515 
»sh­e_ä“_fdli¡
(*
fdli¡
,

516 *
off£ts
,

517 
size
);

518 
»sh­e_İ’_backup_fe
(*
backup
,

519 
fd
,

520 *
devÇme
,

521 
blocks
,

522 *
fdli¡
,

523 *
off£ts
,

524 *
sysfs_Çme
,

525 
»¡¬t
);

526 
compu‹_backup_blocks
(
nchunk
, 
ochunk
,

527 
nd©a
, 
od©a
);

528 *
loÿ‹_backup
(*
Çme
);

529 *
make_backup
(*
Çme
);

531 
§ve_¡res
(*
sourû
, *
off£ts
,

532 
¿id_disks
, 
chunk_size
, 
Ëv–
, 
Ïyout
,

533 
nwr™es
, *
de¡
,

534 
¡¬t
, 
Ëngth
,

535 *
buf
);

536 
»¡Üe_¡res
(*
de¡
, *
off£ts
,

537 
¿id_disks
, 
chunk_size
, 
Ëv–
, 
Ïyout
,

538 
sourû
, 
»ad_off£t
,

539 
¡¬t
, 
Ëngth
,

540 *
¤c_buf
);

542 #iâdeà
S’dma


543 
	#S’dma
 "/u¤/lib/£ndma -t"

	)

546 
	#SYSLOG_FACILITY
 
LOG_DAEMON


	)

548 *
m­_num
(
m­pšg_t
 *
m­
, 
num
);

549 
m­_Çme
(
m­pšg_t
 *
m­
, *
Çme
);

550 
m­pšg_t
 
r5Ïyout
[], 
r6Ïyout
[], 
³rs
[], 
modes
[], 
çuÉyÏyout
[];

552 *
m­_dev_´eã¼ed
(
majÜ
, 
mšÜ
, 
ü—‹
,

553 *
´eãr
);

554 
šlše
 *
	$m­_dev
(
majÜ
, 
mšÜ
, 
ü—‹
)

556  
	`m­_dev_´eã¼ed
(
majÜ
, 
mšÜ
, 
ü—‹
, 
NULL
);

557 
	}
}

559 
	gaùive_¬¿y
;

560 
	gm‘ad©a_upd©e
;

578 
	s»sh­e
 {

579 
	mËv–
;

580 
	m·r™y
;

582 
	mÏyout
;

583 
	md©a_disks
;

584 } 
	mbefÜe
, 
	maá”
;

585 
	mbackup_blocks
;

586 
	mmš_off£t_chªge
;

587 
	m¡res
;

588 
	mÃw_size
;

618 
	ssu³rsw™ch
 {

623 (*
examše_su³r
)(
su³¹y³
 *
¡
, *
homeho¡
);

624 (*
examše_su³r_»suÉ
)(
su³¹y³
 *
¡
, *
homeho¡
, 
examše_»suÉ
 *
»suÉli¡
);

625 (*
br›f_examše_su³r
)(
su³¹y³
 *
¡
, 
v”bo£
);

626 (*
br›f_examše_sub¬¿ys
)(
su³¹y³
 *
¡
, 
v”bo£
);

627 (*
expÜt_examše_su³r
)(
su³¹y³
 *
¡
);

628 (*
examše_badblocks
)(
su³¹y³
 *
¡
, 
fd
, *
devÇme
);

629 (*
cİy_m‘ad©a
)(
su³¹y³
 *
¡
, 
äom
, 
to
);

634 (*
d‘a_su³r
)(
su³¹y³
 *
¡
, *
homeho¡
);

635 (*
br›f_d‘a_su³r
)(
su³¹y³
 *
¡
);

636 (*
expÜt_d‘a_su³r
)(
su³¹y³
 *
¡
);

639 (*
d‘a_¶©fÜm
)(
v”bo£
, 
’um”©e_Úly
, *
cÚŒŞËr_·th
);

640 (*
expÜt_d‘a_¶©fÜm
)(
v”bo£
, *
cÚŒŞËr_·th
);

647 (*
uuid_äom_su³r
)(
su³¹y³
 *
¡
, 
uuid
[4]);

664 (*
g‘šfo_su³r
)(
su³¹y³
 *
¡
, 
mdšfo
 *
šfo
, *
m­
);

665 
mdšfo
 *(*
g‘šfo_su³r_disks
)(
su³¹y³
 *
¡
);

669 (*
m©ch_home
)(
su³¹y³
 *
¡
, *
homeho¡
);

699 (*
upd©e_su³r
)(
su³¹y³
 *
¡
, 
mdšfo
 *
šfo
,

700 *
upd©e
,

701 *
devÇme
, 
v”bo£
,

702 
uuid_£t
, *
homeho¡
);

709 (*
š™_su³r
)(
su³¹y³
 *
¡
, 
mdu_¬¿y_šfo_t
 *
šfo
,

710 
size
, *
Çme
,

711 *
homeho¡
, *
uuid
,

712 
d©a_off£t
);

717 (*
add_to_su³r
)(
su³¹y³
 *
¡
, 
mdu_disk_šfo_t
 *
dšfo
,

718 
fd
, *
devÇme
,

719 
d©a_off£t
);

723 (*
»move_äom_su³r
)(
su³¹y³
 *
¡
, 
mdu_disk_šfo_t
 *
dšfo
);

728 (*
¡Üe_su³r
)(
su³¹y³
 *
¡
, 
fd
);

732 (*
wr™e_š™_su³r
)(
su³¹y³
 *
¡
);

740 (*
com·»_su³r
)(
su³¹y³
 *
¡
, su³¹y³ *
t¡
);

743 (*
lßd_su³r
)(
su³¹y³
 *
¡
, 
fd
, *
devÇme
);

747 (*
lßd_cÚš”
)(
su³¹y³
 *
¡
, 
fd
, *
devÇme
);

750 
su³¹y³
 * (*
m©ch_m‘ad©a_desc
)(*
¬g
);

759 
__u64
 (*
ava_size
)(
su³¹y³
 *
¡
, __u64 
size
,

760 
d©a_off£t
);

765 (*
mš_acû±abË_¥¬e_size
)(
su³¹y³
 *
¡
);

772 (*
add_š‹º®_b™m­
)(
su³¹y³
 *
¡
, *
chunkp
,

773 
d–ay
, 
wr™e_behšd
,

774 
size
, 
may_chªge
, 
majÜ
);

778 (*
loÿ‹_b™m­
)(
su³¹y³
 *
¡
, 
fd
);

782 (*
wr™e_b™m­
)(
su³¹y³
 *
¡
, 
fd
);

784 (*
ä“_su³r
)(
su³¹y³
 *
¡
);

801 (*
v®id©e_geom‘ry
)(
su³¹y³
 *
¡
, 
Ëv–
, 
Ïyout
,

802 
¿iddisks
,

803 *
chunk
, 
size
,

804 
d©a_off£t
,

805 *
subdev
, *
ä“size
,

806 
v”bo£
);

811 
mdšfo
 *(*
cÚš”_cÚ‹Á
)(
su³¹y³
 *
¡
, *
sub¬¿y
);

813 (*
deçuÉ_geom‘ry
)(
su³¹y³
 *
¡
, *
Ëv–
, *
Ïyout
, *
chunk
);

815 (*
kl_sub¬¿y
)(
su³¹y³
 *
¡
);

817 (*
upd©e_sub¬¿y
)(
su³¹y³
 *
¡
, *
sub¬¿y
,

818 *
upd©e
, 
mddev_id’t
 *
id’t
);

824 
	#APPLY_METADATA_CHANGES
 1

	)

825 
	#ROLLBACK_METADATA_CHANGES
 0

	)

827 (*
»sh­e_su³r
)(
su³¹y³
 *
¡
,

828 
size
, 
Ëv–
,

829 
Ïyout
, 
chunksize
, 
¿id_disks
,

830 
d–_disks
, *
backup
, *
dev
,

831 
dœeùiÚ
,

832 
v”bo£
);

833 (*
mªage_»sh­e
)(

834 
afd
, 
mdšfo
 *
¤a
, 
»sh­e
 *reshape,

835 
su³¹y³
 *
¡
, 
blocks
,

836 *
fds
, *
off£ts
,

837 
de¡s
, *
de¡fd
, *
de¡off£ts
);

840 (*
İ’_Ãw
)(
su³¹y³
 *
c
, 
aùive_¬¿y
 *
a
,

841 *
š¡
);

854 (*
£t_¬¿y_¡©e
)(
aùive_¬¿y
 *
a
, 
cÚsi¡’t
);

863 (*
£t_disk
)(
aùive_¬¿y
 *
a
, 
n
, 
¡©e
);

864 (*
sync_m‘ad©a
)(
su³¹y³
 *
¡
);

865 (*
´oûss_upd©e
)(
su³¹y³
 *
¡
,

866 
m‘ad©a_upd©e
 *
upd©e
);

870 (*
´•¬e_upd©e
)(
su³¹y³
 *
¡
,

871 
m‘ad©a_upd©e
 *
upd©e
);

880 
mdšfo
 *(*
aùiv©e_¥¬e
)(
aùive_¬¿y
 *
a
,

881 
m‘ad©a_upd©e
 **
upd©es
);

896 cÚ¡ *(*
g‘_disk_cÚŒŞËr_domaš
)(cÚ¡ *
·th
);

899 (*
»cov”_backup
)(
su³¹y³
 *
¡
, 
mdšfo
 *
šfo
);

902 (*
v®id©e_cÚš”
)(
mdšfo
 *
šfo
);

904 
sw­uuid
;

905 
ex‹º®
;

906 cÚ¡ *
Çme
;

907 } *
su³¾i¡
[];

909 
su³rsw™ch
 
su³r0
, 
su³r1
;

910 
su³rsw™ch
 
su³r_imsm
, 
su³r_ddf
;

911 
su³rsw™ch
 
mbr
, 
g±
;

913 
	sm‘ad©a_upd©e
 {

914 
	mËn
;

915 *
	mbuf
;

916 *
	m¥aû
;

917 **
	m¥aû_li¡
;

920 
m‘ad©a_upd©e
 *
	mÃxt
;

940 
	ssu³¹y³
 {

941 
su³rsw™ch
 *
	mss
;

942 
	mmšÜ_v”siÚ
;

943 
	mmax_devs
;

944 
	mcÚš”_devnm
[32];

945 *
	msb
;

946 *
	mšfo
;

947 *
	mÙh”
;

948 
	mdevsize
;

949 
	md©a_off£t
;

950 
	mignÜe_hw_com·t
;

955 
m‘ad©a_upd©e
 *
	mupd©es
;

956 
m‘ad©a_upd©e
 **
	mupd©e_
;

959 
aùive_¬¿y
 *
	m¬¿ys
;

960 
	msock
;

961 
	mdevnm
[32];

964 
	mdevút
;

965 
	m»Œy_soÚ
;

967 
mdšfo
 *
	mdevs
;

971 
su³¹y³
 *
su³r_by_fd
(
fd
, **
sub¬¿y
);

972 
	eguess_ty³s
 { 
	mguess_ªy
, 
	mguess_¬¿y
, 
	mguess_·¹™iÚs
 };

973 
su³¹y³
 *
guess_su³r_ty³
(
fd
, 
guess_ty³s
 
guess_ty³
);

974 
šlše
 
su³¹y³
 *
	$guess_su³r
(
fd
) {

975  
	`guess_su³r_ty³
(
fd
, 
guess_ªy
);

976 
	}
}

977 
su³¹y³
 *
dup_su³r
(su³¹y³ *
¡
);

978 
g‘_dev_size
(
fd
, *
dÇme
, *
siz•
);

979 
mu¡_be_cÚš”
(
fd
);

980 
dev_size_äom_id
(
dev_t
 
id
, *
size
);

981 
wa™_fÜ
(*
dev
, 
fd
);

989 
	sdev_pŞicy
 {

990 
dev_pŞicy
 *
	mÃxt
;

991 *
	mÇme
;

996 cÚ¡ *
	mm‘ad©a
;

997 cÚ¡ *
	mv®ue
;

1000 
pŞ_aù
[], 
pŞ_domaš
[], 
pŞ_m‘ad©a
[], 
pŞ_auto
[];

1006 
	#pŞ_fÜ_—ch
(
™em
, 
li¡
, 
_m‘ad©a
) \

1007 
™em
 = 
li¡
; \

1008 
™em
 && i‹m->
Çme
 =ğ
li¡
->name; \

1009 
™em
 = i‹m->
Ãxt
) \

1010 ià(!(!
_m‘ad©a
 || !
™em
->
m‘ad©a
 || _metadata == item->metadata)) \

1011 ; 

	)

1017 
	spŞ_ruË
 {

1018 
pŞ_ruË
 *
	mÃxt
;

1019 *
	mty³
;

1020 
	sruË
 {

1021 
ruË
 *
	mÃxt
;

1022 *
	mÇme
;

1023 *
	mv®ue
;

1024 *
	mdups
;

1025 } *
	mruË
;

1028 
ruË_pŞicy
[], 
ruË_·¹
[];

1029 
ruË_·th
[], 
ruË_ty³
[];

1030 
ty³_·¹
[], 
ty³_disk
[];

1032 
pŞicylše
(*
lše
, *
ty³
);

1033 
pŞicy_add
(*
ty³
, ...);

1034 
pŞicy_ä“
();

1036 
dev_pŞicy
 *
·th_pŞicy
(*
·th
, *
ty³
);

1037 
dev_pŞicy
 *
disk_pŞicy
(
mdšfo
 *
disk
);

1038 
dev_pŞicy
 *
devid_pŞicy
(
devid
);

1039 
dev_pŞicy_ä“
(
dev_pŞicy
 *
p
);

1042 
pŞ_add
(
dev_pŞicy
 **
pŞ
, *
Çme
, *
v®
, *
m‘ad©a
);

1043 
dev_pŞicy
 *
pŞ_fšd
(dev_pŞicy *
pŞ
, *
Çme
);

1045 
	epŞicy_aùiÚ
 {

1046 
	maù_deçuÉ
,

1047 
	maù_šşude
,

1048 
	maù_»_add
,

1049 
	maù_¥¬e
,

1050 
	maù_¥¬e_§me_¦Ù
,

1052 
	maù_fÜû_¥¬e
,

1053 
	maù_”r


1056 
pŞicy_aùiÚ_®lows
(
dev_pŞicy
 *
¶i¡
, cÚ¡ *
m‘ad©a
,

1057 
pŞicy_aùiÚ
 
wªt
);

1058 
disk_aùiÚ_®lows
(
mdšfo
 *
disk
, cÚ¡ *
m‘ad©a
,

1059 
pŞicy_aùiÚ
 
wªt
);

1061 
	sdomašli¡
 {

1062 
domašli¡
 *
	mÃxt
;

1063 cÚ¡ *
	mdom
;

1066 
domaš_‹¡
(
domašli¡
 *
dom
, 
dev_pŞicy
 *
pŞ
,

1067 cÚ¡ *
m‘ad©a
);

1068 
domašli¡
 *
domaš_äom_¬¿y
(
mdšfo
 *
mdi
,

1069 cÚ¡ *
m‘ad©a
);

1070 
domašli¡_add_dev
(
domašli¡
 **
dom
, 
devid
,

1071 cÚ¡ *
m‘ad©a
);

1072 
domaš_ä“
(
domašli¡
 *
dl
);

1073 
domaš_m”ge
(
domašli¡
 **
domp
, 
dev_pŞicy
 *
pŞ
,

1074 cÚ¡ *
m‘ad©a
);

1075 
domaš_add
(
domašli¡
 **
domp
, *
domaš
);

1077 
pŞicy_§ve_·th
(*
id_·th
, 
m­_’t
 *
¬¿y
);

1078 
pŞicy_check_·th
(
mdšfo
 *
disk
, 
m­_’t
 *
¬¿y
);

1080 #ià
__GNUC__
 < 3

1081 
	g¡©64
;

1084 
	#HAVE_NFTW
 
we
 
assume


	)

1085 
	#HAVE_FTW


	)

1087 #ifdeà
__UCLIBC__


1088 
	~<ã©u»s.h
>

1089 #iâdeà
__UCLIBC_HAS_LFS__


1090 
	#l£ek64
 
l£ek


	)

1092 #iâdeà 
__UCLIBC_HAS_FTW__


1093 #undeà
HAVE_FTW


1094 #undeà
HAVE_NFTW


1098 #ifdeà
__d›ibc__


1099 #undeà
HAVE_NFTW


1102 #ià
defšed
(
__KLIBC__
)

1103 #undeà
HAVE_NFTW


1104 #undeà
HAVE_FTW


1107 #iâdeà
HAVE_NFTW


1108 
	#FTW_PHYS
 1

	)

1109 #iâdeà
HAVE_FTW


1110 
	sFTW
 {};

1114 #ifdeà
HAVE_FTW


1115 
	~<áw.h
>

1118 
add_dev
(cÚ¡ *
Çme
, cÚ¡ 
¡©
 *
¡b
, 
æag
, 
FTW
 *
s
);

1120 
Mªage_ro
(*
devÇme
, 
fd
, 
»adÚly
);

1121 
Mªage_run
(*
devÇme
, 
fd
, 
cÚ‹xt
 *
c
);

1122 
Mªage_¡İ
(*
devÇme
, 
fd
, 
qu›t
,

1123 
wl_»Œy
);

1124 
Mªage_subdevs
(*
devÇme
, 
fd
,

1125 
mddev_dev
 *
devli¡
, 
v”bo£
, 
‹¡
,

1126 *
upd©e
, 
fÜû
);

1127 
autod‘eù
();

1128 
Grow_Add_deviû
(*
devÇme
, 
fd
, *
Ãwdev
);

1129 
Grow_addb™m­
(*
devÇme
, 
fd
,

1130 
cÚ‹xt
 *
c
, 
sh­e
 *
s
);

1131 
Grow_»sh­e
(*
devÇme
, 
fd
,

1132 
mddev_dev
 *
devli¡
,

1133 
d©a_off£t
,

1134 
cÚ‹xt
 *
c
, 
sh­e
 *
s
);

1135 
Grow_»¡¬t
(
su³¹y³
 *
¡
, 
mdšfo
 *
šfo
,

1136 *
fdli¡
, 
út
, *
backup_fe
, 
v”bo£
);

1137 
Grow_cÚtšue
(
mdfd
, 
su³¹y³
 *
¡
,

1138 
mdšfo
 *
šfo
, *
backup_fe
,

1139 
fÜked
, 
ä“ze_»sh­e
);

1141 
»¡Üe_backup
(
su³¹y³
 *
¡
,

1142 
mdšfo
 *
cÚ‹Á
,

1143 
wÜkšg_disks
,

1144 
¥¬es
,

1145 **
backup_f•
,

1146 
v”bo£
);

1147 
Grow_cÚtšue_commªd
(*
devÇme
, 
fd
,

1148 *
backup_fe
, 
v”bo£
);

1150 
As£mbË
(
su³¹y³
 *
¡
, *
mddev
,

1151 
mddev_id’t
 *
id’t
,

1152 
mddev_dev
 *
devli¡
,

1153 
cÚ‹xt
 *
c
);

1155 
Bud
(*
mddev
, 
mddev_dev
 *
devli¡
,

1156 
sh­e
 *
s
, 
cÚ‹xt
 *
c
);

1158 
C»©e
(
su³¹y³
 *
¡
, *
mddev
,

1159 *
Çme
, *
uuid
,

1160 
subdevs
, 
mddev_dev
 *
devli¡
,

1161 
sh­e
 *
s
,

1162 
cÚ‹xt
 *
c
,

1163 
d©a_off£t
);

1165 
D‘a
(*
dev
, 
cÚ‹xt
 *
c
);

1166 
D‘a_PÏtfÜm
(
su³rsw™ch
 *
ss
, 
sÿn
, 
v”bo£
, 
_expÜt
, *
cÚŒŞËr_·th
);

1167 
D‘a_ToA¼ayD‘a
(cÚ¡ *
dev
, 
cÚ‹xt
 *
c
, 
¬¿y_d‘a
 *
ad
);

1168 
Qu”y
(*
dev
);

1169 
ExamšeBadblocks
(*
devÇme
, 
br›f
, 
su³¹y³
 *
fÜû¡
);

1170 
Examše
(
mddev_dev
 *
devli¡
, 
cÚ‹xt
 *
c
,

1171 
su³¹y³
 *
fÜû¡
);

1172 
Examše_ToResuÉ
(
mddev_dev
 *
devli¡
,

1173 
cÚ‹xt
 *
c
,

1174 
su³¹y³
 *
fÜû¡
,

1175 
examše_»suÉ
 *
»suÉ
);

1176 
MÚ™Ü
(
mddev_dev
 *
devli¡
,

1177 *
maaddr
, *
®”t_cmd
,

1178 
cÚ‹xt
 *
c
,

1179 
d«mÚi£
, 
ÚeshÙ
,

1180 
dosy¦og
, *
pidfe
, 
šüem’ts
,

1181 
sh¬e
);

1183 
Kl
(*
dev
, 
su³¹y³
 *
¡
, 
fÜû
, 
v”bo£
, 
nÛxş
);

1184 
Kl_sub¬¿y
(*
dev
, *
sub¬¿y
, 
v”bo£
);

1185 
Upd©e_sub¬¿y
(*
dev
, *
sub¬¿y
, *
upd©e
, 
mddev_id’t
 *
id’t
, 
qu›t
);

1186 
Wa™
(*
dev
);

1187 
Wa™CËª
(*
dev
, 
sock
, 
v”bo£
);

1188 
S‘AùiÚ
(*
dev
, *
aùiÚ
);

1190 
Inüem’l
(
mddev_dev
 *
devli¡
, 
cÚ‹xt
 *
c
,

1191 
su³¹y³
 *
¡
);

1192 
RebudM­
();

1193 
Inüem’lSÿn
(
cÚ‹xt
 *
c
, *
devnm
);

1194 
Inüem’lRemove
(*
devÇme
, *
·th
, 
v”bo£
);

1195 
C»©eB™m­
(*
f’ame
, 
fÜû
, 
uuid
[16],

1196 
chunksize
, 
d«mÚ_¦“p
,

1197 
wr™e_behšd
,

1198 
¬¿y_size
,

1199 
majÜ
);

1200 
ExamšeB™m­
(*
f’ame
, 
br›f
, 
su³¹y³
 *
¡
);

1201 
Wr™e_ruËs
(*
ruË_Çme
);

1202 
b™m­_upd©e_uuid
(
fd
, *
uuid
, 
sw­
);

1203 
b™m­_£ùÜs
(
b™m­_su³r_s
 *
bsb
);

1204 
Dump_m‘ad©a
(*
dev
, *
dœ
, 
cÚ‹xt
 *
c
,

1205 
su³¹y³
 *
¡
);

1206 
Re¡Üe_m‘ad©a
(*
dev
, *
dœ
, 
cÚ‹xt
 *
c
,

1207 
su³¹y³
 *
¡
, 
Úly
);

1209 
md_g‘_v”siÚ
(
fd
);

1210 
g‘_lšux_v”siÚ
();

1211 
mdadm_v”siÚ
(*
v”siÚ
);

1212 
·r£_size
(*
size
);

1213 
·r£_uuid
(*
¡r
, 
uuid
[4]);

1214 
·r£_Ïyout_10
(*
Ïyout
);

1215 
·r£_Ïyout_çuÉy
(*
Ïyout
);

1216 
·r£_num
(*
num
);

1217 
check_ext2
(
fd
, *
Çme
);

1218 
check_»i£r
(
fd
, *
Çme
);

1219 
check_¿id
(
fd
, *
Çme
);

1220 
check_·¹™iÚs
(
fd
, *
dÇme
,

1221 
ä“size
,

1222 
size
);

1224 
g‘_mdp_majÜ
();

1225 
g‘_maj_mš
(*
dev
, *
majÜ
, *
mšÜ
);

1226 
dev_İ’
(*
dev
, 
æags
);

1227 
İ’_dev
(*
devnm
);

1228 
»İ’_mddev
(
mdfd
);

1229 
İ’_dev_æags
(*
devnm
, 
æags
);

1230 
İ’_dev_exş
(*
devnm
);

1231 
is_¡ªd¬d
(*
dev
, *
nump
);

1232 
§me_dev
(*
Úe
, *
two
);

1233 
com·»_·ths
 (* 
·th1
,* 
·th2
);

1234 
’abË_fds
(
deviûs
);

1236 
·r£_auto
(*
¡r
, *
msg
, 
cÚfig
);

1237 
mddev_id’t
 *
cÚf_g‘_id’t
(*
dev
);

1238 
mddev_dev
 *
cÚf_g‘_devs
();

1239 
cÚf_‹¡_dev
(*
devÇme
);

1240 
cÚf_‹¡_m‘ad©a
(cÚ¡ *
v”siÚ
, 
dev_pŞicy
 *
pŞ
, 
is_homeho¡
);

1241 
ü—‹šfo
 *
cÚf_g‘_ü—‹_šfo
();

1242 
£t_cÚffe
(*
fe
);

1243 *
cÚf_g‘_maaddr
();

1244 *
cÚf_g‘_maäom
();

1245 *
cÚf_g‘_´og¿m
();

1246 *
cÚf_g‘_homeho¡
(*
»quœe_homeho¡p
);

1247 *
cÚf_lše
(
FILE
 *
fe
);

1248 *
cÚf_wÜd
(
FILE
 *
fe
, 
®low_key
);

1249 
´št_quÙed
(*
¡r
);

1250 
´št_esÿ³
(*
¡r
);

1251 
u£_udev
();

1252 
GCD
(
a
, 
b
);

1253 
cÚf_Çme_is_ä“
(*
Çme
);

1254 
cÚf_v”ify_devÇmes
(
mddev_id’t
 *
¬¿y_li¡
);

1255 
devÇme_m©ches
(*
Çme
, *
m©ch
);

1256 
mddev_id’t
 *
cÚf_m©ch
(
su³¹y³
 *
¡
,

1257 
mdšfo
 *
šfo
,

1258 *
devÇme
,

1259 
v”bo£
, *
rvp
);

1260 
ex³rim’l
();

1262 
ä“_lše
(*
lše
);

1263 
m©ch_Úeof
(*
deviûs
, *
devÇme
);

1264 
uuid_äom_su³r
(
uuid
[4], 
mdp_su³r_t
 *
su³r
);

1265 cÚ¡ 
uuid_z”o
[4];

1266 
§me_uuid
(
a
[4], 
b
[4], 
sw­uuid
);

1267 
cİy_uuid
(*
a
, 
b
[4], 
sw­uuid
);

1268 *
__âame_äom_uuid
(
id
[4], 
sw­
, *
buf
, 
£p
);

1269 *
âame_äom_uuid
(
su³¹y³
 *
¡
,

1270 
mdšfo
 *
šfo
, *
buf
, 
£p
);

1271 
ÿlc_csum
(*
su³r
, 
by‹s
);

1272 
’ough
(
Ëv–
, 
¿id_disks
, 
Ïyout
, 
ş—n
,

1273 *
ava
);

1274 
’ough_fd
(
fd
);

1275 
ask
(*
mesg
);

1276 
g‘_compÚ’t_size
(
fd
);

1277 
»move_·¹™iÚs
(
fd
);

1278 
‹¡_·¹™iÚ
(
fd
);

1279 
‹¡_·¹™iÚ_äom_id
(
dev_t
 
id
);

1280 
g‘_d©a_disks
(
Ëv–
, 
Ïyout
, 
¿id_disks
);

1281 
ÿlc_¬¿y_size
(
Ëv–
, 
¿id_disks
, 
Ïyout
,

1282 
chunksize
, 
devsize
);

1283 
æush_m‘ad©a_upd©es
(
su³¹y³
 *
¡
);

1284 
­³nd_m‘ad©a_upd©e
(
su³¹y³
 *
¡
, *
buf
, 
Ën
);

1285 
as£mbË_cÚš”_cÚ‹Á
(
su³¹y³
 *
¡
, 
mdfd
,

1286 
mdšfo
 *
cÚ‹Á
,

1287 
cÚ‹xt
 *
c
,

1288 *
cho£n_Çme
, *
»suÉ
);

1289 
	#INCR_NO
 1

	)

1290 
	#INCR_UNSAFE
 2

	)

1291 
	#INCR_ALREADY
 4

	)

1292 
	#INCR_YES
 8

	)

1293 
mdšfo
 *
cÚš”_choo£_¥¬es
(
su³¹y³
 *
¡
,

1294 
mš_size
,

1295 
domašli¡
 *
domli¡
,

1296 *
¥¬e_group
,

1297 cÚ¡ *
m‘ad©a
, 
g‘_Úe
);

1298 
move_¥¬e
(*
äom_devÇme
, *
to_devÇme
, 
dev_t
 
devid
);

1299 
add_disk
(
mdfd
, 
su³¹y³
 *
¡
,

1300 
mdšfo
 *
¤a
, mdšfØ*
šfo
);

1301 
»move_disk
(
mdfd
, 
su³¹y³
 *
¡
,

1302 
mdšfo
 *
¤a
, mdšfØ*
šfo
);

1303 
£t_¬¿y_šfo
(
mdfd
, 
su³¹y³
 *
¡
, 
mdšfo
 *
šfo
);

1304 
mš_»cov”y_¡¬t
(
mdšfo
 *
¬¿y
);

1306 *
humª_size
(
by‹s
);

1307 *
humª_size_br›f
(
by‹s
, 
´efix
);

1308 
´št_r10_Ïyout
(
Ïyout
);

1310 *
fšd_ä“_devnm
(
u£_·¹™iÚs
);

1312 
put_md_Çme
(*
Çme
);

1313 *
devid2kÇme
(
devid
);

1314 *
devid2devnm
(
devid
);

1315 
devnm2devid
(*
devnm
);

1316 *
g‘_md_Çme
(*
devnm
);

1318 
DeçuÉCÚfFe
[];

1320 
ü—‹_mddev
(*
dev
, *
Çme
, 
autof
, 
Œu¡wÜthy
,

1321 *
cho£n
);

1323 
	#LOCAL
 1

	)

1324 
	#LOCAL_ANY
 10

	)

1325 
	#FOREIGN
 2

	)

1326 
	#METADATA
 3

	)

1327 
İ’_mddev
(*
dev
, 
»pÜt_”rÜs
);

1328 
İ’_cÚš”
(
fd
);

1329 
m‘ad©a_cÚš”_m©ches
(*
m‘ad©a
, *
devnm
);

1330 
m‘ad©a_subdev_m©ches
(*
m‘ad©a
, *
devnm
);

1331 
is_cÚš”_memb”
(
md¡©_’t
 *
’t
, *
devÇme
);

1332 
is_sub¬¿y_aùive
(*
sub¬¿y
, *
devÇme
);

1333 
İ’_sub¬¿y
(*
dev
, *
sub¬¿y
, 
su³¹y³
 *
¡
, 
qu›t
);

1334 
su³rsw™ch
 *
v”siÚ_to_su³rsw™ch
(*
v”s
);

1336 
mdmÚ_ruÂšg
(*
devnm
);

1337 
mdmÚ_pid
(*
devnm
);

1338 
check_’v
(*
Çme
);

1339 
__u32
 
¿ndom32
();

1340 
¡¬t_mdmÚ
(*
devnm
);

1342 
chd_mÚ™Ü
(
afd
, 
mdšfo
 *
¤a
, 
»sh­e
 *reshape,

1343 
su³¹y³
 *
¡
, 
¡res
,

1344 *
fds
, *
off£ts
,

1345 
de¡s
, *
de¡fd
, *
de¡off£ts
);

1346 
abÜt_»sh­e
(
mdšfo
 *
¤a
);

1348 *
su³r1_make_v0
(
su³¹y³
 *
¡
, 
mdšfo
 *
šfo
, 
mdp_su³r_t
 *
sb0
);

1350 
fmt_devÇme
(*
Çme
, 
num
);

1351 *
¡©2devnm
(
¡©
 *
¡
);

1352 *
fd2devnm
(
fd
);

1354 
š_š™rd
();

1356 
	#_ROUND_UP
(
v®
, 
ba£
è(((v®è+ (ba£è- 1è& ~(ba£ - 1))

	)

1357 
	#ROUND_UP
(
v®
, 
ba£
è
	`_ROUND_UP
(v®, (
	`ty³of
(v®))(ba£))

	)

1358 
	#ROUND_UP_PTR
(
±r
, 
ba£
è((
	`ty³of
(ptr)) \

1359 (
	`ROUND_UP
(()(
±r
), 
ba£
)))

	)

1361 
šlše
 
	$is_sub¬¿y
(*
v”s
)

1372  (*
v”s
 == '/' || *vers == '-');

1373 
	}
}

1375 
šlše
 *
	$to_sub¬¿y
(
md¡©_’t
 *
’t
, *
cÚš”
)

1377  &
’t
->
m‘ad©a_v”siÚ
[10+
	`¡¾’
(
cÚš”
)+1];

1378 
	}
}

1380 #ifdeà
DEBUG


1381 
	#d´štf
(
fmt
, 
¬g
...) \

1382 
	`årštf
(
¡d”r
, 
fmt
, ##
¬g
)

	)

1384 
	#d´štf
(
fmt
, 
¬g
...) \

1385 ({ ià(0è
	`årštf
(
¡d”r
, 
fmt
, ##
¬g
); 0; })

	)

1387 
	~<as£¹.h
>

1388 
	~<¡d¬g.h
>

1389 
šlše
 
	$xa¥rštf
(**
¡½
, cÚ¡ *
fmt
, ...) {

1390 
va_li¡
 
­
;

1391 
»t
;

1392 
	`va_¡¬t
(
­
, 
fmt
);

1393 
»t
 = 
	`va¥rštf
(
¡½
, 
fmt
, 
­
);

1394 
	`va_’d
(
­
);

1395 
	`as£¹
(
»t
 >= 0);

1396  
»t
;

1397 
	}
}

1399 #ifdeà
DEBUG


1400 
	#´_”r
(
fmt
 ...è
	`årštf
(
¡d”r
, 
Name
 ": " fmt)

	)

1401 
	#cÚt_”r
(
fmt
 ...è
	`årštf
(
¡d”r
, " " fmt)

	)

1403 
	#´_”r
(
fmt
 ...è({ ià(0è
	`årštf
(
¡d”r
, 
Name
 ": " fmt); })

	)

1404 
	#cÚt_”r
(
fmt
 ...è({ ià(0è
	`årštf
(
¡d”r
, " " fmt); })

	)

1407 *
xm®loc
(
size_t
 
Ën
);

1408 *
x»®loc
(*
±r
, 
size_t
 
Ën
);

1409 *
xÿÎoc
(
size_t
 
num
, size_ˆ
size
);

1410 *
x¡rdup
(cÚ¡ *
¡r
);

1412 
	#LEVEL_MULTIPATH
 (-4)

	)

1413 
	#LEVEL_LINEAR
 (-1)

	)

1414 
	#LEVEL_FAULTY
 (-5)

	)

1417 
	#LEVEL_CONTAINER
 (-100)

	)

1418 
	#LEVEL_UNSUPPORTED
 (-200)

	)

1421 
	#LEVEL_NONE
 (-1000000)

	)

1425 
	#Wr™eT¿ns›Á
 0

	)

1426 
	#R—dT¿ns›Á
 1

	)

1427 
	#Wr™eP”si¡’t
 2

	)

1428 
	#R—dP”si¡’t
 3

	)

1429 
	#Wr™eAÎ
 4

	)

1430 
	#R—dFixabË
 5

	)

1431 
	#Modes
 6

	)

1433 
	#CË¬E¼Üs
 31

	)

1434 
	#CË¬FauÉs
 30

	)

1436 
	#AÎP”si¡
 100

	)

1437 
	#NoP”si¡
 101

	)

1439 
	#ModeMask
 0x1f

	)

1440 
	#ModeShiá
 5

	)

1442 #ifdeà
__TINYC__


1443 #undeà
mšÜ


1444 #undeà
majÜ


1445 #undeà
makedev


1446 
	#mšÜ
(
x
è((x)&0xff)

	)

1447 
	#majÜ
(
x
è(((x)>>8)&0xff)

	)

1448 
	#makedev
(
M
,
m
è(((M)<<8è| (m))

	)

1452 
	#ALGORITHM_LEFT_ASYMMETRIC
 0

	)

1453 
	#ALGORITHM_RIGHT_ASYMMETRIC
 1

	)

1454 
	#ALGORITHM_LEFT_SYMMETRIC
 2

	)

1455 
	#ALGORITHM_RIGHT_SYMMETRIC
 3

	)

1460 
	#ALGORITHM_PARITY_0
 4

	)

1461 
	#ALGORITHM_PARITY_N
 5

	)

1475 
	#ALGORITHM_ROTATING_ZERO_RESTART
 8

	)

1476 
	#ALGORITHM_ROTATING_N_RESTART
 9

	)

1477 
	#ALGORITHM_ROTATING_N_CONTINUE
 10

	)

1484 
	#ALGORITHM_LEFT_ASYMMETRIC_6
 16

	)

1485 
	#ALGORITHM_RIGHT_ASYMMETRIC_6
 17

	)

1486 
	#ALGORITHM_LEFT_SYMMETRIC_6
 18

	)

1487 
	#ALGORITHM_RIGHT_SYMMETRIC_6
 19

	)

1488 
	#ALGORITHM_PARITY_0_6
 20

	)

1489 
	#ALGORITHM_PARITY_N_6
 
ALGORITHM_PARITY_N


	)

1494 #iâdeà
PATH_MAX


1495 
	#PATH_MAX
 4096

	)

1498 
	#RESYNC_NONE
 -1

	)

1499 
	#RESYNC_DELAYED
 -2

	)

1500 
	#RESYNC_PENDING
 -3

	)

1501 
	#RESYNC_UNKNOWN
 -4

	)

1509 
	#MAX_DISKS
 4096

	)

1514 
	#MAX_SIZE
 1

	)

1519 
	#INVALID_SECTORS
 1

	)

1521 
	#VARIABLE_OFFSET
 3

	)

1523 
	#V”siÚ
 "NUUO"

	)

	@libmdadm/mdadm_errcode.h

1 #iâdeà
__MDADM_ERRORCODE__


2 
	#__MDADM_ERRORCODE__


	)

5 
	mSUCCESS
 = 0,

7 
	mCREATE_RAID_LEVEL_UNSET
 = 1,

8 
	mCREATE_RAID_DEVS_NOT_ENOUGH
,

9 
	mCREATE_RAID_DEVS_OVER_256
,

10 
	mCREATE_RAID_DEVS_NOT_EXIST_IN_LIST
,

11 
	mCREATE_SPARE_DEVS_NOT_SUPPORT
,

12 
	mCREATE_LIST_DEVS_MORE_THAN_ARRAY_NEEDED
,

13 
	mCREATE_BITMAP_NOT_MEANINGFUL
,

14 
	mCREATE_RAID_LEVEL_UNKNOWN
,

15 
	mCREATE_GEOMETRY_INVALID
,

16 
	mCREATE_RAID_DEV_CANNOT_OPEN
,

17 
	mCREATE_NOT_BLOCK_DEVICE
,

18 
	mCREATE_UNSUITABLE_STYLE
,

19 
	mCREATE_TOO_MANY_DEVS
,

20 
	mCREATE_NO_FREE_SPACE
,

21 
	mCREATE_FREE_SPACE_SMALL_THAN_GIVEN
,

22 
	mCREATE_WITHOUT_GIVEN_SIZE_DRIVES
,

23 
	mCREATE_DEVS_TOO_LARGE
,

24 
	mCREATE_ABORTED
,

25 
	mCREATE_MISSING_DEVS_NOT_SUPPORT
,

26 
	mCREATE_MDDEV_FAIL
,

27 
	mCREATE_MDDEV_INUSE
,

28 
	mCREATE_MDDEV_UNSET
,

29 
	mCREATE_MDNUM_ILLEGAL
,

30 
	mCREATE_REQUIRE_NEWER_VERSION
,

31 
	mCREATE_INIT_SUPER_FAIL
,

32 
	mCREATE_BITMAP_NOT_SUPPORT
,

33 
	mCREATE_BITMAP_CHUNK_NOT_SUPPORT
,

34 
	mCREATE_OPEN_CONTAINER_FAIL
,

35 
	mCREATE_SET_ARRAY_INFO_FAIL
,

36 
	mCREATE_BITMAP_FAIL
,

37 
	mCREATE_OPEN_BITMAP_FILE_FAIL
,

38 
	mCREATE_SET_BITMAP_FILE_FAIL
,

39 
	mCREATE_ADD_TO_SUPER_FAIL
,

40 
	mCREATE_ADD_NEW_DISK_FAIL
,

41 
	mCREATE_FREE_SUPER_TYPE_OBJ_FAIL
,

42 
	mCREATE_RAID_ACTIVATION_FAIL
,

44 
	mDETAIL_MDDEV_OPEN_FAIL
 = 101,

45 
	mDETAIL_MDDEV_ILLEGAL
,

46 
	mDETAIL_MDDEV_REQUIRE_NEWER_DRIVER
,

47 
	mDETAIL_MDDEV_CANNOT_GET_DETAIL
,

48 
	mDETAIL_NULL_POINTER
,

50 
	mMANAGE_STOP_MD_FAIL
 = 201,

51 
	mMANAGE_MD_IN_USE
,

52 
	mMANAGE_DEVICE_BUSY
,

53 
	mMANAGE_STOP_CONTAINER_FAIL
,

54 
	mMANAGE_GET_ARRAY_INFO_FAIL
,

55 
	mMANAGE_UNSUPPORTED_ARRAY
,

56 
	mMANAGE_NEED_MEANINGFUL_DISPOSITION
,

57 
	mMANAGE_NOT_MEANINGFUL_FOR_R10
,

58 
	mMANAGE_NOT_MEANINGFUL_FOR_ARRAY
,

59 
	mMANAGE_OPEN_SYSFD_FAIL
,

60 
	mMANAGE_CANNOT_FIND_DEV
,

61 
	mMANAGE_NOT_BLOCK_DEV
,

62 
	mMANAGE_CANNOT_OPEN_DEV
,

63 
	mMANAGE_CANNOT_ADD_DISKS_TO_MEMBER_ARRAY
,

64 
	mMANAGE_SET_FAULTY_FAIL
,

65 
	mMANAGE_NO_MATCHING_DEV
,

66 
	mMANAGE_WITH_ARG_FAIL
,

67 
	mMANAGE_CANNOT_REMOVE_DISKS_FROM_MEMBER_ARRAY
,

68 
	mMANAGE_ADD_GET_DEV_SIZE_FAIL
 = 251,

69 
	mMANAGE_ADD_WASTED_DEV_SIZE
,

70 
	mMANAGE_ADD_HOT_ADD_FAIL
,

71 
	mMANAGE_ADD_CANNOT_LOAD_ARRAY_METADATA
,

72 
	mMANAGE_ADD_DEV_SIZE_NOT_LARGE_ENOUGH
,

73 
	mMANAGE_ADD_READD_IMPOSSIBLE
,

74 
	mMANAGE_ADD_ARRAY_FAILED
,

75 
	mMANAGE_ADD_UPDATE_SUPERBLOCK_FAIL
,

76 
	mMANAGE_ADD_WRITE_INIT_SUPERBLOCK_FAIL
,

77 
	mMANAGE_ADD_CANNOT_GET_EXCLUSIVE_ACCESS
,

78 
	mMANAGE_ADD_READ_SYSFS_FAIL
,

79 
	mMANAGE_ADD_ADD_NEW_DEVS_FAIL
,

80 
	mMANAGE_REMOVE_CANNOT_GET_EXCLUSIVE_ACCESS
 = 271,

81 
	mMANAGE_REMOVE_NOT_MEMBER
,

82 
	mMANAGE_REMOVE_IN_USE
,

83 
	mMANAGE_REMOVE_HOT_REMOVE_FAIL
,

84 
	mMANAGE_REMOVE_GET_CONTAINER_NAME_FAIL
,

85 
	mMANAGE_REPLACE_UNSUPPORTED_METADATA_VER
 = 291,

86 
	mMANAGE_REPLACE_CANNOT_FIND_MD_INFO
,

87 
	mMANAGE_REPLACE_DISK_NOT_ACTIVE
,

88 
	mMANAGE_REPLACE_REQUEST_REPLACEMENT_FAIL
,

89 
	mMANAGE_REPLACE_MD_NOT_FOUND
,

90 
	mMANAGE_WITH_CANNOT_FOUND_MD_INFO
 = 311,

91 
	mMANAGE_WITH_FAULTY_DISK
,

92 
	mMANAGE_WITH_ACTIVE_DISK
,

93 
	mMANAGE_WITH_PREFER_REPLACEMENT_FAIL
,

94 
	mMANAGE_WITH_MD_NOT_FOUND
,

97 
	mASSEMBLE_NO_IDENTITY_INFO
 = 401,

98 
	mASSEMBLE_RAID_DEVS_NOT_ENOUGH
,

99 
	mASSEMBLE_NEGATIVE_NUM_DEVICES
,

100 
	mASSEMBLE_SUPER_INFO_IS_NULL
,

101 
	mASSEMBLE_DRIVE_IS_ACTIVE
,

102 
	mASSEMBLE_INVALID_MDFD
,

103 
	mASSEMBLE_KERNEL_UNSUPPORT
,

104 
	mASSEMBLE_MD_ALREADY_ACTIVE
,

105 
	mASSEMBLE_CONTAINER_CONTENT_FAIL
,

106 
	mASSEMBLE_NEGATIVE_DEV_CNT
,

107 
	mASSEMBLE_NO_DEVS_FOR_MD
,

108 
	mASSEMBLE_OPEN_DEV_FAIL
,

109 
	mASSEMBLE_SUPERBLOCK_DISAPPEARED
,

110 
	mASSEMBLE_NO_SUITABLE_DRIVES
,

111 
	mASSEMBLE_REWRITE_SUPERBLOCK_FAIL
,

112 
	mASSEMBLE_FAIL
,

113 
	mASSEMBLE_MDDEV_UNSET
,

114 
	mASSEMBLE_RAID_DEVS_NOT_EXIST_IN_LIST
,

115 
	mASSEMBLE_INVALID_UUID
,

116 
	mASSEMBLE_MDDEV_INUSE
,

117 
	mASSEMBLE_MDNUM_ILLEGAL
,

118 
	mASSEMBLE_INITIALIZE_DEV_LIST_FAIL
,

119 
	mASSEMBLE_FAIL_TO_SET_ARRAY_INFO
,

120 
	mASSEMBLE_FAIL_TO_SET_BITMAP_FILE
,

121 
	mASSEMBLE_FAIL_TO_OPEN_BITMAP_FILE
,

122 
	mASSEMBLE_NEED_BACKUP_FILE
,

123 
	mASSEMBLE_UNDEFINED_ERROR
,

125 
	mKILL_OPEN_DEV_FAIL
 = 501,

126 
	mKILL_NOT_MD_COMPONENT
,

127 
	mKILL_ZERO_SUPERBLOCK_FAIL
,

129 
	mQUERY_OPEN_DEV_FAIL
 = 551,

130 
	mQUERY_NULL_POINTER
,

131 
	mEXAMINE_OPEN_DEV_FAIL
 = 601,

132 
	mEXAMINE_NO_MD_SUPERBLOCK
,

133 
	mEXAMINE_MEM_ALLOC_FAIL
,

134 
	mEXAMINE_NULL_POINTER


	@libmdadm/mdadm_other.h

1 #iâdeà
__MDADM_OTHER_H__


2 
	#__MDAMM_OTHER_H__


	)

4 
	#MAX_DISK_NUM
 64

	)

8 
	mRAID_STATUS_BIT_FUNCTIONAL
 = 0,

9 
	mRAID_STATUS_BIT_DEGRADE
,

10 
	mRAID_STATUS_BIT_FAILED
,

11 
	mRAID_STATUS_BIT_RECOVERING
,

12 
	mRAID_STATUS_BIT_UNMOUNTED
,

13 
	mRAID_STATUS_BIT_UNFORMATED
,

14 
	mRAID_STATUS_BIT_FILESYS_ERR
,

17 
	s¬¿y_disk_šfo
 {

18 
mdu_disk_šfo_t
 
	mdiskInfo
;

19 
	m¡rS‹
[256];

20 
	m¡rDevName
[64];

23 
	s¬¿y_d‘a
 {

24 
mdu_¬¿y_šfo_t
 
	m¬¿yInfo
;

25 
¬¿y_disk_šfo
 
	m¬¿yDisks
[
MAX_DISK_NUM
];

27 
	m¡rA¼ayS‹
[128];

28 
	m¡rA¼ayDevName
[32];

29 
	m¡rRaidLev–
[16];

30 
	m¡rRaidLayout
[32];

31 
	m¡rA¼aySize
[32];

32 
	m¡rU£dSize
[32];

33 
	m¡rRebudO³¿tiÚ
[16];

34 
	muÎA¼aySize
;

35 
	muÎU£dSize
;

36 
	muuid
[4];

37 
	mbIsSu³rBlockP”si¡’t
;

38 
	mbIÇùive
;

39 
	mbIsRebudšg
;

40 
	miRebudProg»ss
;

41 
	miEnough
;

42 
	miLayout
;

43 
	muDiskCouÁ”
;

45 
	m¡rCÚš”
[32];

46 
	m¡rMemb”
[32];

49 
	mbResh­eAùive
;

50 
	miD–Disks
;

51 
	miRaidNewLev–
;

52 
	miNewChunkSize
;

53 
	muÎResh­eProg»ss
;

54 
	m¡rRaidNewLayout
[32];

57 
	squ”y_»suÉ
 {

58 
	mbIsMD
;

59 
	mbIsMDAùive
;

60 
	mbHasMDD‘a
;

61 
	mbHasMDE¼Ü
;

62 
	miMDRaidDiskNum
;

63 
	miMDS·»DiskNum
;

64 
	miMDRaidLev–
;

65 
	m¡rMDSize
[32];

66 
	m¡rMDLev–
[16];

67 
	m¡rMDDevName
[32];

68 
	m¡rMDE¼Ü
[128];

70 
	miDiskNumb”
;

71 
	m¡rDiskAùiv™y
[32];

72 
	m¡rDiskDevName
[32];

75 
	sexamše_»suÉ
 {

76 
	mcS‹
;

77 
	m¡rDevName
[32];

78 
	m¬¿yUUID
[4];

79 
	muRaidLev–
;

80 
	muRaidDiskNum
;

81 
	mbHasBadblock
;

82 
	mbSBChkSumE¼Ü
;

83 
	mbIsV®id
;

84 
	muChkSum
;

85 
	muEx³ùedChkSum
;

86 
	muDevRŞe
;

87 
examše_»suÉ
* 
	mÃxt
;

	@libmdadm/mdmon.h

21 #undeà
´_”r


22 
	#´_”r
(
fmt
 ...è
	`årštf
(
¡d”r
, "mdmÚ: " fmt)

	)

24 
	e¬¿y_¡©e
 { 
	mş—r
, 
	mšaùive
, 
	msu¥’ded
, 
	m»adÚly
, 
	m»ad_auto
,

25 
	mş—n
, 
	maùive
, 
	mwr™e_³ndšg
, 
	maùive_idË
, 
	mbad_wÜd
};

27 
	esync_aùiÚ
 { 
	midË
, 
	m»sh­e
, 
	m»sync
, 
	m»cov”
, 
	mcheck
, 
	m»·œ
, 
	mbad_aùiÚ
 };

29 
	saùive_¬¿y
 {

30 
mdšfo
 
	mšfo
;

31 
su³¹y³
 *
	mcÚš”
;

32 
aùive_¬¿y
 *
	mÃxt
, *
	m»¶aûs
;

33 
	mto_»move
;

35 
	maùiÚ_fd
;

36 
	m»sync_¡¬t_fd
;

37 
	mm‘ad©a_fd
;

38 
	msync_com¶‘ed_fd
;

39 
	mÏ¡_checkpošt
;

48 
¬¿y_¡©e
 
	m´ev_¡©e
, 
	mcu¼_¡©e
, 
	mÃxt_¡©e
;

49 
sync_aùiÚ
 
	m´ev_aùiÚ
, 
	mcu¼_aùiÚ
, 
	mÃxt_aùiÚ
;

51 
	mcheck_deg¿ded
;

52 
	mcheck_»sh­e
;

66 
m‘ad©a_upd©e
 *
upd©e_queue
, *
upd©e_queue_hªdËd
;

68 
	#MD_MAJOR
 9

	)

70 
aùive_¬¿y
 *
cÚš”
;

71 
aùive_¬¿y
 *
disÿrd_this
;

72 
aùive_¬¿y
 *
³ndšg_disÿrd
;

73 
md_g’”ic_cmd
 *
aùive_cmd
;

75 
»move_pidfe
(*
devÇme
);

76 
do_mÚ™Ü
(
su³¹y³
 *
cÚš”
);

77 
do_mªag”
(
su³¹y³
 *
cÚš”
);

78 
sig‹rm
;

80 
»ad_dev_¡©e
(
fd
);

81 
is_cÚš”_memb”
(
md¡©_’t
 *
md¡©
, *
cÚš”
);

83 
md¡©_’t
 *
md¡©_»ad
(
hŞd
, 
¡¬t
);

85 
ex™_now
, 
mªag”_»ady
;

86 
mÚ_tid
, 
mgr_tid
;

87 
mÚ™Ü_loİ_út
;

92 
šlše
 
	$is_»sync_com¶‘e
(
mdšfo
 *
¬¿y
)

94 
sync_size
 = 0;

95 
ncİ›s
, 
l
;

96 
¬¿y
->¬¿y.
Ëv–
) {

101 
sync_size
 = 
¬¿y
->
compÚ’t_size
;

104 
l
 = 
¬¿y
->¬¿y.
Ïyout
;

105 
ncİ›s
 = (
l
 & 0xff) * ((l >> 8) && 0xff);

106 
sync_size
 = 
¬¿y
->
compÚ’t_size
 *‡¼ay->¬¿y.
¿id_disks
;

107 
sync_size
 /ğ
ncİ›s
;

110  
¬¿y
->
»sync_¡¬t
 >ğ
sync_size
;

111 
	}
}

	@libmdadm/msg.h

20 
	gmdšfo
;

21 
	gm‘ad©a_upd©e
;

23 
»ûive_mes§ge
(
fd
, 
m‘ad©a_upd©e
 *
msg
, 
tmo
);

24 
£nd_mes§ge
(
fd
, 
m‘ad©a_upd©e
 *
msg
, 
tmo
);

25 
ack
(
fd
, 
tmo
);

26 
wa™_»¶y
(
fd
, 
tmo
);

27 
cÚÃù_mÚ™Ü
(*
devÇme
);

28 
pšg_mÚ™Ü
(*
devÇme
);

29 
block_sub¬¿y
(
mdšfo
 *
¤a
);

30 
unblock_sub¬¿y
(
mdšfo
 *
¤a
, cÚ¡ 
unä“ze
);

31 
block_mÚ™Ü
(*
cÚš”
, cÚ¡ 
ä“ze
);

32 
unblock_mÚ™Ü
(*
cÚš”
, cÚ¡ 
unä“ze
);

33 
åšg_mÚ™Ü
(
sock
);

34 
pšg_mªag”
(*
devÇme
);

35 
æush_mdmÚ
(*
cÚš”
);

37 
	#MSG_MAX_LEN
 (4*1024*1024)

	)

	@libmdadm/part.h

29 
	#MBR_SIGNATURE_MAGIC
 
	`__ıu_to_Ë16
(0xAA55)

	)

30 
	#MBR_PARTITIONS
 4

	)

32 
	sMBR_·¹_»cÜd
 {

33 
__u8
 
	mboÙabË
;

34 
__u8
 
	mfœ¡_h—d
;

35 
__u8
 
	mfœ¡_£ùÜ
;

36 
__u8
 
	mfœ¡_cyl
;

37 
__u8
 
	m·¹_ty³
;

38 
__u8
 
	mÏ¡_h—d
;

39 
__u8
 
	mÏ¡_£ùÜ
;

40 
__u8
 
	mÏ¡_cyl
;

41 
__u32
 
	mfœ¡_£ù_lba
;

42 
__u32
 
	mblocks_num
;

45 
	sMBR
 {

46 
__u8
 
	m·d
[446];

47 
MBR_·¹_»cÜd
 
	m·¹s
[
MBR_PARTITIONS
];

48 
__u16
 
	mmagic
;

49 } 
__©Œibu‹__
((
·cked
));

51 
	#GPT_SIGNATURE_MAGIC
 
	`__ıu_to_Ë64
(0x5452415020494645ULL)

	)

52 
	#MBR_GPT_PARTITION_TYPE
 0xEE

	)

54 
	sGPT_·¹_’Œy
 {

55 
	mty³_guid
[16];

56 
	m·¹™iÚ_guid
[16];

57 
__u64
 
	m¡¬tšg_lba
;

58 
__u64
 
	m’dšg_lba
;

59 
	m©Œ_b™s
[8];

60 
	mÇme
[72];

61 } 
__©Œibu‹__
((
·cked
));

63 
	sGPT
 {

64 
__u64
 
	mmagic
;

65 
__u32
 
	m»visiÚ
;

66 
__u32
 
	mh—d”_size
;

67 
__u32
 
	müc
;

68 
__u32
 
	m·d1
;

69 
__u64
 
	mcu¼’t_lba
;

70 
__u64
 
	mbackup_lba
;

71 
__u64
 
	mfœ¡_lba
;

72 
__u64
 
	mÏ¡_lba
;

73 
__u8
 
	mguid
[16];

74 
__u64
 
	m·¹_¡¬t
;

75 
__u32
 
	m·¹_út
;

76 
__u32
 
	m·¹_size
;

77 
__u32
 
	m·¹_üc
;

78 
__u8
 
	m·d2
[420];

79 } 
__©Œibu‹__
((
·cked
));

	@libmdadm/platform-intel.h

19 
	~<asm/ty³s.h
>

20 
	~<¡ršgs.h
>

23 
	simsm_Üom
 {

24 
__u8
 
	msigÇtu»
[4];

25 
__u8
 
	mbË_v”_majÜ
;

26 
__u8
 
	mbË_v”_mšÜ
;

27 
__u16
 
	mmajÜ_v”
;

28 
__u16
 
	mmšÜ_v”
;

29 
__u16
 
	mhÙfix_v”
;

30 
__u16
 
	mbud
;

31 
__u8
 
	mËn
;

32 
__u8
 
	mchecksum
;

33 
__u16
 
	m¾c
;

37 
	#IMSM_OROM_RLC_RAID0
 (1 << 0)

	)

38 
	#IMSM_OROM_RLC_RAID1
 (1 << 1)

	)

39 
	#IMSM_OROM_RLC_RAID10
 (1 << 2)

	)

40 
	#IMSM_OROM_RLC_RAID1E
 (1 << 3)

	)

41 
	#IMSM_OROM_RLC_RAID5
 (1 << 4)

	)

42 
	#IMSM_OROM_RLC_RAID_CNG
 (1 << 5)

	)

43 
__u16
 
	msss
;

44 
	#IMSM_OROM_SSS_2kB
 (1 << 0)

	)

45 
	#IMSM_OROM_SSS_4kB
 (1 << 1)

	)

46 
	#IMSM_OROM_SSS_8kB
 (1 << 2)

	)

47 
	#IMSM_OROM_SSS_16kB
 (1 << 3)

	)

48 
	#IMSM_OROM_SSS_32kB
 (1 << 4)

	)

49 
	#IMSM_OROM_SSS_64kB
 (1 << 5)

	)

50 
	#IMSM_OROM_SSS_128kB
 (1 << 6)

	)

51 
	#IMSM_OROM_SSS_256kB
 (1 << 7)

	)

52 
	#IMSM_OROM_SSS_512kB
 (1 << 8)

	)

53 
	#IMSM_OROM_SSS_1MB
 (1 << 9)

	)

54 
	#IMSM_OROM_SSS_2MB
 (1 << 10)

	)

55 
	#IMSM_OROM_SSS_4MB
 (1 << 11)

	)

56 
	#IMSM_OROM_SSS_8MB
 (1 << 12)

	)

57 
	#IMSM_OROM_SSS_16MB
 (1 << 13)

	)

58 
	#IMSM_OROM_SSS_32MB
 (1 << 14)

	)

59 
	#IMSM_OROM_SSS_64MB
 (1 << 15)

	)

60 
__u16
 
	md·
;

61 
	#IMSM_OROM_DISKS_PER_ARRAY
 6

	)

62 
__u16
 
	mtds
;

63 
	#IMSM_OROM_TOTAL_DISKS
 6

	)

64 
__u8
 
	mv·
;

65 
	#IMSM_OROM_VOLUMES_PER_ARRAY
 2

	)

66 
__u8
 
	mvphba
;

67 
	#IMSM_OROM_VOLUMES_PER_HBA
 4

	)

72 
__u32
 
	m©Œ
;

73 
	#IMSM_OROM_ATTR_RAID0
 
IMSM_OROM_RLC_RAID0


	)

74 
	#IMSM_OROM_ATTR_RAID1
 
IMSM_OROM_RLC_RAID1


	)

75 
	#IMSM_OROM_ATTR_RAID10
 
IMSM_OROM_RLC_RAID10


	)

76 
	#IMSM_OROM_ATTR_RAID1E
 
IMSM_OROM_RLC_RAID1E


	)

77 
	#IMSM_OROM_ATTR_RAID5
 
IMSM_OROM_RLC_RAID5


	)

78 
	#IMSM_OROM_ATTR_RAID_CNG
 
IMSM_OROM_RLC_RAID_CNG


	)

79 
	#IMSM_OROM_ATTR_2TB_DISK
 (1 << 26)

	)

80 
	#IMSM_OROM_ATTR_2TB
 (1 << 29)

	)

81 
	#IMSM_OROM_ATTR_PM
 (1 << 30)

	)

82 
	#IMSM_OROM_ATTR_ChecksumV”ify
 (1 << 31)

	)

83 
__u32
 
	mÿ·b™›s
;

84 
	#IMSM_OROM_CAPABILITIES_Ext_SATA
 (1 << 0)

	)

85 
	#IMSM_OROM_CAPABILITIES_TurboMemÜy
 (1 << 1)

	)

86 
	#IMSM_OROM_CAPABILITIES_HddPasswÜd
 (1 << 2)

	)

87 
	#IMSM_OROM_CAPABILITIES_DiskCÛrciÚ
 (1 << 3)

	)

88 
__u32
 
	mdriv”_ã©u»s
;

89 
	#IMSM_OROM_CAPABILITIES_HDDUÆock
 (1 << 0)

	)

90 
	#IMSM_OROM_CAPABILITIES_LEDLoc
 (1 << 1)

	)

91 
	#IMSM_OROM_CAPABILITIES_EÁ”´i£Sy¡em
 (1 << 2)

	)

92 
	#IMSM_OROM_CAPABILITIES_Zpodd
 (1 << 3)

	)

93 
	#IMSM_OROM_CAPABILITIES_L¬geD¿mCache
 (1 << 4)

	)

94 
	#IMSM_OROM_CAPABILITIES_Rohi
 (1 << 5)

	)

95 
	#IMSM_OROM_CAPABILITIES_R—dP©rŞ
 (1 << 6)

	)

96 
	#IMSM_OROM_CAPABILITIES_XÜHw
 (1 << 7)

	)

97 } 
__©Œibu‹__
((
·cked
));

99 
šlše
 
	$imsm_Üom_has_¿id0
(cÚ¡ 
imsm_Üom
 *
Üom
)

101  !!(
Üom
->
¾c
 & 
IMSM_OROM_RLC_RAID0
);

102 
	}
}

103 
šlše
 
	$imsm_Üom_has_¿id1
(cÚ¡ 
imsm_Üom
 *
Üom
)

105  !!(
Üom
->
¾c
 & 
IMSM_OROM_RLC_RAID1
);

106 
	}
}

107 
šlše
 
	$imsm_Üom_has_¿id1e
(cÚ¡ 
imsm_Üom
 *
Üom
)

109  !!(
Üom
->
¾c
 & 
IMSM_OROM_RLC_RAID1E
);

110 
	}
}

111 
šlše
 
	$imsm_Üom_has_¿id10
(cÚ¡ 
imsm_Üom
 *
Üom
)

113  !!(
Üom
->
¾c
 & 
IMSM_OROM_RLC_RAID10
);

114 
	}
}

115 
šlše
 
	$imsm_Üom_has_¿id5
(cÚ¡ 
imsm_Üom
 *
Üom
)

117  !!(
Üom
->
¾c
 & 
IMSM_OROM_RLC_RAID5
);

118 
	}
}

125 
šlše
 
	$imsm_Üom_has_chunk
(cÚ¡ 
imsm_Üom
 *
Üom
, 
chunk
)

127 
fs
 = 
	`ffs
(
chunk
);

128 ià(!
fs
)

130 
fs
--;

131 ià(
chunk
 & (chunk-1))

133  !!(
Üom
->
sss
 & (1 << (
fs
 - 1)));

134 
	}
}

142 
šlše
 
	$æs
(
x
)

144 
r
 = 32;

146 ià(!
x
)

148 ià(!(
x
 & 0xffff0000u)) {

149 
x
 <<= 16;

150 
r
 -= 16;

152 ià(!(
x
 & 0xff000000u)) {

153 
x
 <<= 8;

154 
r
 -= 8;

156 ià(!(
x
 & 0xf0000000u)) {

157 
x
 <<= 4;

158 
r
 -= 4;

160 ià(!(
x
 & 0xc0000000u)) {

161 
x
 <<= 2;

162 
r
 -= 2;

164 ià(!(
x
 & 0x80000000u)) {

165 
x
 <<= 1;

166 
r
 -= 1;

168  
r
;

169 
	}
}

171 
	esys_dev_ty³
 {

172 
	mSYS_DEV_UNKNOWN
 = 0,

173 
	mSYS_DEV_SAS
,

174 
	mSYS_DEV_SATA
,

175 
	mSYS_DEV_MAX


178 
	ssys_dev
 {

179 
sys_dev_ty³
 
	mty³
;

180 *
	m·th
;

181 *
	mpci_id
;

182 
__u16
 
	mdev_id
;

183 
sys_dev
 *
	mÃxt
;

186 
	sefi_guid
 {

187 
__u8
 
	mb
[16];

190 
šlše
 *
	$guid_¡r
(*
buf
, 
efi_guid
 
guid
)

192 
	`¥rštf
(
buf
, "%02x%02x%02x%02x-%02x%02x-%02x%02x-"

194 
guid
.
b
[3], guid.b[2], guid.b[1], guid.b[0],

195 
guid
.
b
[5], guid.b[4], guid.b[7], guid.b[6],

196 
guid
.
b
[8], guid.b[9], guid.b[10], guid.b[11],

197 
guid
.
b
[12], guid.b[13], guid.b[14], guid.b[15]);

198  
buf
;

199 
	}
}

201 *
diskfd_to_dev·th
(
fd
);

202 
sys_dev
 *
fšd_driv”_deviûs
(cÚ¡ *
bus
, cÚ¡ *
driv”
);

203 
sys_dev
 *
fšd_š‹l_deviûs
();

204 cÚ¡ 
imsm_Üom
 *
fšd_imsm_ÿ·b™y
(
sys_dev_ty³
 
hba_id
);

205 cÚ¡ 
imsm_Üom
 *
fšd_imsm_Üom
();

206 
disk_©ched_to_hba
(
fd
, cÚ¡ *
hba_·th
);

207 
devt_©ched_to_hba
(
dev_t
 
dev
, cÚ¡ *
hba_·th
);

208 *
devt_to_dev·th
(
dev_t
 
dev
);

209 
·th_©ched_to_hba
(cÚ¡ *
disk_·th
, cÚ¡ *
hba_·th
);

210 cÚ¡ *
g‘_sys_dev_ty³
(
sys_dev_ty³
);

	@libmdadm/probe_roms.h

20 
´obe_roms_ex™
();

21 
´obe_roms_š™
(
®ign
);

22 (*
	tsÿn_â
)(cÚ¡ *
	t¡¬t
, cÚ¡ *
	t’d
, cÚ¡ *
	td©a
);

23 
	`sÿn_ad­‹r_roms
(
sÿn_â
 
â
);

24 
	`´obe_roms
();

	@libmdadm/sha1.h

20 #iâdeà
SHA1_H


21 
	#SHA1_H
 1

	)

23 
	~<¡dio.h
>

25 #ià
defšed
 
HAVE_LIMITS_H
 || 
_LIBC


26 
	~<lim™s.h
>

36 #ifdeà
_LIBC


37 
	~<sys/ty³s.h
>

38 
u_št32_t
 
	tsha1_ušt32
;

39 
ušŒ_t
 
	tsha1_ušŒ
;

41 
	#INT_MAX_32_BITS
 2147483647

	)

48 #iâdeà
INT_MAX


49 
	#INT_MAX
 
INT_MAX_32_BITS


	)

52 #ià
INT_MAX
 =ğ
INT_MAX_32_BITS


53 
	tsha1_ušt32
;

55 #ià
SHRT_MAX
 =ğ
INT_MAX_32_BITS


56 
	tsha1_ušt32
;

58 #ià
LONG_MAX
 =ğ
INT_MAX_32_BITS


59 
	tsha1_ušt32
;

69 #ifdeà
__ılu¥lus


74 
	ssha1_ùx


76 
sha1_ušt32
 
A
;

77 
sha1_ušt32
 
B
;

78 
sha1_ušt32
 
C
;

79 
sha1_ušt32
 
D
;

80 
sha1_ušt32
 
E
;

82 
sha1_ušt32
 
tÙ®
[2];

83 
sha1_ušt32
 
buæ’
;

84 
sha1_ušt32
 
bufãr
[32];

88 
sha1_š™_ùx
 (
sha1_ùx
 *
ùx
);

94 
sha1_´oûss_block
 (cÚ¡ *
bufãr
, 
size_t
 
Ën
,

95 
sha1_ùx
 *
ùx
);

101 
sha1_´oûss_by‹s
 (cÚ¡ *
bufãr
, 
size_t
 
Ën
,

102 
sha1_ùx
 *
ùx
);

111 *
sha1_fšish_ùx
 (
sha1_ùx
 *
ùx
, *
»sbuf
);

119 *
sha1_»ad_ùx
 (cÚ¡ 
sha1_ùx
 *
ùx
, *
»sbuf
);

124 
sha1_¡»am
 (
FILE
 *
¡»am
, *
»sblock
);

130 *
sha1_bufãr
 (cÚ¡ *
bufãr
, 
size_t
 
Ën
, *
»sblock
);

132 #ifdeà
__ılu¥lus


	@libmke2fs/ext2fs.h

12 #iâdeà
_EXT2FS_EXT2FS_H


13 
	#_EXT2FS_EXT2FS_H


	)

15 #ifdeà
__GNUC__


16 
	#EXT2FS_ATTR
(
x
è
	`__©Œibu‹__
(x)

	)

18 
	#EXT2FS_ATTR
(
x
)

	)

21 #ifdeà
__ılu¥lus


28 #ià(!
defšed
(
__GNUC__
è&& !defšed(
__WATCOMC__
))

29 
	#NO_INLINE_FUNCS


	)

39 
	#SUPERBLOCK_OFFSET
 1024

	)

40 
	#SUPERBLOCK_SIZE
 1024

	)

46 
	#EXT2_LIB_CURRENT_REV
 
EXT2_DYNAMIC_REV


	)

48 #ifdeà
HAVE_SYS_TYPES_H


49 
	~<sys/ty³s.h
>

52 
	~<¡dio.h
>

53 
	~<¡dlib.h
>

54 
	~<¡ršg.h
>

55 
	~<”ºo.h
>

57 #ià
EXT2_FLAT_INCLUDES


58 
	~"e2_ty³s.h
"

59 
	~"ext2_fs.h
"

60 
	~"ext3_ex‹Ás.h
"

62 
	~<ext2fs/ext2_ty³s.h
>

63 
	~<ext2fs/ext2_fs.h
>

64 
	~<ext2fs/ext3_ex‹Ás.h
>

67 #ifdeà
__CHECK_ENDIAN__


68 
	#__b™wi£
 
	`__©Œibu‹__
((
b™wi£
))

	)

70 
	#__b™wi£


	)

73 
__u32
 
	t__b™wi£
 
	text2_šo_t
;

74 
__u32
 
	t__b™wi£
 
	tblk_t
;

75 
__u64
 
	t__b™wi£
 
	tblk64_t
;

76 
__u32
 
	t__b™wi£
 
	tdg½_t
;

77 
__u32
 
	t__b™wi£
 
	text2_off_t
;

78 
__u64
 
	t__b™wi£
 
	text2_off64_t
;

79 
__s64
 
	t__b™wi£
 
	te2_blkút_t
;

80 
__u32
 
	t__b™wi£
 
	text2_dœhash_t
;

82 #ià
EXT2_FLAT_INCLUDES


83 
	~"com_”r.h
"

84 
	~"ext2_io.h
"

85 
	~"ext2_”r.h
"

86 
	~"ext2_ext_©Œ.h
"

88 
	~<‘/com_”r.h
>

89 
	~<ext2fs/ext2_io.h
>

90 
	~<ext2fs/ext2_”r.h
>

91 
	~<ext2fs/ext2_ext_©Œ.h
>

97 #ifdeà
_MSC_VER


98 
	#EXT2_QSORT_TYPE
 
__cdeş


	)

100 
	#EXT2_QSORT_TYPE
 

	)

103 
¡ruù_ext2_fsys
 *
	text2_fsys
;

105 
	#EXT2FS_MARK_ERROR
 0

	)

106 
	#EXT2FS_UNMARK_ERROR
 1

	)

107 
	#EXT2FS_TEST_ERROR
 2

	)

109 
ext2fs_¡ruù_g’”ic_b™m­
 *
	text2fs_g’”ic_b™m­
;

110 
ext2fs_¡ruù_g’”ic_b™m­
 *
	text2fs_šode_b™m­
;

111 
ext2fs_¡ruù_g’”ic_b™m­
 *
	text2fs_block_b™m­
;

113 
	#EXT2_FIRST_INODE
(
s
è
	`EXT2_FIRST_INO
(s)

	)

120 
ext2_¡ruù_u32_li¡
 *
	text2_badblocks_li¡
;

121 
ext2_¡ruù_u32_™”©e
 *
	text2_badblocks_™”©e
;

123 
ext2_¡ruù_u32_li¡
 *
	text2_u32_li¡
;

124 
ext2_¡ruù_u32_™”©e
 *
	text2_u32_™”©e
;

127 
ext2_¡ruù_u32_li¡
 *
	tbadblocks_li¡
;

128 
ext2_¡ruù_u32_™”©e
 *
	tbadblocks_™”©e
;

130 
	#BADBLOCKS_FLAG_DIRTY
 1

	)

135 
	sext2_db_’Œy2
 {

136 
ext2_šo_t
 
šo
;

137 
blk64_t
 
blk
;

138 
e2_blkút_t
 
blockút
;

142 
	sext2_db_’Œy
 {

143 
ext2_šo_t
 
šo
;

144 
blk_t
 
blk
;

145 
blockút
;

148 
ext2_¡ruù_dbli¡
 *
	text2_dbli¡
;

150 
	#DBLIST_ABORT
 1

	)

156 
	#EXT2_FILE_WRITE
 0x0001

	)

157 
	#EXT2_FILE_CREATE
 0x0002

	)

159 
	#EXT2_FILE_MASK
 0x00FF

	)

161 
	#EXT2_FILE_BUF_DIRTY
 0x4000

	)

162 
	#EXT2_FILE_BUF_VALID
 0x2000

	)

164 
ext2_fe
 *
	text2_fe_t
;

166 
	#EXT2_SEEK_SET
 0

	)

167 
	#EXT2_SEEK_CUR
 1

	)

168 
	#EXT2_SEEK_END
 2

	)

173 
	#EXT2_FLAG_RW
 0x01

	)

174 
	#EXT2_FLAG_CHANGED
 0x02

	)

175 
	#EXT2_FLAG_DIRTY
 0x04

	)

176 
	#EXT2_FLAG_VALID
 0x08

	)

177 
	#EXT2_FLAG_IB_DIRTY
 0x10

	)

178 
	#EXT2_FLAG_BB_DIRTY
 0x20

	)

179 
	#EXT2_FLAG_SWAP_BYTES
 0x40

	)

180 
	#EXT2_FLAG_SWAP_BYTES_READ
 0x80

	)

181 
	#EXT2_FLAG_SWAP_BYTES_WRITE
 0x100

	)

182 
	#EXT2_FLAG_MASTER_SB_ONLY
 0x200

	)

183 
	#EXT2_FLAG_FORCE
 0x400

	)

184 
	#EXT2_FLAG_SUPER_ONLY
 0x800

	)

185 
	#EXT2_FLAG_JOURNAL_DEV_OK
 0x1000

	)

186 
	#EXT2_FLAG_IMAGE_FILE
 0x2000

	)

187 
	#EXT2_FLAG_EXCLUSIVE
 0x4000

	)

188 
	#EXT2_FLAG_SOFTSUPP_FEATURES
 0x8000

	)

189 
	#EXT2_FLAG_NOFREE_ON_ERROR
 0x10000

	)

190 
	#EXT2_FLAG_64BITS
 0x20000

	)

191 
	#EXT2_FLAG_PRINT_PROGRESS
 0x40000

	)

192 
	#EXT2_FLAG_DIRECT_IO
 0x80000

	)

193 
	#EXT2_FLAG_SKIP_MMP
 0x100000

	)

199 
	#EXT2_NEW_INODE_FL
 0x80000000

	)

204 
	#EXT2_MKJOURNAL_V1_SUPER
 0x0000001

	)

205 
	#EXT2_MKJOURNAL_LAZYINIT
 0x0000002

	)

206 
	#EXT2_MKJOURNAL_NO_MNT_CHECK
 0x0000004

	)

208 
İaque_ext2_group_desc
;

210 
	s¡ruù_ext2_fsys
 {

211 
”rcode_t
 
magic
;

212 
io_chªÃl
 
io
;

213 
æags
;

214 * 
deviû_Çme
;

215 
ext2_su³r_block
 * 
su³r
;

216 
blocksize
;

217 
äagsize
;

218 
dg½_t
 
group_desc_couÁ
;

219 
desc_blocks
;

220 
İaque_ext2_group_desc
 * 
group_desc
;

221 
šode_blocks_³r_group
;

222 
ext2fs_šode_b™m­
 
šode_m­
;

223 
ext2fs_block_b™m­
 
block_m­
;

225 
”rcode_t
 (*
g‘_blocks
)(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
, 
blk_t
 *
blocks
);

226 
”rcode_t
 (*
check_dœeùÜy
)(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
);

227 
”rcode_t
 (*
wr™e_b™m­s
)(
ext2_fsys
 
fs
);

228 
”rcode_t
 (*
»ad_šode
)(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

229 
ext2_šode
 *
šode
);

230 
”rcode_t
 (*
wr™e_šode
)(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

231 
ext2_šode
 *
šode
);

232 
ext2_badblocks_li¡
 
badblocks
;

233 
ext2_dbli¡
 
dbli¡
;

234 
__u32
 
¡ride
;

235 
ext2_su³r_block
 * 
Üig_su³r
;

236 
ext2_image_hdr
 * 
image_h—d”
;

237 
__u32
 
umask
;

238 
time_t
 
now
;

239 
şu¡”_¿tio_b™s
;

240 
__u16
 
deçuÉ_b™m­_ty³
;

241 
__u16
 
·d
;

245 
__u32
 
»£rved
[5];

250 * 
´iv_d©a
;

255 
ext2_šode_ÿche
 *
iÿche
;

256 
io_chªÃl
 
image_io
;

261 
”rcode_t
 (*
g‘_®loc_block
)(
ext2_fsys
 
fs
, 
blk64_t
 
gßl
,

262 
blk64_t
 *
»t
);

263 (*
block_®loc_¡©s
)(
ext2_fsys
 
fs
, 
blk64_t
 
blk
, 
šu£
);

268 *
mmp_buf
;

269 *
mmp_cmp
;

270 
mmp_fd
;

275 
mmp_Ï¡_wr™‹n
;

278 #ià
EXT2_FLAT_INCLUDES


279 
	~"e2_b™İs.h
"

281 
	~<ext2fs/b™İs.h
>

287 
	#EXT2FS_BMAP64_BITARRAY
 1

	)

288 
	#EXT2FS_BMAP64_RBTREE
 2

	)

289 
	#EXT2FS_BMAP64_AUTODIR
 3

	)

294 
	#BLOCK_CHANGED
 1

	)

295 
	#BLOCK_ABORT
 2

	)

296 
	#BLOCK_ERROR
 4

	)

322 
	#BLOCK_FLAG_APPEND
 1

	)

323 
	#BLOCK_FLAG_HOLE
 1

	)

324 
	#BLOCK_FLAG_DEPTH_TRAVERSE
 2

	)

325 
	#BLOCK_FLAG_DATA_ONLY
 4

	)

326 
	#BLOCK_FLAG_READ_ONLY
 8

	)

328 
	#BLOCK_FLAG_NO_LARGE
 0x1000

	)

333 
	#BLOCK_COUNT_IND
 (-1)

	)

334 
	#BLOCK_COUNT_DIND
 (-2)

	)

335 
	#BLOCK_COUNT_TIND
 (-3)

	)

336 
	#BLOCK_COUNT_TRANSLATOR
 (-4)

	)

342 
	#EXT2_BMOVE_GET_DBLIST
 0x0001

	)

343 
	#EXT2_BMOVE_DEBUG
 0x0002

	)

350 
	#EXT2_EXTENT_FLAGS_LEAF
 0x0001

	)

351 
	#EXT2_EXTENT_FLAGS_UNINIT
 0x0002

	)

352 
	#EXT2_EXTENT_FLAGS_SECOND_VISIT
 0x0004

	)

354 
	sext2fs_ex‹Á
 {

355 
blk64_t
 
e_pblk
;

356 
blk64_t
 
e_lblk
;

357 
__u32
 
e_Ën
;

358 
__u32
 
e_æags
;

361 
ext2_ex‹Á_hªdË
 *
	text2_ex‹Á_hªdË_t
;

362 
ext2_ex‹Á_·th
 *
	text2_ex‹Á_·th_t
;

367 
	#EXT2_EXTENT_CURRENT
 0x0000

	)

368 
	#EXT2_EXTENT_MOVE_MASK
 0x000F

	)

369 
	#EXT2_EXTENT_ROOT
 0x0001

	)

370 
	#EXT2_EXTENT_LAST_LEAF
 0x0002

	)

371 
	#EXT2_EXTENT_FIRST_SIB
 0x0003

	)

372 
	#EXT2_EXTENT_LAST_SIB
 0x0004

	)

373 
	#EXT2_EXTENT_NEXT_SIB
 0x0005

	)

374 
	#EXT2_EXTENT_PREV_SIB
 0x0006

	)

375 
	#EXT2_EXTENT_NEXT_LEAF
 0x0007

	)

376 
	#EXT2_EXTENT_PREV_LEAF
 0x0008

	)

377 
	#EXT2_EXTENT_NEXT
 0x0009

	)

378 
	#EXT2_EXTENT_PREV
 0x000A

	)

379 
	#EXT2_EXTENT_UP
 0x000B

	)

380 
	#EXT2_EXTENT_DOWN
 0x000C

	)

381 
	#EXT2_EXTENT_DOWN_AND_LAST
 0x000D

	)

386 
	#EXT2_EXTENT_INSERT_AFTER
 0x0001

	)

387 
	#EXT2_EXTENT_INSERT_NOSPLIT
 0x0002

	)

392 
	#EXT2_EXTENT_DELETE_KEEP_EMPTY
 0x001

	)

397 
	#EXT2_EXTENT_SET_BMAP_UNINIT
 0x0001

	)

402 
	sext2_ex‹Á_šfo
 {

403 
cu¼_’Œy
;

404 
cu¼_Ëv–
;

405 
num_’Œ›s
;

406 
max_’Œ›s
;

407 
max_d•th
;

408 
by‹s_ava
;

409 
blk64_t
 
max_lblk
;

410 
blk64_t
 
max_pblk
;

411 
__u32
 
max_Ën
;

412 
__u32
 
max_unš™_Ën
;

418 
	#EXT2_DIRBLOCK_V2_STRUCT
 0x0001

	)

423 
	#DIRENT_CHANGED
 1

	)

424 
	#DIRENT_ABORT
 2

	)

425 
	#DIRENT_ERROR
 3

	)

431 
	#DIRENT_FLAG_INCLUDE_EMPTY
 1

	)

432 
	#DIRENT_FLAG_INCLUDE_REMOVED
 2

	)

434 
	#DIRENT_DOT_FILE
 1

	)

435 
	#DIRENT_DOT_DOT_FILE
 2

	)

436 
	#DIRENT_OTHER_FILE
 3

	)

437 
	#DIRENT_DELETED_FILE
 4

	)

442 
ext2_¡ruù_šode_sÿn
 *
	text2_šode_sÿn
;

447 
	#EXT2_SF_CHK_BADBLOCKS
 0x0001

	)

448 
	#EXT2_SF_BAD_INODE_BLK
 0x0002

	)

449 
	#EXT2_SF_BAD_EXTRA_BYTES
 0x0004

	)

450 
	#EXT2_SF_SKIP_MISSING_ITABLE
 0x0008

	)

451 
	#EXT2_SF_DO_LAZY
 0x0010

	)

456 
	#EXT2_MF_MOUNTED
 1

	)

457 
	#EXT2_MF_ISROOT
 2

	)

458 
	#EXT2_MF_READONLY
 4

	)

459 
	#EXT2_MF_SWAP
 8

	)

460 
	#EXT2_MF_BUSY
 16

	)

467 
	#LINUX_S_IFMT
 00170000

	)

468 
	#LINUX_S_IFSOCK
 0140000

	)

469 
	#LINUX_S_IFLNK
 0120000

	)

470 
	#LINUX_S_IFREG
 0100000

	)

471 
	#LINUX_S_IFBLK
 0060000

	)

472 
	#LINUX_S_IFDIR
 0040000

	)

473 
	#LINUX_S_IFCHR
 0020000

	)

474 
	#LINUX_S_IFIFO
 0010000

	)

475 
	#LINUX_S_ISUID
 0004000

	)

476 
	#LINUX_S_ISGID
 0002000

	)

477 
	#LINUX_S_ISVTX
 0001000

	)

479 
	#LINUX_S_IRWXU
 00700

	)

480 
	#LINUX_S_IRUSR
 00400

	)

481 
	#LINUX_S_IWUSR
 00200

	)

482 
	#LINUX_S_IXUSR
 00100

	)

484 
	#LINUX_S_IRWXG
 00070

	)

485 
	#LINUX_S_IRGRP
 00040

	)

486 
	#LINUX_S_IWGRP
 00020

	)

487 
	#LINUX_S_IXGRP
 00010

	)

489 
	#LINUX_S_IRWXO
 00007

	)

490 
	#LINUX_S_IROTH
 00004

	)

491 
	#LINUX_S_IWOTH
 00002

	)

492 
	#LINUX_S_IXOTH
 00001

	)

494 
	#LINUX_S_ISLNK
(
m
è(((mè& 
LINUX_S_IFMT
è=ğ
LINUX_S_IFLNK
)

	)

495 
	#LINUX_S_ISREG
(
m
è(((mè& 
LINUX_S_IFMT
è=ğ
LINUX_S_IFREG
)

	)

496 
	#LINUX_S_ISDIR
(
m
è(((mè& 
LINUX_S_IFMT
è=ğ
LINUX_S_IFDIR
)

	)

497 
	#LINUX_S_ISCHR
(
m
è(((mè& 
LINUX_S_IFMT
è=ğ
LINUX_S_IFCHR
)

	)

498 
	#LINUX_S_ISBLK
(
m
è(((mè& 
LINUX_S_IFMT
è=ğ
LINUX_S_IFBLK
)

	)

499 
	#LINUX_S_ISFIFO
(
m
è(((mè& 
LINUX_S_IFMT
è=ğ
LINUX_S_IFIFO
)

	)

500 
	#LINUX_S_ISSOCK
(
m
è(((mè& 
LINUX_S_IFMT
è=ğ
LINUX_S_IFSOCK
)

	)

505 
	#EXT2_I_SIZE
(
i
è((i)->
i_size
 | ((
__u64
è(i)->
i_size_high
 << 32))

	)

510 
	#EXT2_ICOUNT_OPT_INCREMENT
 0x01

	)

512 
ext2_icouÁ
 *
	text2_icouÁ_t
;

517 
	#BMAP_ALLOC
 0x0001

	)

518 
	#BMAP_SET
 0x0002

	)

523 
	#BMAP_RET_UNINIT
 0x0001

	)

528 
	#IMAGER_FLAG_INODEMAP
 1

	)

529 
	#IMAGER_FLAG_SPARSEWRITE
 2

	)

535 
	#EXT2_CHECK_MAGIC
(, 
code
) \

536 ià(()->
magic
 !ğ(
code
)è (code)

	)

542 
	#EXT2FS_COMPRESSED_BLKADDR
 ((
blk_t
è-1)

	)

543 
	#HOLE_BLKADDR
(
_b
è((_bè=ğ0 || (_bè=ğ
EXT2FS_COMPRESSED_BLKADDR
)

	)

548 
	#EXT2_LIB_FEATURE_COMPAT_SUPP
 (
EXT2_FEATURE_COMPAT_DIR_PREALLOC
|\

549 
EXT2_FEATURE_COMPAT_IMAGIC_INODES
|\

550 
EXT3_FEATURE_COMPAT_HAS_JOURNAL
|\

551 
EXT2_FEATURE_COMPAT_RESIZE_INODE
|\

552 
EXT2_FEATURE_COMPAT_DIR_INDEX
|\

553 
EXT2_FEATURE_COMPAT_EXT_ATTR
)

	)

556 #ifdeà
ENABLE_COMPRESSION


557 #iâdeà
I_KNOW_THAT_COMPRESSION_IS_EXPERIMENTAL


563 
	#EXT2_LIB_FEATURE_INCOMPAT_SUPP
 (
EXT2_FEATURE_INCOMPAT_FILETYPE
|\

564 
EXT2_FEATURE_INCOMPAT_COMPRESSION
|\

565 
EXT3_FEATURE_INCOMPAT_JOURNAL_DEV
|\

566 
EXT2_FEATURE_INCOMPAT_META_BG
|\

567 
EXT3_FEATURE_INCOMPAT_RECOVER
|\

568 
EXT3_FEATURE_INCOMPAT_EXTENTS
|\

569 
EXT4_FEATURE_INCOMPAT_FLEX_BG
|\

570 
EXT4_FEATURE_INCOMPAT_MMP
|\

571 
EXT4_FEATURE_INCOMPAT_64BIT
)

	)

573 
	#EXT2_LIB_FEATURE_INCOMPAT_SUPP
 (
EXT2_FEATURE_INCOMPAT_FILETYPE
|\

574 
EXT3_FEATURE_INCOMPAT_JOURNAL_DEV
|\

575 
EXT2_FEATURE_INCOMPAT_META_BG
|\

576 
EXT3_FEATURE_INCOMPAT_RECOVER
|\

577 
EXT3_FEATURE_INCOMPAT_EXTENTS
|\

578 
EXT4_FEATURE_INCOMPAT_FLEX_BG
|\

579 
EXT4_FEATURE_INCOMPAT_MMP
|\

580 
EXT4_FEATURE_INCOMPAT_64BIT
)

	)

582 #ifdeà
CONFIG_QUOTA


583 
	#EXT2_LIB_FEATURE_RO_COMPAT_SUPP
 (
EXT2_FEATURE_RO_COMPAT_SPARSE_SUPER
|\

584 
EXT4_FEATURE_RO_COMPAT_HUGE_FILE
|\

585 
EXT2_FEATURE_RO_COMPAT_LARGE_FILE
|\

586 
EXT4_FEATURE_RO_COMPAT_DIR_NLINK
|\

587 
EXT4_FEATURE_RO_COMPAT_EXTRA_ISIZE
|\

588 
EXT4_FEATURE_RO_COMPAT_GDT_CSUM
|\

589 
EXT4_FEATURE_RO_COMPAT_BIGALLOC
|\

590 
EXT4_FEATURE_RO_COMPAT_QUOTA
)

	)

592 
	#EXT2_LIB_FEATURE_RO_COMPAT_SUPP
 (
EXT2_FEATURE_RO_COMPAT_SPARSE_SUPER
|\

593 
EXT4_FEATURE_RO_COMPAT_HUGE_FILE
|\

594 
EXT2_FEATURE_RO_COMPAT_LARGE_FILE
|\

595 
EXT4_FEATURE_RO_COMPAT_DIR_NLINK
|\

596 
EXT4_FEATURE_RO_COMPAT_EXTRA_ISIZE
|\

597 
EXT4_FEATURE_RO_COMPAT_GDT_CSUM
|\

598 
EXT4_FEATURE_RO_COMPAT_BIGALLOC
)

	)

605 
	#EXT2_LIB_SOFTSUPP_INCOMPAT
 (0)

	)

606 
	#EXT2_LIB_SOFTSUPP_RO_COMPAT
 (
EXT4_FEATURE_RO_COMPAT_REPLICA
)

	)

610 
	#EXT2FS_CLUSTER_RATIO
(
fs
è(1 << (fs)->
şu¡”_¿tio_b™s
)

	)

611 
	#EXT2FS_CLUSTER_MASK
(
fs
è(
	`EXT2FS_CLUSTER_RATIO
(fsè- 1)

	)

612 
	#EXT2FS_B2C
(
fs
, 
blk
è((blkè>> (fs)->
şu¡”_¿tio_b™s
)

	)

614 
	#EXT2FS_C2B
(
fs
, 
şu¡”
è((şu¡”è<< (fs)->
şu¡”_¿tio_b™s
)

	)

616 
	#EXT2FS_NUM_B2C
(
fs
, 
blks
è(((blksè+ 
	`EXT2FS_CLUSTER_MASK
(fs)) >> \

617 (
fs
)->
şu¡”_¿tio_b™s
)

	)

619 #ià
defšed
(
HAVE_FSTAT64
è&& !defšed(
__OSX_AVAILABLE_BUT_DEPRECATED
)

620 
¡©64
 
	text2fs_¡ruù_¡©
;

622 
¡©
 
	text2fs_¡ruù_¡©
;

629 
	#EXT2_FLAG_FLUSH_NO_SYNC
 1

	)

636 
šlše
 
ext2fs_Ãeds_Ïrge_fe_ã©u»
(
fe_size
)

638  
fe_size
 >= 0x80000000ULL;

642 
”rcode_t
 
ext2fs_Ãw_šode
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
dœ
, 
mode
,

643 
ext2fs_šode_b™m­
 
m­
, 
ext2_šo_t
 *
»t
);

644 
”rcode_t
 
ext2fs_Ãw_block
(
ext2_fsys
 
fs
, 
blk_t
 
gßl
,

645 
ext2fs_block_b™m­
 
m­
, 
blk_t
 *
»t
);

646 
”rcode_t
 
ext2fs_Ãw_block2
(
ext2_fsys
 
fs
, 
blk64_t
 
gßl
,

647 
ext2fs_block_b™m­
 
m­
, 
blk64_t
 *
»t
);

648 
”rcode_t
 
ext2fs_g‘_ä“_blocks
(
ext2_fsys
 
fs
, 
blk_t
 
¡¬t
,

649 
blk_t
 
fšish
, 
num
,

650 
ext2fs_block_b™m­
 
m­
,

651 
blk_t
 *
»t
);

652 
”rcode_t
 
ext2fs_g‘_ä“_blocks2
(
ext2_fsys
 
fs
, 
blk64_t
 
¡¬t
,

653 
blk64_t
 
fšish
, 
num
,

654 
ext2fs_block_b™m­
 
m­
,

655 
blk64_t
 *
»t
);

656 
”rcode_t
 
ext2fs_®loc_block
(
ext2_fsys
 
fs
, 
blk_t
 
gßl
,

657 *
block_buf
, 
blk_t
 *
»t
);

658 
”rcode_t
 
ext2fs_®loc_block2
(
ext2_fsys
 
fs
, 
blk64_t
 
gßl
,

659 *
block_buf
, 
blk64_t
 *
»t
);

660 
ext2fs_£t_®loc_block_ÿÎback
(
ext2_fsys
 
fs
,

661 
”rcode_t
 (*
func
)(
ext2_fsys
 
fs
,

662 
blk64_t
 
gßl
,

663 
blk64_t
 *
»t
),

664 
”rcode_t
 (**
Şd
)(
ext2_fsys
 
fs
,

665 
blk64_t
 
gßl
,

666 
blk64_t
 *
»t
));

669 
ext2fs_»£rve_su³r_ªd_bgd
(
ext2_fsys
 
fs
,

670 
dg½_t
 
group
,

671 
ext2fs_block_b™m­
 
bm­
);

672 
ext2fs_£t_block_®loc_¡©s_ÿÎback
(
ext2_fsys
 
fs
,

673 (*
func
)(
ext2_fsys
 
fs
,

674 
blk64_t
 
blk
,

675 
šu£
),

676 (**
Şd
)(
ext2_fsys
 
fs
,

677 
blk64_t
 
blk
,

678 
šu£
));

681 
ext2fs_šode_®loc_¡©s
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
, 
šu£
);

682 
ext2fs_šode_®loc_¡©s2
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

683 
šu£
, 
isdœ
);

684 
ext2fs_block_®loc_¡©s
(
ext2_fsys
 
fs
, 
blk_t
 
blk
, 
šu£
);

685 
ext2fs_block_®loc_¡©s2
(
ext2_fsys
 
fs
, 
blk64_t
 
blk
, 
šu£
);

688 
”rcode_t
 
ext2fs_®loÿ‹_bËs
(
ext2_fsys
 
fs
);

689 
”rcode_t
 
ext2fs_®loÿ‹_group_bË
(
ext2_fsys
 
fs
, 
dg½_t
 
group
,

690 
ext2fs_block_b™m­
 
bm­
);

693 
”rcode_t
 
ext2fs_u32_li¡_ü—‹
(
ext2_u32_li¡
 *
»t
, 
size
);

694 
”rcode_t
 
ext2fs_u32_li¡_add
(
ext2_u32_li¡
 
bb
, 
__u32
 
blk
);

695 
ext2fs_u32_li¡_fšd
(
ext2_u32_li¡
 
bb
, 
__u32
 
blk
);

696 
ext2fs_u32_li¡_‹¡
(
ext2_u32_li¡
 
bb
, 
blk_t
 
blk
);

697 
”rcode_t
 
ext2fs_u32_li¡_™”©e_begš
(
ext2_u32_li¡
 
bb
,

698 
ext2_u32_™”©e
 *
»t
);

699 
ext2fs_u32_li¡_™”©e
(
ext2_u32_™”©e
 
™”
, 
blk_t
 *
blk
);

700 
ext2fs_u32_li¡_™”©e_’d
(
ext2_u32_™”©e
 
™”
);

701 
”rcode_t
 
ext2fs_u32_cİy
(
ext2_u32_li¡
 
¤c
,ƒxt2_u32_li¡ *
de¡
);

702 
ext2fs_u32_li¡_equ®
(
ext2_u32_li¡
 
bb1
,ƒxt2_u32_li¡ 
bb2
);

704 
”rcode_t
 
ext2fs_badblocks_li¡_ü—‹
(
ext2_badblocks_li¡
 *
»t
,

705 
size
);

706 
”rcode_t
 
ext2fs_badblocks_li¡_add
(
ext2_badblocks_li¡
 
bb
,

707 
blk_t
 
blk
);

708 
ext2fs_badblocks_li¡_‹¡
(
ext2_badblocks_li¡
 
bb
,

709 
blk_t
 
blk
);

710 
ext2fs_u32_li¡_d–
(
ext2_u32_li¡
 
bb
, 
__u32
 
blk
);

711 
ext2fs_badblocks_li¡_d–
(
ext2_u32_li¡
 
bb
, 
__u32
 
blk
);

712 
”rcode_t


713 
ext2fs_badblocks_li¡_™”©e_begš
(
ext2_badblocks_li¡
 
bb
,

714 
ext2_badblocks_™”©e
 *
»t
);

715 
ext2fs_badblocks_li¡_™”©e
(
ext2_badblocks_™”©e
 
™”
,

716 
blk_t
 *
blk
);

717 
ext2fs_badblocks_li¡_™”©e_’d
(
ext2_badblocks_™”©e
 
™”
);

718 
”rcode_t
 
ext2fs_badblocks_cİy
(
ext2_badblocks_li¡
 
¤c
,

719 
ext2_badblocks_li¡
 *
de¡
);

720 
ext2fs_badblocks_equ®
(
ext2_badblocks_li¡
 
bb1
,

721 
ext2_badblocks_li¡
 
bb2
);

722 
ext2fs_u32_li¡_couÁ
(
ext2_u32_li¡
 
bb
);

725 
”rcode_t
 
badblocks_li¡_ü—‹
(
badblocks_li¡
 *
»t
, 
size
);

726 
”rcode_t
 
badblocks_li¡_add
(
badblocks_li¡
 
bb
, 
blk_t
 
blk
);

727 
badblocks_li¡_‹¡
(
badblocks_li¡
 
bb
, 
blk_t
 
blk
);

728 
”rcode_t
 
badblocks_li¡_™”©e_begš
(
badblocks_li¡
 
bb
,

729 
badblocks_™”©e
 *
»t
);

730 
badblocks_li¡_™”©e
(
badblocks_™”©e
 
™”
, 
blk_t
 *
blk
);

731 
badblocks_li¡_™”©e_’d
(
badblocks_™”©e
 
™”
);

732 
badblocks_li¡_ä“
(
badblocks_li¡
 
bb
);

735 
”rcode_t
 
ext2fs_upd©e_bb_šode
(
ext2_fsys
 
fs
,

736 
ext2_badblocks_li¡
 
bb_li¡
);

739 
ext2fs_ä“_block_b™m­
(
ext2fs_block_b™m­
 
b™m­
);

740 
ext2fs_ä“_šode_b™m­
(
ext2fs_šode_b™m­
 
b™m­
);

741 
”rcode_t
 
ext2fs_cİy_b™m­
(
ext2fs_g’”ic_b™m­
 
¤c
,

742 
ext2fs_g’”ic_b™m­
 *
de¡
);

743 
”rcode_t
 
ext2fs_wr™e_šode_b™m­
(
ext2_fsys
 
fs
);

744 
”rcode_t
 
ext2fs_wr™e_block_b™m­
 (
ext2_fsys
 
fs
);

745 
”rcode_t
 
ext2fs_»ad_šode_b™m­
 (
ext2_fsys
 
fs
);

746 
”rcode_t
 
ext2fs_»ad_block_b™m­
(
ext2_fsys
 
fs
);

747 
”rcode_t
 
ext2fs_®loÿ‹_block_b™m­
(
ext2_fsys
 
fs
,

748 cÚ¡ *
desü
,

749 
ext2fs_block_b™m­
 *
»t
);

750 
”rcode_t
 
ext2fs_®loÿ‹_subşu¡”_b™m­
(
ext2_fsys
 
fs
,

751 cÚ¡ *
desü
,

752 
ext2fs_block_b™m­
 *
»t
);

753 
ext2fs_g‘_b™m­_g¿nuÏr™y
(
ext2fs_block_b™m­
 
b™m­
);

754 
”rcode_t
 
ext2fs_®loÿ‹_šode_b™m­
(
ext2_fsys
 
fs
,

755 cÚ¡ *
desü
,

756 
ext2fs_šode_b™m­
 *
»t
);

757 
”rcode_t
 
ext2fs_fudge_šode_b™m­_’d
(
ext2fs_šode_b™m­
 
b™m­
,

758 
ext2_šo_t
 
’d
,ƒxt2_šo_ˆ*
Ûnd
);

759 
”rcode_t
 
ext2fs_fudge_block_b™m­_’d
(
ext2fs_block_b™m­
 
b™m­
,

760 
blk_t
 
’d
, blk_ˆ*
Ûnd
);

761 
”rcode_t
 
ext2fs_fudge_block_b™m­_’d2
(
ext2fs_block_b™m­
 
b™m­
,

762 
blk64_t
 
’d
, blk64_ˆ*
Ûnd
);

763 
ext2fs_ş—r_šode_b™m­
(
ext2fs_šode_b™m­
 
b™m­
);

764 
ext2fs_ş—r_block_b™m­
(
ext2fs_block_b™m­
 
b™m­
);

765 
”rcode_t
 
ext2fs_»ad_b™m­s
(
ext2_fsys
 
fs
);

766 
”rcode_t
 
ext2fs_wr™e_b™m­s
(
ext2_fsys
 
fs
);

767 
”rcode_t
 
ext2fs_»size_šode_b™m­
(
__u32
 
Ãw_’d
, __u32 
Ãw_»®_’d
,

768 
ext2fs_šode_b™m­
 
bm­
);

769 
”rcode_t
 
ext2fs_»size_šode_b™m­2
(
__u64
 
Ãw_’d
,

770 
__u64
 
Ãw_»®_’d
,

771 
ext2fs_šode_b™m­
 
bm­
);

772 
”rcode_t
 
ext2fs_»size_block_b™m­
(
__u32
 
Ãw_’d
, __u32 
Ãw_»®_’d
,

773 
ext2fs_block_b™m­
 
bm­
);

774 
”rcode_t
 
ext2fs_»size_block_b™m­2
(
__u64
 
Ãw_’d
,

775 
__u64
 
Ãw_»®_’d
,

776 
ext2fs_block_b™m­
 
bm­
);

777 
”rcode_t
 
ext2fs_com·»_block_b™m­
(
ext2fs_block_b™m­
 
bm1
,

778 
ext2fs_block_b™m­
 
bm2
);

779 
”rcode_t
 
ext2fs_com·»_šode_b™m­
(
ext2fs_šode_b™m­
 
bm1
,

780 
ext2fs_šode_b™m­
 
bm2
);

781 
”rcode_t
 
ext2fs_£t_šode_b™m­_¿nge
(
ext2fs_šode_b™m­
 
bm­
,

782 
ext2_šo_t
 
¡¬t
, 
num
,

783 *
š
);

784 
”rcode_t
 
ext2fs_£t_šode_b™m­_¿nge2
(
ext2fs_šode_b™m­
 
bm­
,

785 
__u64
 
¡¬t
, 
size_t
 
num
,

786 *
š
);

787 
”rcode_t
 
ext2fs_g‘_šode_b™m­_¿nge
(
ext2fs_šode_b™m­
 
bm­
,

788 
ext2_šo_t
 
¡¬t
, 
num
,

789 *
out
);

790 
”rcode_t
 
ext2fs_g‘_šode_b™m­_¿nge2
(
ext2fs_šode_b™m­
 
bm­
,

791 
__u64
 
¡¬t
, 
size_t
 
num
,

792 *
out
);

793 
”rcode_t
 
ext2fs_£t_block_b™m­_¿nge
(
ext2fs_block_b™m­
 
bm­
,

794 
blk_t
 
¡¬t
, 
num
,

795 *
š
);

796 
”rcode_t
 
ext2fs_£t_block_b™m­_¿nge2
(
ext2fs_block_b™m­
 
bm­
,

797 
blk64_t
 
¡¬t
, 
size_t
 
num
,

798 *
š
);

799 
”rcode_t
 
ext2fs_g‘_block_b™m­_¿nge
(
ext2fs_block_b™m­
 
bm­
,

800 
blk_t
 
¡¬t
, 
num
,

801 *
out
);

802 
”rcode_t
 
ext2fs_g‘_block_b™m­_¿nge2
(
ext2fs_block_b™m­
 
bm­
,

803 
blk64_t
 
¡¬t
, 
size_t
 
num
,

804 *
out
);

807 
dg½_t
 
ext2fs_group_of_blk2
(
ext2_fsys
 
fs
, 
blk64_t
);

808 
blk64_t
 
ext2fs_group_fœ¡_block2
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

809 
blk64_t
 
ext2fs_group_Ï¡_block2
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

810 
ext2fs_group_blocks_couÁ
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

811 
blk64_t
 
ext2fs_šode_d©a_blocks2
(
ext2_fsys
 
fs
,

812 
ext2_šode
 *
šode
);

813 
blk64_t
 
ext2fs_šode_i_blocks
(
ext2_fsys
 
fs
,

814 
ext2_šode
 *
šode
);

815 
blk64_t
 
ext2fs_blocks_couÁ
(
ext2_su³r_block
 *
su³r
);

816 
ext2fs_blocks_couÁ_£t
(
ext2_su³r_block
 *
su³r
,

817 
blk64_t
 
blk
);

818 
ext2fs_blocks_couÁ_add
(
ext2_su³r_block
 *
su³r
,

819 
blk64_t
 
blk
);

820 
blk64_t
 
ext2fs_r_blocks_couÁ
(
ext2_su³r_block
 *
su³r
);

821 
ext2fs_r_blocks_couÁ_£t
(
ext2_su³r_block
 *
su³r
,

822 
blk64_t
 
blk
);

823 
ext2fs_r_blocks_couÁ_add
(
ext2_su³r_block
 *
su³r
,

824 
blk64_t
 
blk
);

825 
blk64_t
 
ext2fs_ä“_blocks_couÁ
(
ext2_su³r_block
 *
su³r
);

826 
ext2fs_ä“_blocks_couÁ_£t
(
ext2_su³r_block
 *
su³r
,

827 
blk64_t
 
blk
);

828 
ext2fs_ä“_blocks_couÁ_add
(
ext2_su³r_block
 *
su³r
,

829 
blk64_t
 
blk
);

831 
ext2_group_desc
 *
ext2fs_group_desc
(
ext2_fsys
 
fs
,

832 
İaque_ext2_group_desc
 *
gdp
,

833 
dg½_t
 
group
);

834 
blk64_t
 
ext2fs_block_b™m­_loc
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

835 
ext2fs_block_b™m­_loc_£t
(
ext2_fsys
 
fs
, 
dg½_t
 
group
,

836 
blk64_t
 
blk
);

837 
blk64_t
 
ext2fs_šode_b™m­_loc
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

838 
ext2fs_šode_b™m­_loc_£t
(
ext2_fsys
 
fs
, 
dg½_t
 
group
,

839 
blk64_t
 
blk
);

840 
blk64_t
 
ext2fs_šode_bË_loc
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

841 
ext2fs_šode_bË_loc_£t
(
ext2_fsys
 
fs
, 
dg½_t
 
group
,

842 
blk64_t
 
blk
);

843 
__u32
 
ext2fs_bg_ä“_blocks_couÁ
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

844 
ext2fs_bg_ä“_blocks_couÁ_£t
(
ext2_fsys
 
fs
, 
dg½_t
 
group
,

845 
__u32
 
n
);

846 
__u32
 
ext2fs_bg_ä“_šodes_couÁ
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

847 
ext2fs_bg_ä“_šodes_couÁ_£t
(
ext2_fsys
 
fs
, 
dg½_t
 
group
,

848 
__u32
 
n
);

849 
__u32
 
ext2fs_bg_u£d_dœs_couÁ
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

850 
ext2fs_bg_u£d_dœs_couÁ_£t
(
ext2_fsys
 
fs
, 
dg½_t
 
group
,

851 
__u32
 
n
);

852 
__u32
 
ext2fs_bg_™abË_unu£d
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

853 
ext2fs_bg_™abË_unu£d_£t
(
ext2_fsys
 
fs
, 
dg½_t
 
group
,

854 
__u32
 
n
);

855 
__u16
 
ext2fs_bg_æags
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

856 
ext2fs_bg_æags_z­
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

857 
ext2fs_bg_æags_‹¡
(
ext2_fsys
 
fs
, 
dg½_t
 
group
, 
__u16
 
bg_æag
);

858 
ext2fs_bg_æags_£t
(
ext2_fsys
 
fs
, 
dg½_t
 
group
, 
__u16
 
bg_æags
);

859 
ext2fs_bg_æags_ş—r
(
ext2_fsys
 
fs
, 
dg½_t
 
group
, 
__u16
 
bg_æags
);

860 
__u16
 
ext2fs_bg_checksum
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

861 
ext2fs_bg_checksum_£t
(
ext2_fsys
 
fs
, 
dg½_t
 
group
, 
__u16
 
checksum
);

862 
blk64_t
 
ext2fs_fe_aş_block
(
ext2_fsys
 
fs
,

863 cÚ¡ 
ext2_šode
 *
šode
);

864 
ext2fs_fe_aş_block_£t
(
ext2_fsys
 
fs
,

865 
ext2_šode
 *
šode
, 
blk64_t
 
blk
);

868 
”rcode_t
 
ext2fs_block_™”©e
(
ext2_fsys
 
fs
,

869 
ext2_šo_t
 
šo
,

870 
æags
,

871 *
block_buf
,

872 (*
func
)(
ext2_fsys
 
fs
,

873 
blk_t
 *
blockÄ
,

874 
blockút
,

875 *
´iv_d©a
),

876 *
´iv_d©a
);

877 
”rcode_t
 
ext2fs_block_™”©e2
(
ext2_fsys
 
fs
,

878 
ext2_šo_t
 
šo
,

879 
æags
,

880 *
block_buf
,

881 (*
func
)(
ext2_fsys
 
fs
,

882 
blk_t
 *
blockÄ
,

883 
e2_blkút_t
 
blockút
,

884 
blk_t
 
»f_blk
,

885 
»f_off£t
,

886 *
´iv_d©a
),

887 *
´iv_d©a
);

888 
”rcode_t
 
ext2fs_block_™”©e3
(
ext2_fsys
 
fs
,

889 
ext2_šo_t
 
šo
,

890 
æags
,

891 *
block_buf
,

892 (*
func
)(
ext2_fsys
 
fs
,

893 
blk64_t
 *
blockÄ
,

894 
e2_blkút_t
 
blockút
,

895 
blk64_t
 
»f_blk
,

896 
»f_off£t
,

897 *
´iv_d©a
),

898 *
´iv_d©a
);

901 
”rcode_t
 
ext2fs_bm­
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

902 
ext2_šode
 *
šode
,

903 *
block_buf
, 
bm­_æags
,

904 
blk_t
 
block
, blk_ˆ*
phys_blk
);

905 
”rcode_t
 
ext2fs_bm­2
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

906 
ext2_šode
 *
šode
,

907 *
block_buf
, 
bm­_æags
, 
blk64_t
 
block
,

908 *
»t_æags
, 
blk64_t
 *
phys_blk
);

909 
”rcode_t
 
ext2fs_m­_şu¡”_block
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

910 
ext2_šode
 *
šode
, 
blk64_t
 
lblk
,

911 
blk64_t
 *
pblk
);

915 
”rcode_t
 
ext2fs_move_blocks
(
ext2_fsys
 
fs
,

916 
ext2fs_block_b™m­
 
»£rve
,

917 
ext2fs_block_b™m­
 
®loc_m­
,

918 
æags
);

922 
”rcode_t
 
ext2fs_check_desc
(
ext2_fsys
 
fs
);

925 
”rcode_t
 
ext2fs_şo£
(
ext2_fsys
 
fs
);

926 
”rcode_t
 
ext2fs_şo£2
(
ext2_fsys
 
fs
, 
æags
);

927 
”rcode_t
 
ext2fs_æush
(
ext2_fsys
 
fs
);

928 
”rcode_t
 
ext2fs_æush2
(
ext2_fsys
 
fs
, 
æags
);

929 
ext2fs_bg_has_su³r
(
ext2_fsys
 
fs
, 
dg½_t
 
group_block
);

930 
”rcode_t
 
ext2fs_su³r_ªd_bgd_loc2
(
ext2_fsys
 
fs
,

931 
dg½_t
 
group
,

932 
blk64_t
 *
»t_su³r_blk
,

933 
blk64_t
 *
»t_Şd_desc_blk
,

934 
blk64_t
 *
»t_Ãw_desc_blk
,

935 
blk_t
 *
»t_u£d_blks
);

936 
ext2fs_su³r_ªd_bgd_loc
(
ext2_fsys
 
fs
,

937 
dg½_t
 
group
,

938 
blk_t
 *
»t_su³r_blk
,

939 
blk_t
 *
»t_Şd_desc_blk
,

940 
blk_t
 *
»t_Ãw_desc_blk
,

941 *
»t_m‘a_bg
);

942 
ext2fs_upd©e_dyÇmic_»v
(
ext2_fsys
 
fs
);

945 
__u32
 
ext2fs_üc32c_be
(__u32 
üc
, cÚ¡ *
p
, 
size_t
 
Ën
);

946 
__u32
 
ext2fs_üc32c_Ë
(__u32 
üc
, cÚ¡ *
p
, 
size_t
 
Ën
);

949 
ext2fs_group_desc_csum_£t
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

950 
ext2fs_group_desc_csum_v”ify
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

951 
”rcode_t
 
ext2fs_£t_gdt_csum
(
ext2_fsys
 
fs
);

952 
__u16
 
ext2fs_group_desc_csum
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

956 
”rcode_t
 
ext2fs_g‘_num_dœs
(
ext2_fsys
 
fs
, 
ext2_šo_t
 *
»t_num_dœs
);

957 
”rcode_t
 
ext2fs_š™_dbli¡
(
ext2_fsys
 
fs
, 
ext2_dbli¡
 *
»t_dbli¡
);

958 
”rcode_t
 
ext2fs_add_dœ_block
(
ext2_dbli¡
 
dbli¡
, 
ext2_šo_t
 
šo
,

959 
blk_t
 
blk
, 
blockút
);

960 
”rcode_t
 
ext2fs_add_dœ_block2
(
ext2_dbli¡
 
dbli¡
, 
ext2_šo_t
 
šo
,

961 
blk64_t
 
blk
, 
e2_blkút_t
 
blockút
);

962 
ext2fs_dbli¡_sÜt
(
ext2_dbli¡
 
dbli¡
,

963 
EXT2_QSORT_TYPE
 (*
sÜtfunc
)(const *,

965 
ext2fs_dbli¡_sÜt2
(
ext2_dbli¡
 
dbli¡
,

966 
EXT2_QSORT_TYPE
 (*
sÜtfunc
)(const *,

968 
”rcode_t
 
ext2fs_dbli¡_™”©e
(
ext2_dbli¡
 
dbli¡
,

969 (*
func
)(
ext2_fsys
 
fs
, 
ext2_db_’Œy
 *
db_šfo
,

970 *
´iv_d©a
),

971 *
´iv_d©a
);

972 
”rcode_t
 
ext2fs_dbli¡_™”©e2
(
ext2_dbli¡
 
dbli¡
,

973 (*
func
)(
ext2_fsys
 
fs
, 
ext2_db_’Œy2
 *
db_šfo
,

974 *
´iv_d©a
),

975 *
´iv_d©a
);

976 
”rcode_t
 
ext2fs_£t_dœ_block
(
ext2_dbli¡
 
dbli¡
, 
ext2_šo_t
 
šo
,

977 
blk_t
 
blk
, 
blockút
);

978 
”rcode_t
 
ext2fs_£t_dœ_block2
(
ext2_dbli¡
 
dbli¡
, 
ext2_šo_t
 
šo
,

979 
blk64_t
 
blk
, 
e2_blkút_t
 
blockút
);

980 
”rcode_t
 
ext2fs_cİy_dbli¡
(
ext2_dbli¡
 
¤c
,

981 
ext2_dbli¡
 *
de¡
);

982 
ext2fs_dbli¡_couÁ
(
ext2_dbli¡
 
dbli¡
);

983 
blk64_t
 
ext2fs_dbli¡_couÁ2
(
ext2_dbli¡
 
dbli¡
);

984 
”rcode_t
 
ext2fs_dbli¡_g‘_Ï¡
(
ext2_dbli¡
 
dbli¡
,

985 
ext2_db_’Œy
 **
’Œy
);

986 
”rcode_t
 
ext2fs_dbli¡_g‘_Ï¡2
(
ext2_dbli¡
 
dbli¡
,

987 
ext2_db_’Œy2
 **
’Œy
);

988 
”rcode_t
 
ext2fs_dbli¡_drİ_Ï¡
(
ext2_dbli¡
 
dbli¡
);

991 
”rcode_t


992 
ext2fs_dbli¡_dœ_™”©e
(
ext2_dbli¡
 
dbli¡
,

993 
æags
,

994 *
block_buf
,

995 (*
func
)(
ext2_šo_t
 
dœ
,

996 
’Œy
,

997 
ext2_dœ_’Œy
 *
dœ’t
,

998 
off£t
,

999 
blocksize
,

1000 *
buf
,

1001 *
´iv_d©a
),

1002 *
´iv_d©a
);

1005 
”rcode_t
 
ext2fs_»ad_dœ_block
(
ext2_fsys
 
fs
, 
blk_t
 
block
,

1006 *
buf
);

1007 
”rcode_t
 
ext2fs_»ad_dœ_block2
(
ext2_fsys
 
fs
, 
blk_t
 
block
,

1008 *
buf
, 
æags
);

1009 
”rcode_t
 
ext2fs_»ad_dœ_block3
(
ext2_fsys
 
fs
, 
blk64_t
 
block
,

1010 *
buf
, 
æags
);

1011 
”rcode_t
 
ext2fs_wr™e_dœ_block
(
ext2_fsys
 
fs
, 
blk_t
 
block
,

1012 *
buf
);

1013 
”rcode_t
 
ext2fs_wr™e_dœ_block2
(
ext2_fsys
 
fs
, 
blk_t
 
block
,

1014 *
buf
, 
æags
);

1015 
”rcode_t
 
ext2fs_wr™e_dœ_block3
(
ext2_fsys
 
fs
, 
blk64_t
 
block
,

1016 *
buf
, 
æags
);

1019 
”rcode_t
 
ext2fs_dœhash
(
v”siÚ
, cÚ¡ *
Çme
, 
Ën
,

1020 cÚ¡ 
__u32
 *
£ed
,

1021 
ext2_dœhash_t
 *
»t_hash
,

1022 
ext2_dœhash_t
 *
»t_mšÜ_hash
);

1026 
”rcode_t
 
ext2fs_g‘_»c_Ën
(
ext2_fsys
 
fs
,

1027 
ext2_dœ_’Œy
 *
dœ’t
,

1028 *
»c_Ën
);

1029 
”rcode_t
 
ext2fs_£t_»c_Ën
(
ext2_fsys
 
fs
,

1030 
Ën
,

1031 
ext2_dœ_’Œy
 *
dœ’t
);

1032 
”rcode_t
 
ext2fs_dœ_™”©e
(
ext2_fsys
 
fs
,

1033 
ext2_šo_t
 
dœ
,

1034 
æags
,

1035 *
block_buf
,

1036 (*
func
)(
ext2_dœ_’Œy
 *
dœ’t
,

1037 
off£t
,

1038 
blocksize
,

1039 *
buf
,

1040 *
´iv_d©a
),

1041 *
´iv_d©a
);

1042 
”rcode_t
 
ext2fs_dœ_™”©e2
(
ext2_fsys
 
fs
,

1043 
ext2_šo_t
 
dœ
,

1044 
æags
,

1045 *
block_buf
,

1046 (*
func
)(
ext2_šo_t
 
dœ
,

1047 
’Œy
,

1048 
ext2_dœ_’Œy
 *
dœ’t
,

1049 
off£t
,

1050 
blocksize
,

1051 *
buf
,

1052 *
´iv_d©a
),

1053 *
´iv_d©a
);

1056 
”rcode_t
 
ext2fs_dup_hªdË
(
ext2_fsys
 
¤c
,ƒxt2_fsy *
de¡
);

1059 
”rcode_t
 
ext2fs_ex·nd_dœ
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
dœ
);

1062 
__u32
 
ext2fs_ext_©Œ_hash_’Œy
(
ext2_ext_©Œ_’Œy
 *
’Œy
,

1063 *
d©a
);

1064 
”rcode_t
 
ext2fs_»ad_ext_©Œ
(
ext2_fsys
 
fs
, 
blk_t
 
block
, *
buf
);

1065 
”rcode_t
 
ext2fs_»ad_ext_©Œ2
(
ext2_fsys
 
fs
, 
blk64_t
 
block
,

1066 *
buf
);

1067 
”rcode_t
 
ext2fs_wr™e_ext_©Œ
(
ext2_fsys
 
fs
, 
blk_t
 
block
,

1068 *
buf
);

1069 
”rcode_t
 
ext2fs_wr™e_ext_©Œ2
(
ext2_fsys
 
fs
, 
blk64_t
 
block
,

1070 *
buf
);

1071 
”rcode_t
 
ext2fs_adju¡_—_»fcouÁ
(
ext2_fsys
 
fs
, 
blk_t
 
blk
,

1072 *
block_buf
,

1073 
adju¡
, 
__u32
 *
ÃwcouÁ
);

1074 
”rcode_t
 
ext2fs_adju¡_—_»fcouÁ2
(
ext2_fsys
 
fs
, 
blk64_t
 
blk
,

1075 *
block_buf
,

1076 
adju¡
, 
__u32
 *
ÃwcouÁ
);

1079 
”rcode_t
 
ext2fs_ex‹Á_h—d”_v”ify
(*
±r
, 
size
);

1080 
”rcode_t
 
ext2fs_ex‹Á_İ’
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

1081 
ext2_ex‹Á_hªdË_t
 *
hªdË
);

1082 
”rcode_t
 
ext2fs_ex‹Á_İ’2
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

1083 
ext2_šode
 *
šode
,

1084 
ext2_ex‹Á_hªdË_t
 *
»t_hªdË
);

1085 
ext2fs_ex‹Á_ä“
(
ext2_ex‹Á_hªdË_t
 
hªdË
);

1086 
”rcode_t
 
ext2fs_ex‹Á_g‘
(
ext2_ex‹Á_hªdË_t
 
hªdË
,

1087 
æags
, 
ext2fs_ex‹Á
 *
ex‹Á
);

1088 
”rcode_t
 
ext2fs_ex‹Á_node_¥l™
(
ext2_ex‹Á_hªdË_t
 
hªdË
);

1089 
”rcode_t
 
ext2fs_ex‹Á_»¶aû
(
ext2_ex‹Á_hªdË_t
 
hªdË
, 
æags
,

1090 
ext2fs_ex‹Á
 *
ex‹Á
);

1091 
”rcode_t
 
ext2fs_ex‹Á_š£¹
(
ext2_ex‹Á_hªdË_t
 
hªdË
, 
æags
,

1092 
ext2fs_ex‹Á
 *
ex‹Á
);

1093 
”rcode_t
 
ext2fs_ex‹Á_£t_bm­
(
ext2_ex‹Á_hªdË_t
 
hªdË
,

1094 
blk64_t
 
logiÿl
, blk64_ˆ
physiÿl
,

1095 
æags
);

1096 
”rcode_t
 
ext2fs_ex‹Á_d–‘e
(
ext2_ex‹Á_hªdË_t
 
hªdË
, 
æags
);

1097 
”rcode_t
 
ext2fs_ex‹Á_g‘_šfo
(
ext2_ex‹Á_hªdË_t
 
hªdË
,

1098 
ext2_ex‹Á_šfo
 *
šfo
);

1099 
”rcode_t
 
ext2fs_ex‹Á_gÙo
(
ext2_ex‹Á_hªdË_t
 
hªdË
,

1100 
blk64_t
 
blk
);

1101 
”rcode_t
 
ext2fs_ex‹Á_gÙo2
(
ext2_ex‹Á_hªdË_t
 
hªdË
,

1102 
Ëaf_Ëv–
, 
blk64_t
 
blk
);

1103 
”rcode_t
 
ext2fs_ex‹Á_fix_·»Ás
(
ext2_ex‹Á_hªdË_t
 
hªdË
);

1106 
”rcode_t
 
ext2fs_fe_İ’2
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

1107 
ext2_šode
 *
šode
,

1108 
æags
, 
ext2_fe_t
 *
»t
);

1109 
”rcode_t
 
ext2fs_fe_İ’
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

1110 
æags
, 
ext2_fe_t
 *
»t
);

1111 
ext2_fsys
 
ext2fs_fe_g‘_fs
(
ext2_fe_t
 
fe
);

1112 
ext2_šode
 *
ext2fs_fe_g‘_šode
(
ext2_fe_t
 
fe
);

1113 
ext2_šo_t
 
ext2fs_fe_g‘_šode_num
(
ext2_fe_t
 
fe
);

1114 
”rcode_t
 
ext2fs_fe_şo£
(
ext2_fe_t
 
fe
);

1115 
”rcode_t
 
ext2fs_fe_æush
(
ext2_fe_t
 
fe
);

1116 
”rcode_t
 
ext2fs_fe_»ad
(
ext2_fe_t
 
fe
, *
buf
,

1117 
wª‹d
, *
gÙ
);

1118 
”rcode_t
 
ext2fs_fe_wr™e
(
ext2_fe_t
 
fe
, cÚ¡ *
buf
,

1119 
nby‹s
, *
wr™‹n
);

1120 
”rcode_t
 
ext2fs_fe_Î£ek
(
ext2_fe_t
 
fe
, 
__u64
 
off£t
,

1121 
wh’û
, 
__u64
 *
»t_pos
);

1122 
”rcode_t
 
ext2fs_fe_l£ek
(
ext2_fe_t
 
fe
, 
ext2_off_t
 
off£t
,

1123 
wh’û
, 
ext2_off_t
 *
»t_pos
);

1124 
”rcode_t
 
ext2fs_fe_g‘_lsize
(
ext2_fe_t
 
fe
, 
__u64
 *
»t_size
);

1125 
ext2_off_t
 
ext2fs_fe_g‘_size
(
ext2_fe_t
 
fe
);

1126 
”rcode_t
 
ext2fs_fe_£t_size
(
ext2_fe_t
 
fe
, 
ext2_off_t
 
size
);

1127 
”rcode_t
 
ext2fs_fe_£t_size2
(
ext2_fe_t
 
fe
, 
ext2_off64_t
 
size
);

1130 *
ext2fs_fšd_block_deviû
(
dev_t
 
deviû
);

1133 
”rcode_t
 
ext2fs_sync_deviû
(
fd
, 
æushb
);

1136 
ext2fs_ä“
(
ext2_fsys
 
fs
);

1137 
ext2fs_ä“_dbli¡
(
ext2_dbli¡
 
dbli¡
);

1138 
ext2fs_badblocks_li¡_ä“
(
ext2_badblocks_li¡
 
bb
);

1139 
ext2fs_u32_li¡_ä“
(
ext2_u32_li¡
 
bb
);

1142 
ext2fs_ä“_g’”ic_b™m­
(
ext2fs_šode_b™m­
 
b™m­
);

1143 
”rcode_t
 
ext2fs_make_g’”ic_b™m­
Ó¼code_ˆ
magic
, 
ext2_fsys
 
fs
,

1144 
__u32
 
¡¬t
, __u32 
’d
,

1145 
__u32
 
»®_’d
,

1146 cÚ¡ *
desü
, *
š™_m­
,

1147 
ext2fs_g’”ic_b™m­
 *
»t
);

1148 
”rcode_t
 
ext2fs_®loÿ‹_g’”ic_b™m­
(
__u32
 
¡¬t
,

1149 
__u32
 
’d
,

1150 
__u32
 
»®_’d
,

1151 cÚ¡ *
desü
,

1152 
ext2fs_g’”ic_b™m­
 *
»t
);

1153 
”rcode_t
 
ext2fs_cİy_g’”ic_b™m­
(
ext2fs_g’”ic_b™m­
 
¤c
,

1154 
ext2fs_g’”ic_b™m­
 *
de¡
);

1155 
ext2fs_ş—r_g’”ic_b™m­
(
ext2fs_g’”ic_b™m­
 
b™m­
);

1156 
”rcode_t
 
ext2fs_fudge_g’”ic_b™m­_’d
(
ext2fs_šode_b™m­
 
b™m­
,

1157 
”rcode_t
 
magic
,

1158 
”rcode_t
 
Ãq
,

1159 
ext2_šo_t
 
’d
,

1160 
ext2_šo_t
 *
Ûnd
);

1161 
ext2fs_£t_g’”ic_b™m­_·ddšg
(
ext2fs_g’”ic_b™m­
 
m­
);

1162 
”rcode_t
 
ext2fs_»size_g’”ic_b™m­
Ó¼code_ˆ
magic
,

1163 
__u32
 
Ãw_’d
,

1164 
__u32
 
Ãw_»®_’d
,

1165 
ext2fs_g’”ic_b™m­
 
bm­
);

1166 
”rcode_t
 
ext2fs_com·»_g’”ic_b™m­
Ó¼code_ˆ
magic
,ƒ¼code_ˆ
Ãq
,

1167 
ext2fs_g’”ic_b™m­
 
bm1
,

1168 
ext2fs_g’”ic_b™m­
 
bm2
);

1169 
”rcode_t
 
ext2fs_g‘_g’”ic_b™m­_¿nge
(
ext2fs_g’”ic_b™m­
 
bm­
,

1170 
”rcode_t
 
magic
,

1171 
__u32
 
¡¬t
, __u32 
num
,

1172 *
out
);

1173 
”rcode_t
 
ext2fs_£t_g’”ic_b™m­_¿nge
(
ext2fs_g’”ic_b™m­
 
bm­
,

1174 
”rcode_t
 
magic
,

1175 
__u32
 
¡¬t
, __u32 
num
,

1176 *
š
);

1177 
”rcode_t
 
ext2fs_fšd_fœ¡_z”o_g’”ic_b™m­
(
ext2fs_g’”ic_b™m­
 
b™m­
,

1178 
__u32
 
¡¬t
, __u32 
’d
,

1179 
__u32
 *
out
);

1184 
	#BMAP_STATS


	)

1186 
ext2fs_ä“_g’”ic_bm­
(
ext2fs_g’”ic_b™m­
 
bm­
);

1187 
”rcode_t
 
ext2fs_®loc_g’”ic_bm­
(
ext2_fsys
 
fs
,ƒ¼code_ˆ
magic
,

1188 
ty³
, 
__u64
 
¡¬t
, __u64 
’d
,

1189 
__u64
 
»®_’d
,

1190 cÚ¡ *
desü
,

1191 
ext2fs_g’”ic_b™m­
 *
»t
);

1192 
”rcode_t
 
ext2fs_cİy_g’”ic_bm­
(
ext2fs_g’”ic_b™m­
 
¤c
,

1193 
ext2fs_g’”ic_b™m­
 *
de¡
);

1194 
ext2fs_ş—r_g’”ic_bm­
(
ext2fs_g’”ic_b™m­
 
b™m­
);

1195 
”rcode_t
 
ext2fs_fudge_g’”ic_bm­_’d
(
ext2fs_g’”ic_b™m­
 
b™m­
,

1196 
”rcode_t
 
Ãq
,

1197 
__u64
 
’d
, __u64 *
Ûnd
);

1198 
ext2fs_£t_g’”ic_bm­_·ddšg
(
ext2fs_g’”ic_b™m­
 
bm­
);

1199 
”rcode_t
 
ext2fs_»size_g’”ic_bm­
(
ext2fs_g’”ic_b™m­
 
bm­
,

1200 
__u64
 
Ãw_’d
,

1201 
__u64
 
Ãw_»®_’d
);

1202 
”rcode_t
 
ext2fs_com·»_g’”ic_bm­
Ó¼code_ˆ
Ãq
,

1203 
ext2fs_g’”ic_b™m­
 
bm1
,

1204 
ext2fs_g’”ic_b™m­
 
bm2
);

1205 
”rcode_t
 
ext2fs_g‘_g’”ic_bm­_¿nge
(
ext2fs_g’”ic_b™m­
 
bm­
,

1206 
__u64
 
¡¬t
, 
num
,

1207 *
out
);

1208 
”rcode_t
 
ext2fs_£t_g’”ic_bm­_¿nge
(
ext2fs_g’”ic_b™m­
 
bm­
,

1209 
__u64
 
¡¬t
, 
num
,

1210 *
š
);

1211 
”rcode_t
 
ext2fs_cÚv”t_subşu¡”_b™m­
(
ext2_fsys
 
fs
,

1212 
ext2fs_block_b™m­
 *
b™m­
);

1215 
”rcode_t
 
ext2fs_g‘_deviû_size
(cÚ¡ *
fe
, 
blocksize
,

1216 
blk_t
 *
»tblocks
);

1217 
”rcode_t
 
ext2fs_g‘_deviû_size2
(cÚ¡ *
fe
, 
blocksize
,

1218 
blk64_t
 *
»tblocks
);

1221 
ext2fs_g‘_dio_®ignm’t
(
fd
);

1222 
”rcode_t
 
ext2fs_g‘_deviû_£ùsize
(cÚ¡ *
fe
, *
£ùsize
);

1223 
”rcode_t
 
ext2fs_g‘_deviû_phys_£ùsize
(cÚ¡ *
fe
, *
£ùsize
);

1226 
”rcode_t
 
ext2fs_iblk_add_blocks
(
ext2_fsys
 
fs
, 
ext2_šode
 *
šode
,

1227 
blk64_t
 
num_blocks
);

1228 
”rcode_t
 
ext2fs_iblk_sub_blocks
(
ext2_fsys
 
fs
, 
ext2_šode
 *
šode
,

1229 
blk64_t
 
num_blocks
);

1230 
”rcode_t
 
ext2fs_iblk_£t
(
ext2_fsys
 
fs
, 
ext2_šode
 *
šode
, 
blk64_t
 
b
);

1233 
”rcode_t
 
ext2fs_image_šode_wr™e
(
ext2_fsys
 
fs
, 
fd
, 
æags
);

1234 
”rcode_t
 
ext2fs_image_šode_»ad
(
ext2_fsys
 
fs
, 
fd
, 
æags
);

1235 
”rcode_t
 
ext2fs_image_su³r_wr™e
(
ext2_fsys
 
fs
, 
fd
, 
æags
);

1236 
”rcode_t
 
ext2fs_image_su³r_»ad
(
ext2_fsys
 
fs
, 
fd
, 
æags
);

1237 
”rcode_t
 
ext2fs_image_b™m­_wr™e
(
ext2_fsys
 
fs
, 
fd
, 
æags
);

1238 
”rcode_t
 
ext2fs_image_b™m­_»ad
(
ext2_fsys
 
fs
, 
fd
, 
æags
);

1241 
”rcode_t
 
ext2fs_»ad_šd_block
(
ext2_fsys
 
fs
, 
blk_t
 
blk
, *
buf
);

1242 
”rcode_t
 
ext2fs_wr™e_šd_block
(
ext2_fsys
 
fs
, 
blk_t
 
blk
, *
buf
);

1245 
”rcode_t
 
ext2fs_š™Ÿlize
(cÚ¡ *
Çme
, 
æags
,

1246 
ext2_su³r_block
 *
·¿m
,

1247 
io_mªag”
 
mªag”
, 
ext2_fsys
 *
»t_fs
);

1250 
ext2fs_ä“_icouÁ
(
ext2_icouÁ_t
 
icouÁ
);

1251 
”rcode_t
 
ext2fs_ü—‹_icouÁ_tdb
(
ext2_fsys
 
fs
, *
tdb_dœ
,

1252 
æags
, 
ext2_icouÁ_t
 *
»t
);

1253 
”rcode_t
 
ext2fs_ü—‹_icouÁ2
(
ext2_fsys
 
fs
, 
æags
,

1254 
size
,

1255 
ext2_icouÁ_t
 
hšt
,ƒxt2_icouÁ_ˆ*
»t
);

1256 
”rcode_t
 
ext2fs_ü—‹_icouÁ
(
ext2_fsys
 
fs
, 
æags
,

1257 
size
,

1258 
ext2_icouÁ_t
 *
»t
);

1259 
”rcode_t
 
ext2fs_icouÁ_ãtch
(
ext2_icouÁ_t
 
icouÁ
, 
ext2_šo_t
 
šo
,

1260 
__u16
 *
»t
);

1261 
”rcode_t
 
ext2fs_icouÁ_šüem’t
(
ext2_icouÁ_t
 
icouÁ
, 
ext2_šo_t
 
šo
,

1262 
__u16
 *
»t
);

1263 
”rcode_t
 
ext2fs_icouÁ_deüem’t
(
ext2_icouÁ_t
 
icouÁ
, 
ext2_šo_t
 
šo
,

1264 
__u16
 *
»t
);

1265 
”rcode_t
 
ext2fs_icouÁ_¡Üe
(
ext2_icouÁ_t
 
icouÁ
, 
ext2_šo_t
 
šo
,

1266 
__u16
 
couÁ
);

1267 
ext2_šo_t
 
ext2fs_g‘_icouÁ_size
(
ext2_icouÁ_t
 
icouÁ
);

1268 
”rcode_t
 
ext2fs_icouÁ_v®id©e
(
ext2_icouÁ_t
 
icouÁ
, 
FILE
 *);

1272 
”rcode_t
 
ext2fs_g‘_mem®ign
(
size
,

1273 
®ign
, *
±r
);

1276 
”rcode_t
 
ext2fs_æush_iÿche
(
ext2_fsys
 
fs
);

1277 
”rcode_t
 
ext2fs_g‘_Ãxt_šode_fuÎ
(
ext2_šode_sÿn
 
sÿn
,

1278 
ext2_šo_t
 *
šo
,

1279 
ext2_šode
 *
šode
,

1280 
bufsize
);

1281 
”rcode_t
 
ext2fs_İ’_šode_sÿn
(
ext2_fsys
 
fs
, 
bufãr_blocks
,

1282 
ext2_šode_sÿn
 *
»t_sÿn
);

1283 
ext2fs_şo£_šode_sÿn
(
ext2_šode_sÿn
 
sÿn
);

1284 
”rcode_t
 
ext2fs_g‘_Ãxt_šode
(
ext2_šode_sÿn
 
sÿn
, 
ext2_šo_t
 *
šo
,

1285 
ext2_šode
 *
šode
);

1286 
”rcode_t
 
ext2fs_šode_sÿn_gÙo_blockgroup
(
ext2_šode_sÿn
 
sÿn
,

1287 
group
);

1288 
ext2fs_£t_šode_ÿÎback


1289 (
ext2_šode_sÿn
 
sÿn
,

1290 
”rcode_t
 (*
dÚe_group
)(
ext2_fsys
 
fs
,

1291 
ext2_šode_sÿn
 
sÿn
,

1292 
dg½_t
 
group
,

1293 * 
´iv_d©a
),

1294 *
dÚe_group_d©a
);

1295 
ext2fs_šode_sÿn_æags
(
ext2_šode_sÿn
 
sÿn
, 
£t_æags
,

1296 
ş—r_æags
);

1297 
”rcode_t
 
ext2fs_»ad_šode_fuÎ
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

1298 
ext2_šode
 * 
šode
,

1299 
bufsize
);

1300 
”rcode_t
 
ext2fs_»ad_šode
 (
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

1301 
ext2_šode
 * 
šode
);

1302 
”rcode_t
 
ext2fs_wr™e_šode_fuÎ
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

1303 
ext2_šode
 * 
šode
,

1304 
bufsize
);

1305 
”rcode_t
 
ext2fs_wr™e_šode
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

1306 
ext2_šode
 * 
šode
);

1307 
”rcode_t
 
ext2fs_wr™e_Ãw_šode
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

1308 
ext2_šode
 * 
šode
);

1309 
”rcode_t
 
ext2fs_g‘_blocks
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
, 
blk_t
 *
blocks
);

1310 
”rcode_t
 
ext2fs_check_dœeùÜy
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
);

1313 
io_mªag”
 
šode_io_mªag”
;

1314 
”rcode_t
 
ext2fs_šode_io_š‹º
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

1315 **
Çme
);

1316 
”rcode_t
 
ext2fs_šode_io_š‹º2
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

1317 
ext2_šode
 *
šode
,

1318 **
Çme
);

1321 
”rcode_t
 
ext2fs_check_if_mouÁed
(cÚ¡ *
fe
, *
mouÁ_æags
);

1322 
”rcode_t
 
ext2fs_check_mouÁ_pošt
(cÚ¡ *
deviû
, *
mouÁ_æags
,

1323 *
mt
, 
m’
);

1330 
”rcode_t
 
ext2fs_punch
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
,

1331 
ext2_šode
 *
šode
,

1332 *
block_buf
, 
blk64_t
 
¡¬t
,

1333 
blk64_t
 
’d
);

1336 
”rcode_t
 
ext2fs_lookup
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
dœ
, cÚ¡ *
Çme
,

1337 
Çm–’
, *
buf
, 
ext2_šo_t
 *
šode
);

1338 
”rcode_t
 
ext2fs_Çmei
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
roÙ
,ƒxt2_šo_ˆ
cwd
,

1339 cÚ¡ *
Çme
, 
ext2_šo_t
 *
šode
);

1340 
”rcode_t
 
ext2fs_Çmei_fŞlow
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
roÙ
,ƒxt2_šo_ˆ
cwd
,

1341 cÚ¡ *
Çme
, 
ext2_šo_t
 *
šode
);

1342 
”rcode_t
 
ext2fs_fŞlow_lšk
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
roÙ
,ƒxt2_šo_ˆ
cwd
,

1343 
ext2_šo_t
 
šode
,ƒxt2_šo_ˆ*
»s_šode
);

1346 
ext2fs_Çtive_æag
();

1349 
”rcode_t
 
ext2fs_Ãw_dœ_block
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
dœ_šo
,

1350 
ext2_šo_t
 
·»Á_šo
, **
block
);

1353 
”rcode_t
 
ext2fs_mkdœ
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
·»Á
,ƒxt2_šo_ˆ
šum
,

1354 cÚ¡ *
Çme
);

1357 
”rcode_t
 
ext2fs_z”o_blocks
(
ext2_fsys
 
fs
, 
blk_t
 
blk
, 
num
,

1358 
blk_t
 *
»t_blk
, *
»t_couÁ
);

1359 
”rcode_t
 
ext2fs_z”o_blocks2
(
ext2_fsys
 
fs
, 
blk64_t
 
blk
, 
num
,

1360 
blk64_t
 *
»t_blk
, *
»t_couÁ
);

1361 
”rcode_t
 
ext2fs_ü—‹_jouº®_su³rblock
(
ext2_fsys
 
fs
,

1362 
__u32
 
num_blocks
, 
æags
,

1363 **
»t_jsb
);

1364 
”rcode_t
 
ext2fs_add_jouº®_deviû
(
ext2_fsys
 
fs
,

1365 
ext2_fsys
 
jouº®_dev
);

1366 
”rcode_t
 
ext2fs_add_jouº®_šode
(
ext2_fsys
 
fs
, 
blk_t
 
num_blocks
,

1367 
æags
);

1368 
ext2fs_deçuÉ_jouº®_size
(
__u64
 
num_blocks
);

1371 
”rcode_t
 
ext2fs_İ’
(cÚ¡ *
Çme
, 
æags
, 
su³rblock
,

1372 
block_size
, 
io_mªag”
 
mªag”
,

1373 
ext2_fsys
 *
»t_fs
);

1374 
”rcode_t
 
ext2fs_İ’2
(cÚ¡ *
Çme
, cÚ¡ *
io_İtiÚs
,

1375 
æags
, 
su³rblock
,

1376 
block_size
, 
io_mªag”
 
mªag”
,

1377 
ext2_fsys
 *
»t_fs
);

1378 
blk64_t
 
ext2fs_desütÜ_block_loc2
(
ext2_fsys
 
fs
,

1379 
blk64_t
 
group_block
, 
dg½_t
 
i
);

1380 
blk_t
 
ext2fs_desütÜ_block_loc
(
ext2_fsys
 
fs
, blk_ˆ
group_block
,

1381 
dg½_t
 
i
);

1382 
”rcode_t
 
ext2fs_g‘_d©a_io
(
ext2_fsys
 
fs
, 
io_chªÃl
 *
Şd_io
);

1383 
”rcode_t
 
ext2fs_£t_d©a_io
(
ext2_fsys
 
fs
, 
io_chªÃl
 
Ãw_io
);

1384 
”rcode_t
 
ext2fs_»wr™e_to_io
(
ext2_fsys
 
fs
, 
io_chªÃl
 
Ãw_io
);

1387 
”rcode_t
 
ext2fs_g‘_·thÇme
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
dœ
,ƒxt2_šo_ˆ
šo
,

1388 **
Çme
);

1391 
”rcode_t
 
ext2fs_lšk
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
dœ
, cÚ¡ *
Çme
,

1392 
ext2_šo_t
 
šo
, 
æags
);

1393 
”rcode_t
 
ext2fs_uÆšk
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
dœ
, cÚ¡ *
Çme
,

1394 
ext2_šo_t
 
šo
, 
æags
);

1397 
”rcode_t
 
ext2fs_symlšk
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
·»Á
,ƒxt2_šo_ˆ
šo
,

1398 cÚ¡ *
Çme
, *
rg‘
);

1401 
”rcode_t
 
ext2fs_mmp_»ad
(
ext2_fsys
 
fs
, 
blk64_t
 
mmp_blk
, *
buf
);

1402 
”rcode_t
 
ext2fs_mmp_wr™e
(
ext2_fsys
 
fs
, 
blk64_t
 
mmp_blk
, *
buf
);

1403 
”rcode_t
 
ext2fs_mmp_ş—r
(
ext2_fsys
 
fs
);

1404 
”rcode_t
 
ext2fs_mmp_š™
(
ext2_fsys
 
fs
);

1405 
”rcode_t
 
ext2fs_mmp_¡¬t
(
ext2_fsys
 
fs
);

1406 
”rcode_t
 
ext2fs_mmp_upd©e
(
ext2_fsys
 
fs
);

1407 
”rcode_t
 
ext2fs_mmp_¡İ
(
ext2_fsys
 
fs
);

1408 
ext2fs_mmp_Ãw_£q
();

1411 
”rcode_t
 
ext2fs_»ad_bb_šode
(
ext2_fsys
 
fs
,

1412 
ext2_badblocks_li¡
 *
bb_li¡
);

1415 
”rcode_t
 
ext2fs_»ad_bb_FILE2
(
ext2_fsys
 
fs
, 
FILE
 *
f
,

1416 
ext2_badblocks_li¡
 *
bb_li¡
,

1417 *
´iv_d©a
,

1418 (*
šv®id
)(
ext2_fsys
 
fs
,

1419 
blk_t
 
blk
,

1420 *
bad¡r
,

1421 *
´iv_d©a
));

1422 
”rcode_t
 
ext2fs_»ad_bb_FILE
(
ext2_fsys
 
fs
, 
FILE
 *
f
,

1423 
ext2_badblocks_li¡
 *
bb_li¡
,

1424 (*
šv®id
)(
ext2_fsys
 
fs
,

1425 
blk_t
 
blk
));

1428 
”rcode_t
 
ext2fs_ü—‹_»size_šode
(
ext2_fsys
 
fs
);

1431 
ext2fs_sw­_ext_©Œ
(*
to
, *
äom
, 
bufsize
,

1432 
has_h—d”
);

1433 
ext2fs_sw­_ext_©Œ_h—d”
(
ext2_ext_©Œ_h—d”
 *
to_h—d”
,

1434 
ext2_ext_©Œ_h—d”
 *
äom_hdr
);

1435 
ext2fs_sw­_ext_©Œ_’Œy
(
ext2_ext_©Œ_’Œy
 *
to_’Œy
,

1436 
ext2_ext_©Œ_’Œy
 *
äom_’Œy
);

1437 
ext2fs_sw­_su³r
(
ext2_su³r_block
 * 
su³r
);

1438 
ext2fs_sw­_group_desc
(
ext2_group_desc
 *
gdp
);

1439 
ext2fs_sw­_group_desc2
(
ext2_fsys
, 
ext2_group_desc
 *
gdp
);

1440 
ext2fs_sw­_šode_fuÎ
(
ext2_fsys
 
fs
, 
ext2_šode_Ïrge
 *
t
,

1441 
ext2_šode_Ïrge
 *
f
, 
ho¡Üd”
,

1442 
bufsize
);

1443 
ext2fs_sw­_šode
(
ext2_fsys
 
fs
,
ext2_šode
 *
t
,

1444 
ext2_šode
 *
f
, 
ho¡Üd”
);

1445 
ext2fs_sw­_mmp
(
mmp_¡ruù
 *
mmp
);

1448 
ext2fs_İ’_fe
(cÚ¡ *
·thÇme
, 
æags
, 
mode_t
 
mode
);

1449 
ext2fs_¡©
(cÚ¡ *
·th
, 
ext2fs_¡ruù_¡©
 *
buf
);

1450 
ext2fs_f¡©
(
fd
, 
ext2fs_¡ruù_¡©
 *
buf
);

1453 
ext2fs_šode_has_v®id_blocks
(
ext2_šode
 *
šode
);

1454 
ext2fs_šode_has_v®id_blocks2
(
ext2_fsys
 
fs
,

1455 
ext2_šode
 *
šode
);

1458 
ext2fs_·r£_v”siÚ_¡ršg
(cÚ¡ *
v”_¡ršg
);

1459 
ext2fs_g‘_lib¿ry_v”siÚ
(cÚ¡ **
v”_¡ršg
,

1460 cÚ¡ **
d©e_¡ršg
);

1463 
”rcode_t
 
ext2fs_wr™e_bb_FILE
(
ext2_badblocks_li¡
 
bb_li¡
,

1464 
æags
,

1465 
FILE
 *
f
);

1469 #ifdeà
NO_INLINE_FUNCS


1470 
”rcode_t
 
ext2fs_g‘_mem
(
size
, *
±r
);

1471 
”rcode_t
 
ext2fs_g‘_memz”o
(
size
, *
±r
);

1472 
”rcode_t
 
ext2fs_g‘_¬¿y
(
couÁ
,

1473 
size
, *
±r
);

1474 
”rcode_t
 
ext2fs_g‘_¬¿yz”o
(
couÁ
,

1475 
size
, *
±r
);

1476 
”rcode_t
 
ext2fs_ä“_mem
(*
±r
);

1477 
”rcode_t
 
ext2fs_»size_mem
(
Şd_size
,

1478 
size
, *
±r
);

1479 
ext2fs_m¬k_su³r_dœty
(
ext2_fsys
 
fs
);

1480 
ext2fs_m¬k_chªged
(
ext2_fsys
 
fs
);

1481 
ext2fs_‹¡_chªged
(
ext2_fsys
 
fs
);

1482 
ext2fs_m¬k_v®id
(
ext2_fsys
 
fs
);

1483 
ext2fs_unm¬k_v®id
(
ext2_fsys
 
fs
);

1484 
ext2fs_‹¡_v®id
(
ext2_fsys
 
fs
);

1485 
ext2fs_m¬k_ib_dœty
(
ext2_fsys
 
fs
);

1486 
ext2fs_m¬k_bb_dœty
(
ext2_fsys
 
fs
);

1487 
ext2fs_‹¡_ib_dœty
(
ext2_fsys
 
fs
);

1488 
ext2fs_‹¡_bb_dœty
(
ext2_fsys
 
fs
);

1489 
dg½_t
 
ext2fs_group_of_blk
(
ext2_fsys
 
fs
, 
blk_t
 
blk
);

1490 
dg½_t
 
ext2fs_group_of_šo
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
);

1491 
blk_t
 
ext2fs_group_fœ¡_block
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

1492 
blk_t
 
ext2fs_group_Ï¡_block
(
ext2_fsys
 
fs
, 
dg½_t
 
group
);

1493 
blk_t
 
ext2fs_šode_d©a_blocks
(
ext2_fsys
 
fs
,

1494 
ext2_šode
 *
šode
);

1495 
ext2fs_div_û
(
a
, 
b
);

1496 
__u64
 
ext2fs_div64_û
(__u64 
a
, __u64 
b
);

1505 #ià(
defšed
(
INCLUDE_INLINE_FUNCS
è|| !defšed(
NO_INLINE_FUNCS
))

1506 #ifdeà
INCLUDE_INLINE_FUNCS


1507 
	#_INLINE_
 

	)

1509 #ià(
__STDC_VERSION__
 >= 199901L)

1510 
	#_INLINE_
 
šlše


	)

1512 #ifdeà
__GNUC__


1513 
	#_INLINE_
 
__šlše__


	)

1515 
	#_INLINE_
 
šlše


	)

1520 #iâdeà
EXT2_CUSTOM_MEMORY_ROUTINES


1521 
	~<¡ršg.h
>

1525 
_INLINE_
 
”rcode_t
 
ext2fs_g‘_mem
(
size
, *
±r
)

1527 *
µ
;

1529 
µ
 = 
m®loc
(
size
);

1530 ià(!
µ
)

1531  
EXT2_ET_NO_MEMORY
;

1532 
memıy
(
±r
, &
µ
,  (pp));

1536 
_INLINE_
 
”rcode_t
 
ext2fs_g‘_memz”o
(
size
, *
±r
)

1538 *
µ
;

1540 
µ
 = 
m®loc
(
size
);

1541 ià(!
µ
)

1542  
EXT2_ET_NO_MEMORY
;

1543 
mem£t
(
µ
, 0, 
size
);

1544 
memıy
(
±r
, &
µ
, (pp));

1548 
_INLINE_
 
”rcode_t
 
ext2fs_g‘_¬¿y
(
couÁ
, 
size
, *
±r
)

1550 ià(
couÁ
 && (-1UL)/couÁ<
size
)

1551  
EXT2_ET_NO_MEMORY
;

1552  
ext2fs_g‘_mem
(
couÁ
*
size
, 
±r
);

1555 
_INLINE_
 
”rcode_t
 
ext2fs_g‘_¬¿yz”o
(
couÁ
,

1556 
size
, *
±r
)

1558 *
µ
;

1560 ià(
couÁ
 && (-1UL)/couÁ<
size
)

1561  
EXT2_ET_NO_MEMORY
;

1562 
µ
 = 
ÿÎoc
(
couÁ
, 
size
);

1563 ià(!
µ
)

1564  
EXT2_ET_NO_MEMORY
;

1565 
memıy
(
±r
, &
µ
, (pp));

1572 
_INLINE_
 
”rcode_t
 
ext2fs_ä“_mem
(*
±r
)

1574 *
p
;

1576 
memıy
(&
p
, 
±r
, (p));

1577 
ä“
(
p
);

1578 
p
 = 0;

1579 
memıy
(
±r
, &
p
, (p));

1586 
_INLINE_
 
”rcode_t
 
ext2fs_»size_mem
(
EXT2FS_ATTR
((
unu£d
)è
Şd_size
,

1587 
size
, *
±r
)

1589 *
p
;

1593 
memıy
(&
p
, 
±r
, (p));

1594 
p
 = 
»®loc
Õ, 
size
);

1595 ià(!
p
)

1596  
EXT2_ET_NO_MEMORY
;

1597 
memıy
(
±r
, &
p
, (p));

1605 
_INLINE_
 
ext2fs_m¬k_su³r_dœty
(
ext2_fsys
 
fs
)

1607 
fs
->
æags
 |ğ
EXT2_FLAG_DIRTY
 | 
EXT2_FLAG_CHANGED
;

1613 
_INLINE_
 
ext2fs_m¬k_chªged
(
ext2_fsys
 
fs
)

1615 
fs
->
æags
 |ğ
EXT2_FLAG_CHANGED
;

1621 
_INLINE_
 
ext2fs_‹¡_chªged
(
ext2_fsys
 
fs
)

1623  (
fs
->
æags
 & 
EXT2_FLAG_CHANGED
);

1629 
_INLINE_
 
ext2fs_m¬k_v®id
(
ext2_fsys
 
fs
)

1631 
fs
->
æags
 |ğ
EXT2_FLAG_VALID
;

1637 
_INLINE_
 
ext2fs_unm¬k_v®id
(
ext2_fsys
 
fs
)

1639 
fs
->
æags
 &ğ~
EXT2_FLAG_VALID
;

1645 
_INLINE_
 
ext2fs_‹¡_v®id
(
ext2_fsys
 
fs
)

1647  (
fs
->
æags
 & 
EXT2_FLAG_VALID
);

1653 
_INLINE_
 
ext2fs_m¬k_ib_dœty
(
ext2_fsys
 
fs
)

1655 
fs
->
æags
 |ğ
EXT2_FLAG_IB_DIRTY
 | 
EXT2_FLAG_CHANGED
;

1661 
_INLINE_
 
ext2fs_m¬k_bb_dœty
(
ext2_fsys
 
fs
)

1663 
fs
->
æags
 |ğ
EXT2_FLAG_BB_DIRTY
 | 
EXT2_FLAG_CHANGED
;

1669 
_INLINE_
 
ext2fs_‹¡_ib_dœty
(
ext2_fsys
 
fs
)

1671  (
fs
->
æags
 & 
EXT2_FLAG_IB_DIRTY
);

1677 
_INLINE_
 
ext2fs_‹¡_bb_dœty
(
ext2_fsys
 
fs
)

1679  (
fs
->
æags
 & 
EXT2_FLAG_BB_DIRTY
);

1685 
_INLINE_
 
dg½_t
 
ext2fs_group_of_blk
(
ext2_fsys
 
fs
, 
blk_t
 
blk
)

1687  
ext2fs_group_of_blk2
(
fs
, 
blk
);

1692 
_INLINE_
 
dg½_t
 
ext2fs_group_of_šo
(
ext2_fsys
 
fs
, 
ext2_šo_t
 
šo
)

1694  (
šo
 - 1è/ 
fs
->
su³r
->
s_šodes_³r_group
;

1700 
_INLINE_
 
blk_t
 
ext2fs_group_fœ¡_block
(
ext2_fsys
 
fs
, 
dg½_t
 
group
)

1702  (
blk_t
è
ext2fs_group_fœ¡_block2
(
fs
, 
group
);

1708 
_INLINE_
 
blk_t
 
ext2fs_group_Ï¡_block
(
ext2_fsys
 
fs
, 
dg½_t
 
group
)

1710  (
blk_t
è
ext2fs_group_Ï¡_block2
(
fs
, 
group
);

1713 
_INLINE_
 
blk_t
 
ext2fs_šode_d©a_blocks
(
ext2_fsys
 
fs
,

1714 
ext2_šode
 *
šode
)

1716  (
blk_t
è
ext2fs_šode_d©a_blocks2
(
fs
, 
šode
);

1722 
_INLINE_
 
ext2fs_div_û
(
a
, 
b
)

1724 ià(!
a
)

1726  ((
a
 - 1è/ 
b
) + 1;

1729 
_INLINE_
 
__u64
 
ext2fs_div64_û
(__u64 
a
, __u64 
b
)

1731 ià(!
a
)

1733  ((
a
 - 1è/ 
b
) + 1;

1736 #undeà
_INLINE_


1739 #ifdeà
__ılu¥lus


	@libmke2fs/ext2fsP.h

12 
	~"ext2fs.h
"

14 
	#EXT2FS_MAX_NESTED_LINKS
 8

	)

19 
	sext2_¡ruù_u32_li¡
 {

20 
	mmagic
;

21 
	mnum
;

22 
	msize
;

23 
__u32
 *
	mli¡
;

24 
	mbadblocks_æags
;

27 
	sext2_¡ruù_u32_™”©e
 {

28 
	mmagic
;

29 
ext2_u32_li¡
 
	mbb
;

30 
	m±r
;

37 
	sext2_¡ruù_dbli¡
 {

38 
	mmagic
;

39 
ext2_fsys
 
	mfs
;

40 
	msize
;

41 
	mcouÁ
;

42 
	msÜ‹d
;

43 
ext2_db_’Œy2
 * 
	mli¡
;

49 
	sdœ_cÚ‹xt
 {

50 
ext2_šo_t
 
	mdœ
;

51 
	mæags
;

52 *
	mbuf
;

53 (*
	mfunc
)(
ext2_šo_t
 
	mdœ
,

54 
	m’Œy
,

55 
ext2_dœ_’Œy
 *
	mdœ’t
,

56 
	moff£t
,

57 
	mblocksize
,

58 *
	mbuf
,

59 *
	m´iv_d©a
);

60 *
	m´iv_d©a
;

61 
”rcode_t
 
	m”rcode
;

67 
	sext2_šode_ÿche
 {

68 * 
	mbufãr
;

69 
blk64_t
 
	mbufãr_blk
;

70 
	mÿche_Ï¡
;

71 
	mÿche_size
;

72 
	m»fcouÁ
;

73 
ext2_šode_ÿche_’t
 *
	mÿche
;

76 
	sext2_šode_ÿche_’t
 {

77 
ext2_šo_t
 
	mšo
;

78 
ext2_šode
 
	mšode
;

83 
ext2fs_´oûss_dœ_block
(
ext2_fsys
 
fs
,

84 
blk64_t
 *
blockÄ
,

85 
e2_blkút_t
 
blockút
,

86 
blk64_t
 
»f_block
,

87 
»f_off£t
,

88 *
´iv_d©a
);

92 
	sext2fs_num”ic_´og»ss_¡ruù
 {

93 
__u64
 
	mmax
;

94 
	mlog_max
;

95 
	msk_´og»ss
;

98 
ext2fs_num”ic_´og»ss_š™
(
ext2_fsys
 
fs
,

99 
ext2fs_num”ic_´og»ss_¡ruù
 * 
´og»ss
,

100 cÚ¡ *
Ïb–
, 
__u64
 
max
);

101 
ext2fs_num”ic_´og»ss_upd©e
(
ext2_fsys
 
fs
,

102 
ext2fs_num”ic_´og»ss_¡ruù
 * 
´og»ss
,

103 
__u64
 
v®
);

104 
ext2fs_num”ic_´og»ss_şo£
(
ext2_fsys
 
fs
,

105 
ext2fs_num”ic_´og»ss_¡ruù
 * 
´og»ss
,

106 cÚ¡ *
mes§ge
);

112 
”rcode_t
 
ext2fs_®loc_g’”ic_bm­
(
ext2_fsys
 
fs
,ƒ¼code_ˆ
magic
,

113 
ty³
, 
__u64
 
¡¬t
, __u64 
’d
,

114 
__u64
 
»®_’d
,

115 cÚ¡ * 
desütiÚ
,

116 
ext2fs_g’”ic_b™m­
 *
bm­
);

118 
ext2fs_ä“_g’”ic_bm­
(
ext2fs_g’”ic_b™m­
 
bm­
);

120 
”rcode_t
 
ext2fs_cİy_g’”ic_bm­
(
ext2fs_g’”ic_b™m­
 
¤c
,

121 
ext2fs_g’”ic_b™m­
 *
de¡
);

123 
”rcode_t
 
ext2fs_»size_g’”ic_bm­
(
ext2fs_g’”ic_b™m­
 
bm­
,

124 
__u64
 
Ãw_’d
,

125 
__u64
 
Ãw_»®_’d
);

126 
”rcode_t
 
ext2fs_fudge_g’”ic_bm­_’d
(
ext2fs_g’”ic_b™m­
 
b™m­
,

127 
”rcode_t
 
Ãq
,

128 
__u64
 
’d
, __u64 *
Ûnd
);

129 
ext2fs_m¬k_g’”ic_bm­
(
ext2fs_g’”ic_b™m­
 
b™m­
,

130 
__u64
 
¬g
);

131 
ext2fs_unm¬k_g’”ic_bm­
(
ext2fs_g’”ic_b™m­
 
b™m­
,

132 
__u64
 
¬g
);

133 
ext2fs_‹¡_g’”ic_bm­
(
ext2fs_g’”ic_b™m­
 
b™m­
,

134 
__u64
 
¬g
);

135 
”rcode_t
 
ext2fs_£t_g’”ic_bm­_¿nge
(
ext2fs_g’”ic_b™m­
 
b™m­
,

136 
__u64
 
¡¬t
, 
num
,

137 *
š
);

138 
”rcode_t
 
ext2fs_g‘_g’”ic_bm­_¿nge
(
ext2fs_g’”ic_b™m­
 
b™m­
,

139 
__u64
 
¡¬t
, 
num
,

140 *
out
);

141 
ext2fs_w¬n_b™m­32
(
ext2fs_g’”ic_b™m­
 
b™m­
,cÚ¡ *
func
);

143 
ext2fs_mem_is_z”o
(cÚ¡ *
mem
, 
size_t
 
Ën
);

145 
ext2fs_fe_block_off£t_too_big
(
ext2_fsys
 
fs
,

146 
ext2_šode
 *
šode
,

147 
blk64_t
 
off£t
);

	@libmke2fs/mke2fs.h

1 #iâdeà
__MKE2FS_H__


2 
	#__MKE2FS_H__


	)

4 
	~"ext2fs/ext2fs.h
"

5 
	~"mke2fs_”r.h
"

8 
	mWRITE_INODE_TABLES_UNKNOWN
 = 0,

9 
	mWRITE_INODE_TABLES_INIT
,

10 
	mWRITE_INODE_TABLES_WRITING
,

11 
	mWRITE_INODE_TABLES_WRITING_DONE
,

12 
	mWRITE_INODE_TABLES_DONE
,

13 
	mWRITE_INODE_TABLES_ERROR
,

16 
	sex‹nded_İt
 {

17 
__u16
 
	m¡ride
;

18 
__u32
 
	m¡re_width
;

19 
__u16
 
	mdesc_size
;

20 
__u16
 
	mmmp_upd©e_š‹rv®
;

21 
	m‹¡_fs
;

22 
	mdisÿrd
;

25 
	se2fs_cfg
 {

26 
	m»£rved_¿tio
;

27 
	mnum_šodes
;

28 
	mæex_bg_size
;

29 
__u32
 
	mblocks_³r_group
;

30 
__u32
 
	mü—tÜ_os
;

31 
	mblocksize
;

32 
	mşu¡”_size
;

33 
	mdœeù_io
;

34 
	mfÜû
;

35 
	mcæag
;

36 
	mv”bo£
;

37 
	mqu›t
;

38 
	mr_İt
;

39 
	msu³r_Úly
;

40 
	mšode_¿tio
;

41 
	mšode_size
;

42 
	mjouº®_size
;

43 
	mnßùiÚ
;

44 
	mbad_blocks_f’ame
[512];

45 
	mfs_ã©u»s
[256];

46 
	mu§ge_ty³s
[256];

47 
	mmouÁ_dœ
[64];

48 
	mfs_uuid
[64];

49 
	mfs_ty³
[16];

50 
	mvŞume_Ïb–
[16];

52 
ex‹nded_İt
 
	mext_İts
;

55 (*
	tmke2fs_cb_func
)(*
	tpD©a
, 
	t¡©
, 
	tcu¼’t
, 
	ttÙ®
);

57 
	smke2fs_hªdË
 {

59 
e2fs_cfg
 
cfg
;

60 
deviû_Çme
[32];

61 *
buf
;

62 *
pD©a
;

63 
mke2fs_cb_func
 
cb_func
;

66 
	`mke2fs
(
mke2fs_hªdË
 *
hªdË
);

	@libmke2fs/mke2fs_err.h

1 #iâdeà
__MKE2FS_ERR_H__


2 
	#__MKE2FS_ERR_H__


	)

5 
	mMKE2FS_INVALID_HANDLE
 = 1001,

6 
	mMKE2FS_FAIL_TO_ALLOCATE_MEMORY
,

7 
	mMKE2FS_PROFILE_ERROR
,

8 
	mMKE2FS_UNAME_ERROR
,

9 
	mMKE2FS_INVALID_BLOCK_SIZE
,

10 
	mMKE2FS_INVALID_CLUSTER_SIZE
,

11 
	mMKE2FS_ILLEGAL_BLOCKS_PER_GROUP
,

12 
	mMKE2FS_BLOCKS_PER_GROUP_NOT_MULTIPLE_OF_8
,

13 
	mMKE2FS_FLEX_BG_SIZE_NOT_POWER_OF_2
,

14 
	mMKE2FS_INVALID_INODE_RATIO
,

15 
	mMKE2FS_INVALID_INODE_SIZE
,

16 
	mMKE2FS_INVALID_RESERVED_RATIO
,

17 
	mMKE2FS_FAIL_TO_PARSE_FSTYPE
,

18 
	mMKE2FS_FAIL_TO_DETERMINE_HW_SECTOR_SIZE
,

19 
	mMKE2FS_FAIL_TO_DETERMINE_PHY_SECTOR_SIZE
,

20 
	mMKE2FS_FAIL_TO_DETERMINE_FS_SIZE
,

21 
	mMKE2FS_FAIL_TO_DETERMINE_MOUNT_STATUS
,

22 
	mMKE2FS_BLOCKSIZE_TOO_SMALL
,

23 
	mMKE2FS_UNSUITABLE_BLOCKSIZE_FOR_32BIT
,

24 
	mMKE2FS_FS_FEATURE_NOT_SUPPORT
,

25 
	mMKE2FS_NOT_SUPPORT_SPARSE_SB
,

26 
	mMKE2FS_NOT_SUPPORT_JOURNAL
,

27 
	mMKE2FS_EXTENTS_ENABLED_FOR_64BIT_FS_NOLY
,

28 
	mMKE2FS_CLUSTER_SIZE_SMALLER_THAN_BLOCK_SIZE
,

29 
	mMKE2FS_UNSUITABLE_CLUSTER_SIZE
,

30 
	mMKE2FS_NEED_EXTENTS_FEATURE
,

31 
	mMKE2FS_FEATURES_CANNOT_ENABLED_SIMULTANEOUSLY
,

32 
	mMKE2FS_NOT_SUPPORT_RESERVED_ONLINE_RESIZE
,

33 
	mMKE2FS_BLOCK_PER_GROUP_OUT_OF_RANGE
,

34 
	mMKE2FS_FLEX_BG_FEATURE_NOT_ENABLED
,

35 
	mMKE2FS_TOO_MANY_INODES
,

36 
	mMKE2FS_UNSUITABLE_INODE_CONFIG
,

37 
	mMKE2FS_SETUP_TDB_ERROR
,

38 
	mMKE2FS_FAIL_TO_INITIALIZE_SUPERBLOCK
,

39 
	mMKE2FS_COULD_NOT_PARSE_UUID
,

40 
	mMKE2FS_UNKNOWN_OS
,

41 
	mMKE2FS_EXT2FS_CLOSE_ERROR
,

42 
	mMKE2FS_FAIL_TO_ALLOCATE_FS_TABLES
,

43 
	mMKE2FS_FAIL_TO_CONVERT_SUBCLUSTER_BITMAP
,

44 
	mMKE2FS_RESERVING_BLOCKS_FOR_ONLINE_RESIZE_ERROR
,

45 
	mMKE2FS_FAIL_TO_OPEN_JOURNAL_DEV
,

46 
	mMKE2FS_FAIL_TO_ADD_JOURNAL
,

47 
	mMKE2FS_FAIL_TO_CREATE_JOURNAL
,

48 
	mMKE2FS_FAIL_TO_INITIALIZE_JOURNAL_SUPERBLOCK
,

49 
	mMKE2FS_FAIL_TO_ZERO_JOURNAL_DEV
,

50 
	mMKE2FS_FAIL_TO_WRITE_JOURNAL_SB
,

51 
	mMKE2FS_ENABLE_MULTIPLE_MOUNT_PROTECTION_ERROR
,

52 
	mMKE2FS_INVALID_BB_LIST
,

53 
	mMKE2FS_BAD_PRIMARY_SB_GROUP_DESCRIPTOR
,

54 
	mMKE2FS_MARK_BAD_BLOCKS_ERROR
,

55 
	mMKE2FS_COULD_NOT_WRITE_BLOCKS_IN_INODE_TABLES
,

56 
	mMKE2FS_FAIL_TO_CREATE_ROOT_DIR
,

57 
	mMKE2FS_FAIL_TO_READ_ROOT_INODE
,

58 
	mMKE2FS_FAIL_TO_SET_ROOT_INODE_OWNERSHIP
,

59 
	mMKE2FS_OOM_ERASING_SECTORS
,

60 
	mMKE2FS_FAIL_TO_OPEN_BB_FILE
,

61 
	mMKE2FS_FAIL_TO_READ_BB_FILE
,

62 
	mMKE2FS_EMPTY_STRING
,

63 
	mMKE2FS_INVALID_FS_OPTIONS
,

64 
	mMKE2FS_INVALID_MOUNT_OPTIONS
,

65 
	mMKE2FS_ABORT_CHECK_PROFILE
,

66 
	mMKE2FS_JOURNAL_BLOCKSIZE_SMALLER_THAN_MINIMUM_BLOCKSIZE
,

67 
	mMKE2FS_COULD_NOT_DETERMINE_DEV_SIZE
,

68 
	mMKE2FS_DEVICE_SIZE_REPORT_TO_BE_0
,

69 
	mMKE2FS_NOT_BLOCK_DEV
,

70 
	mMKE2FS_FAIL_TO_GET_BLKID_CACHE
,

71 
	mMKE2FS_CHECK_MOUNT_POINT_FAIL
,

72 
	mMKE2FS_MOUNTED
,

	@libmke2fs/prof_err.h

6 
	~<‘/com_”r.h
>

8 
	#PROF_VERSION
 (-1429577728L)

	)

9 
	#PROF_MAGIC_NODE
 (-1429577727L)

	)

10 
	#PROF_NO_SECTION
 (-1429577726L)

	)

11 
	#PROF_NO_RELATION
 (-1429577725L)

	)

12 
	#PROF_ADD_NOT_SECTION
 (-1429577724L)

	)

13 
	#PROF_SECTION_WITH_VALUE
 (-1429577723L)

	)

14 
	#PROF_BAD_LINK_LIST
 (-1429577722L)

	)

15 
	#PROF_BAD_GROUP_LVL
 (-1429577721L)

	)

16 
	#PROF_BAD_PARENT_PTR
 (-1429577720L)

	)

17 
	#PROF_MAGIC_ITERATOR
 (-1429577719L)

	)

18 
	#PROF_SET_SECTION_VALUE
 (-1429577718L)

	)

19 
	#PROF_EINVAL
 (-1429577717L)

	)

20 
	#PROF_READ_ONLY
 (-1429577716L)

	)

21 
	#PROF_SECTION_NOTOP
 (-1429577715L)

	)

22 
	#PROF_SECTION_SYNTAX
 (-1429577714L)

	)

23 
	#PROF_RELATION_SYNTAX
 (-1429577713L)

	)

24 
	#PROF_EXTRA_CBRACE
 (-1429577712L)

	)

25 
	#PROF_MISSING_OBRACE
 (-1429577711L)

	)

26 
	#PROF_MAGIC_PROFILE
 (-1429577710L)

	)

27 
	#PROF_MAGIC_SECTION
 (-1429577709L)

	)

28 
	#PROF_TOPSECTION_ITER_NOSUPP
 (-1429577708L)

	)

29 
	#PROF_INVALID_SECTION
 (-1429577707L)

	)

30 
	#PROF_END_OF_SECTIONS
 (-1429577706L)

	)

31 
	#PROF_BAD_NAMESET
 (-1429577705L)

	)

32 
	#PROF_NO_PROFILE
 (-1429577704L)

	)

33 
	#PROF_MAGIC_FILE
 (-1429577703L)

	)

34 
	#PROF_FAIL_OPEN
 (-1429577702L)

	)

35 
	#PROF_EXISTS
 (-1429577701L)

	)

36 
	#PROF_BAD_BOOLEAN
 (-1429577700L)

	)

37 
	#PROF_BAD_INTEGER
 (-1429577699L)

	)

38 
	#PROF_MAGIC_FILE_DATA
 (-1429577698L)

	)

39 cÚ¡ 
”rÜ_bË
 
‘_´of_”rÜ_bË
;

40 
š™Ÿlize_´of_”rÜ_bË
();

43 
š™Ÿlize_´of_”rÜ_bË_r
(
‘_li¡
 **
li¡
);

45 
	#ERROR_TABLE_BASE_´of
 (-1429577728L)

	)

48 
	#š™_´of_”r_tbl
 
š™Ÿlize_´of_”rÜ_bË


	)

49 
	#´of_”r_ba£
 
ERROR_TABLE_BASE_´of


	)

	@libmke2fs/profile.h

39 #iâdeà
_PROFILE_H


40 
	#_PROFILE_H


	)

42 
_´ofe_t
 *
	t´ofe_t
;

44 (*
	t´ofe_syÁax_”r_cb_t
)(cÚ¡ *
	tfe
, 
	t”r
,

45 
	tlše_num
);

50 
	#PROFILE_ITER_LIST_SECTION
 0x0001

	)

51 
	#PROFILE_ITER_SECTIONS_ONLY
 0x0002

	)

52 
	#PROFILE_ITER_RELATIONS_ONLY
 0x0004

	)

54 #ifdeà
__ılu¥lus


58 
´ofe_š™


59 (cÚ¡ * *
fes
, 
´ofe_t
 *
»t_´ofe
);

61 
´ofe_»Ëa£


62 (
´ofe_t
 
´ofe
);

64 
´ofe_£t_deçuÉ


65 (
´ofe_t
 
´ofe
, cÚ¡ *
def_¡ršg
);

67 
´ofe_g‘_¡ršg


68 (
´ofe_t
 
´ofe
, cÚ¡ *
Çme
, cÚ¡ *
subÇme
,

69 cÚ¡ *
subsubÇme
, cÚ¡ *
def_v®
,

70 **
»t_¡ršg
);

71 
´ofe_g‘_š‹g”


72 (
´ofe_t
 
´ofe
, cÚ¡ *
Çme
, cÚ¡ *
subÇme
,

73 cÚ¡ *
subsubÇme
, 
def_v®
,

74 *
»t_deçuÉ
);

76 
´ofe_g‘_ušt


77 (
´ofe_t
 
´ofe
, cÚ¡ *
Çme
, cÚ¡ *
subÇme
,

78 cÚ¡ *
subsubÇme
, 
def_v®
,

79 *
»t_št
);

81 
´ofe_g‘_doubË


82 (
´ofe_t
 
´ofe
, cÚ¡ *
Çme
, cÚ¡ *
subÇme
,

83 cÚ¡ *
subsubÇme
, 
def_v®
,

84 *
»t_æßt
);

86 
´ofe_g‘_boŞ—n


87 (
´ofe_t
 
´ofe
, cÚ¡ *
Çme
, cÚ¡ *
subÇme
,

88 cÚ¡ *
subsubÇme
, 
def_v®
,

89 *
»t_deçuÉ
);

91 
´ofe_™”©Ü_ü—‹


92 (
´ofe_t
 
´ofe
, cÚ¡ *cÚ¡ *
Çmes
,

93 
æags
, **
»t_™”
);

95 
´ofe_™”©Ü_ä“


96 (**
™”_p
);

98 
´ofe_™”©Ü


99 (**
™”_p
, **
»t_Çme
, **
»t_v®ue
);

101 
´ofe_syÁax_”r_cb_t
 
	`´ofe_£t_syÁax_”r_cb
Õrofe_syÁax_”r_cb_ˆ
hook
);

103 #ifdeà
__ılu¥lus


104 
	}
}

	@libmke2fs/util.h

13 
jouº®_size
;

14 
jouº®_æags
;

15 *
jouº®_deviû
;

17 *
g‘_´ogÇme
(*
¬gv_z”o
);

18 
´oûed_que¡iÚ
();

19 
check_¶ausib™y
(cÚ¡ *
deviû
);

20 
·r£_jouº®_İts
(cÚ¡ *
İts
);

21 
check_mouÁ
(cÚ¡ *
deviû
, 
fÜû
, cÚ¡ *
ty³
);

22 
figu»_jouº®_size
(
size
, 
ext2_fsys
 
fs
);

23 
´št_check_mes§ge
(, );

24 
dump_mmp_msg
(
mmp_¡ruù
 *
mmp
, cÚ¡ *
msg
);

	@test_utils.cpp

1 
	~"‹¡_uts.h
"

3 
	~<sys/ty³s.h
>

4 
	~<sys/¡©.h
>

5 
	~<uni¡d.h
>

6 
	~<¡ršg.h
>

7 
	~<”ºo.h
>

9 #iâdeà
NUUO


10 
¡ršg
 
	$¡ršg_fÜm©
(cÚ¡ * 
fmt
, ...)

12 
va_li¡
 
¬gs
;

13 
buf
[64];

14 
	`va_¡¬t
(
¬gs
, 
fmt
);

15 
	`v¢´štf
(
buf
, 63, 
fmt
, 
¬gs
);

16 
	`va_’d
(
¬gs
);

17  
buf
;

18 
	}
}

20 
boŞ
 
	$CheckBlockDeviû
(cÚ¡ 
¡ršg
& 
dev
)

22 
¡©
 
sb
;

23 ià(0 !ğ
	`¡©
(
dev
.
	`c_¡r
(), &
sb
)) {

24 
	`årštf
(
¡d”r
, "%s: %s, %s\À", 
__func__
, 
dev
.
	`c_¡r
(), 
	`¡»¼Ü
(
”ºo
));

25  
çl£
;

28 ià(
	`S_ISBLK
(
sb
.
¡_mode
)) {

29  
Œue
;

32  
çl£
;

33 
	}
}

35 
boŞ
 
	$CheckDœeùÜyExi¡
(cÚ¡ 
¡ršg
& 
dev
)

37 
¡©
 
sb
;

38 ià(0 !ğ
	`¡©
(
dev
.
	`c_¡r
(), &
sb
)) {

39 
	`årštf
(
¡d”r
, "%s: %s, %s\À", 
__func__
, 
dev
.
	`c_¡r
(), 
	`¡»¼Ü
(
”ºo
));

40  
çl£
;

43 ià(
	`S_ISDIR
(
sb
.
¡_mode
)) {

44  
Œue
;

47  
çl£
;

48 
	}
}

50 
boŞ
 
	$CheckFeExi¡
(cÚ¡ 
¡ršg
& 
dev
)

52 
¡©
 
sb
;

53 ià(0 !ğ
	`¡©
(
dev
.
	`c_¡r
(), &
sb
)) {

54 
	`årštf
(
¡d”r
, "%s: %s, %s\À", 
__func__
, 
dev
.
	`c_¡r
(), 
	`¡»¼Ü
(
”ºo
));

55  
çl£
;

58 ià(
	`S_ISREG
(
sb
.
¡_mode
)) {

59  
Œue
;

62  
çl£
;

63 
	}
}

65 
boŞ
 
	$MakeDœeùÜy
(cÚ¡ 
¡ršg
& 
·thÇme
)

67 
¡©us
 = 
	`mkdœ
(
·thÇme
.
	`c_¡r
(), 0666);

68 ià(
¡©us
 < 0) {

69 
	`årštf
(
¡d”r
, "%s: %s, %s\n", 
__func__
, 
·thÇme
.
	`c_¡r
(), 
	`¡»¼Ü
(
”ºo
));

70  
çl£
;

73  
Œue
;

74 
	}
}

76 
off_t
 
	$G‘FeStÜageSize
(cÚ¡ 
¡ršg
& 
·thÇme
)

78 
¡©
 
¡
;

79 ià(
	`¡©
(
·thÇme
.
	`c_¡r
(), &
¡
) == 0)

80  
¡
.
¡_size
;

82 
	`årštf
(
¡d”r
, "%s: %s, %s\n", 
__func__
, 
·thÇme
.
	`c_¡r
(), 
	`¡»¼Ü
(
”ºo
));

84 
	}
}

	@test_utils.h

1 #iâdeà
__TEST_UTILS_H__


2 
	#__TEST_UTILS_H__


	)

4 #iâdeà
NUUO


5 
	~<¡ršg
>

7 
	~<¡dio.h
>

8 
	~<sy¦og.h
>

9 
	~<¡d¬g.h
>

11 
usšg
 
Çme¥aû
 
	g¡d
;

13 
	#Wr™eHWLog
(
çc™y
, 
Ëv–
, 
Ïb–
, 
fmt
, ...) \

15 
	`´štf
("[%d][%s][%s][%s] " 
fmt
, 
__LINE__
, #çc™y, #Ëv–, 
Ïb–
, ##
__VA_ARGS__
); \

16 } 0);

	)

18 
¡ršg
 
¡ršg_fÜm©
(cÚ¡ * 
fmt
, ...);

19 
boŞ
 
CheckBlockDeviû
(cÚ¡ 
¡ršg
& 
dev
);

20 
boŞ
 
CheckDœeùÜyExi¡
(cÚ¡ 
¡ršg
& 
dev
);

21 
boŞ
 
MakeDœeùÜy
(cÚ¡ 
¡ršg
& 
·thÇme
);

22 
boŞ
 
CheckFeExi¡
(cÚ¡ 
¡ršg
& 
dev
);

23 
off_t
 
G‘FeStÜageSize
(cÚ¡ 
¡ršg
& 
·thÇme
);

25 şas 
	cCr™iÿlSeùiÚ
 {

26 
	m´iv©e
:

27 
m_iLock
;

29 
	mpublic
:

30 
	$Cr™iÿlSeùiÚ
()

31 : 
	$m_iLock
(0)

34 ~
	$Cr™iÿlSeùiÚ
(è{ 
m_iLock
 = 0; 
	}
}

36 
	$Lock
() {

37 
m_iLock
++;

38 
	}
}

40 
	$UÆock
() {

41 
m_iLock
--;

42 
	}
}

45 şas 
	cCr™iÿlSeùiÚLock
 {

46 
	m´iv©e
:

47 
Cr™iÿlSeùiÚ
 *
m_cs
;

48 
Cr™iÿlSeùiÚLock
();

49 
	mpublic
:

50 
	$Cr™iÿlSeùiÚLock
(
Cr™iÿlSeùiÚ
 *
cs
)

51 : 
	$m_cs
(
cs
)

53 ià(
m_cs
)

54 
m_cs
->
	`Lock
();

56 ~
	$Cr™iÿlSeùiÚLock
() {

57 ià(
m_cs
)

58 
m_cs
->
	`UÆock
();

59 
	}
}

	@unitest/FilesystemManager_test.cpp

1 
	~"Fesy¡emMªag”.h
"

3 #ifdeà
NUUO


4 
	~"commÚ/sy¡em.h
"

7 
	$maš
(
¬gc
, *
¬gv
[])

9 
Fesy¡emMªag”
 
	`fs_mgr
("/dev/md0");

10 
fs_mgr
.
	`S‘MouÁPošt
("/mnt/VOLUME0");

11 #ifdeà
NUUO


12 
fs_mgr
.
	`C»©eTh»ad
();

15 
	`´štf
("Progress: ");

16 
´og»ss
 = 0, 
¡©
 = 
WRITE_INODE_TABLES_UNKNOWN
;

17 
FILE
 *
pf
 = 
	`fİ’
("fs_test.log", "w+");

18 #ifdeà
NUUO


19 
fs_mgr
.
	`Th»adExi¡s
()) {

21 ià(
fs_mgr
.
	`IsFÜm©šg
(
´og»ss
, 
¡©
)) {

22 
	`årštf
(
pf
, "%3d%%\n", 
´og»ss
);

23 
	`fæush
(
pf
);

25 #ifdeà
NUUO


26 
	`SË•MS
(100);

29 ià(!
fs_mgr
.
	`IsFÜm©šg
(
´og»ss
, 
¡©
è&& sˆ=ğ
WRITE_INODE_TABLES_DONE
) {

30 
	`årštf
(
pf
, "DÚe:%3d%%\n", 
´og»ss
);

32 
	`fşo£
(
pf
);

49 
	}
}

	@unitest/RAIDManager_test.cpp

1 
	~"RAIDMªag”.h
"

3 
	~<uni¡d.h
>

4 
	~<¡dlib.h
>

5 
	~<¡dio.h
>

6 
	~<sigÇl.h
>

8 
boŞ
 
	gg_bLoİ
 = 
Œue
;

10 
Te¡šgLoİ
(cÚ¡ * 
cfg
, 
RAIDMªag”
& 
¿id_mgr
);

12 
	$sig_hªdËr
(
sig
)

14 ià(
sig
 =ğ
SIGINT
) {

15 
g_bLoİ
 = 
çl£
;

16 
	`´štf
("received SIGINT\n");

18 
	}
}

20 
	$maš
(
¬gc
, * 
¬gv
[])

22 
İt
;

23 
RAIDMªag”
 
¿id_mgr
;

24 
Ëv–
 = -1;

25 
¡ršg
 
¡rMDName
;

26 
boŞ
 
bC»©e
 = 
çl£
;

27 
boŞ
 
bAddDisk
 = 
çl£
;

28 
boŞ
 
bRemove
 = 
çl£
;

29 
boŞ
 
bFe
 = 
çl£
;

30 
veùÜ
<
¡ršg
> 
vDevLi¡
;

31 
veùÜ
<
RAIDInfo
> 
li¡
;

32 
‹¡šg_sûÇrio_fe
[256];

34 
	`sigÇl
(
SIGINT
, 
sig_hªdËr
);

35 
	`sigÇl
(
SIGTERM
, 
sig_hªdËr
);

37 (
İt
 = 
	`g‘İt
(
¬gc
, 
¬gv
, "arcl:f:")) != -1) {

38 
İt
) {

40 
bAddDisk
 = 
Œue
;

43 
bRemove
 = 
Œue
;

46 
bC»©e
 = 
Œue
;

49 
Ëv–
 = 
	`©oi
(
İrg
);

52 
bFe
 = 
Œue
;

53 
	`¡ºıy
(
‹¡šg_sûÇrio_fe
, 
İrg
, (testing_scenario_file) - 1);

58 ià(
bFe
) {

59 
	`Te¡šgLoİ
(
‹¡šg_sûÇrio_fe
, 
¿id_mgr
);

63 ià(
¬gc
 > 
İtšd
) {

64 
i
 = 
İtšd
; i < 
¬gc
; i++) {

65 
vDevLi¡
.
	`push_back
(
¬gv
[
i
]);

69 ià(
bAddDisk
) {

70 
i
 = 0; i < 
vDevLi¡
.
	`size
(); i++) {

71 
¿id_mgr
.
	`AddDisk
(
vDevLi¡
[
i
]);

75 ià(
bRemove
) {

76 
i
 = 0; i < 
vDevLi¡
.
	`size
(); i++)

77 
¿id_mgr
.
	`RemoveDisk
(
vDevLi¡
[
i
]);

80 ià(
bC»©e
) {

81 ià(
Ëv–
 < 0)  1;

82 ià(
vDevLi¡
.
	`em±y
())  1;

83 
¿id_mgr
.
	`C»©eRAID
(
vDevLi¡
, 
Ëv–
);

86 
g_bLoİ
) {

87 
¿id_mgr
.
	`G‘RAIDInfo
(
li¡
);

89 
size_t
 
i
 = 0; i < 
li¡
.
	`size
(); i ++) {

90 
li¡
[
i
].
	`Dump
();

93 
	`¦“p
(10);

96 
i
 = 0; i < 
vDevLi¡
.
	`size
(); i++) {

97 
¿id_mgr
.
	`RemoveDisk
(
vDevLi¡
[
i
]);

101 
	}
}

	@unitest/TestingLoop.cpp

1 
	~"RAIDMªag”.h
"

3 
	~<¡dio.h
>

4 
	~<¡ršg.h
>

6 
	~<¡ršg
>

7 
	~<veùÜ
>

10 
	mOP_ADDDISK
 = 'a',

11 
	mOP_REMDISK
 = 'r',

12 
	mOP_CREATERAID
 = 'C',

13 
	mOP_STOPRAID
 = 'S',

14 
	mOP_DELETERAID
 = 'D',

15 
	mOP_ASSEMBLERAID
 = 'A',

16 
	mOP_MANAGEMDDISK
 = 'M',

22 
	mOP_DONOTHING
 = 'N',

26 
	mMANAGE_M¬kFauÉy
 = 'f',

27 
	mMANAGE_Remove
 = 'r',

28 
	mMANAGE_Add
 = 'a',

29 
	mMANAGE_R—dd
 = 'A',

30 
	mMANAGE_R•Ïû
 = 'R',

33 
	#OPERATION_CASE
(
İ
) \

34 
OP_
##
İ
: \

35 
	`´štf
("%s\n", #op); \

36 
HªdË
##
	`İ
(
cÚ‹Á
, 
¿id_mgr
); \

37 ;

	)

39 
	#MANAGE_CASE
(
İ
) \

40 
MANAGE_
##
İ
: \

41 
	`´štf
("İ”©iÚ = %c\n", 
İ”©iÚ
); \

42 
¿id_mgr
.
İ
##
	`MDDisks
(
mddev
, 
vdisks
); \

43 ;

	)

46 
boŞ
 
g_bLoİ
;

48 
usšg
 
Çme¥aû
 
	g¡d
;

50 
tok’ize
(* 
rg‘
, 
veùÜ
<
¡ršg
>& 
tok’s
)

52 *
	g§v•Œ
 = 
NULL
;

53 *
	gp
 = 
¡¹ok_r
(
rg‘
, ",", &
§v•Œ
);

55 
	gtok’s
.
ş—r
();

56 
	gp
) {

57 
´štf
 ("Tok’: %s\n", 
p
);

58 
	gtok’s
.
push_back
(
p
);

59 
	gp
 = 
¡¹ok_r
(
NULL
, ",", &
§v•Œ
);

63 
	$HªdËADDDISK
 (* 
cÚ‹Á
, 
RAIDMªag”
& 
¿id_mgr
)

65 
veùÜ
<
¡ršg
> 
disks
;

66 
	`tok’ize
(
cÚ‹Á
, 
disks
);

67 
size_t
 
i
 = 0; i < 
disks
.
	`size
(); i++) {

68 
¿id_mgr
.
	`AddDisk
(
disks
[
i
]);

70 
	}
}

72 
	$HªdËREMDISK
 (* 
cÚ‹Á
, 
RAIDMªag”
& 
¿id_mgr
)

74 
veùÜ
<
¡ršg
> 
disks
;

75 
	`tok’ize
(
cÚ‹Á
, 
disks
);

76 
size_t
 
i
 = 0; i < 
disks
.
	`size
(); i++) {

77 
¿id_mgr
.
	`RemoveDisk
(
disks
[
i
]);

79 
	}
}

81 
	$HªdËCREATERAID
 (cÚ¡ * 
cÚ‹Á
, 
RAIDMªag”
& 
¿id_mgr
)

83 
lv
 = 0;

84 
disks
[1024];

85 
veùÜ
<
¡ršg
> 
vdisks
;

86 
¡ršg
 
¡rMDName
;

87 
	`ssÿnf
(
cÚ‹Á
, "%d,%1023s", &
lv
, 
disks
);

88 
	`tok’ize
(
disks
, 
vdisks
);

89 
	`´štf
("lv = %d\n", 
lv
);

90 
¿id_mgr
.
	`C»©eRAID
(
vdisks
, 
lv
);

91 
¿id_mgr
.
	`FÜm©
(
¡rMDName
);

92 
	}
}

94 
	$HªdËMANAGEMDDISK
 (cÚ¡ * 
cÚ‹Á
, 
RAIDMªag”
& 
¿id_mgr
)

96 
İ”©iÚ
;

97 
disks
[1024];

98 
mddev
[16];

99 
veùÜ
<
¡ršg
> 
vdisks
;

100 
	`ssÿnf
(
cÚ‹Á
, "%c,%15[^,],%1023s", &
İ”©iÚ
, 
mddev
, 
disks
);

101 
	`tok’ize
(
disks
, 
vdisks
);

102 
	`´štf
("mddev = %s\n", 
mddev
);

104 
İ”©iÚ
) {

105 
	`MANAGE_CASE
(
M¬kFauÉy
)

106 
	`MANAGE_CASE
(
Remove
)

107 
	`MANAGE_CASE
(
Add
)

108 
	`MANAGE_CASE
(
R—dd
)

109 
MANAGE_R•Ïû
:

110 
	`´štf
("Replace\n");

111 ià(
vdisks
.
	`size
() == 2) {

112 
¿id_mgr
.
	`R•ÏûMDDisk
(
mddev
, 
vdisks
[0], vdisks[1]);

114 
	`´štf
("Disk‚umber is‚ot‡ccepted\n");

119 
	}
}

121 
	$HªdËSTOPRAID
 (cÚ¡ * 
cÚ‹Á
, 
RAIDMªag”
& 
¿id_mgr
)

123 ià(
	`¡ºcmp
("®l", 
cÚ‹Á
, ("all")) == 0) {

124 
veùÜ
<
RAIDInfo
> 
li¡
;

125 
¿id_mgr
.
	`G‘RAIDInfo
(
li¡
);

126 
size_t
 
i
 = 0; i < 
li¡
.
	`size
(); i ++) {

127 
¡©
 = 0, 
´og»ss
 = 0;

138 
	}
}

140 
	$HªdËDELETERAID
 (cÚ¡ * 
cÚ‹Á
, 
RAIDMªag”
& 
¿id_mgr
)

142 ià(
	`¡ºcmp
("®l", 
cÚ‹Á
, ("all")) == 0) {

143 
veùÜ
<
RAIDInfo
> 
li¡
;

144 
¿id_mgr
.
	`G‘RAIDInfo
(
li¡
);

145 
size_t
 
i
 = 0; i < 
li¡
.
	`size
(); i ++)

146 
¿id_mgr
.
	`D–‘eRAID
(
li¡
[
i
].
m_¡rDevP©h
);

148 
¿id_mgr
.
	`D–‘eRAID
(
cÚ‹Á
);

150 
	}
}

152 
	$HªdËFAULTYDISK
 (cÚ¡ * 
cÚ‹Á
)

154 
	}
}

156 
	$HªdËREMMDDISK
 (cÚ¡ * 
cÚ‹Á
)

158 
	}
}

160 
	$HªdËADDMDDISK
 (cÚ¡ * 
cÚ‹Á
)

162 
	}
}

164 
	$HªdËREADDMDDISK
 (cÚ¡ * 
cÚ‹Á
)

166 
	}
}

168 
	$HªdËREPLACEMDDISK
 (cÚ¡ * 
cÚ‹Á
)

170 
	}
}

172 
	$HªdËASSEMBLERAID
 (cÚ¡ * 
cÚ‹Á
, 
RAIDMªag”
& 
¿id_mgr
)

174 
ty³
[5];

175 
šfo
[1024];

176 
	`ssÿnf
(
cÚ‹Á
, "%4[^,],%1023s", 
ty³
, 
šfo
);

178 
	`´štf
("ty³ = %s\n", 
ty³
);

179 ià(
	`¡ºcmp
("disk", 
ty³
, 
	`¡¾’
("disk")) == 0) {

180 
veùÜ
<
¡ršg
> 
vdisks
;

181 
¡ršg
 
¡rMDName
;

182 
	`tok’ize
(
šfo
, 
vdisks
);

184 } ià(
	`¡ºcmp
("uuid", 
ty³
, 
	`¡¾’
("uuid")) == 0) {

187 
	}
}

189 
	$HªdËDONOTHING
 (cÚ¡ * 
cÚ‹Á
, 
RAIDMªag”
& 
¿id_mgr
)

191 
veùÜ
<
RAIDInfo
> 
li¡
;

192 
¿id_mgr
.
	`G‘RAIDInfo
(
li¡
);

193 
size_t
 
i
 = 0; i < 
li¡
.
	`size
(); i++) {

194 
li¡
[
i
].
	`Dump
();

196 
¿id_mgr
.
	`Dump
();

197 
	}
}

199 
	$Te¡šgLoİ
(cÚ¡ * 
cfg
, 
RAIDMªag”
& 
¿id_mgr
)

201 
FILE
 *
pFe
 = 
	`fİ’
(
cfg
, "r");

202 
lše
[1024];

203 
cÚ‹Á
[1024];

204 
o
 = 
OP_DONOTHING
;

206 ià(
pFe
 =ğ
NULL
) {

207 
	`´štf
("Failo open file\n");

212 
	`fg‘s
(
lše
, 1023, 
pFe
è!ğ
NULL
 && 
g_bLoİ
) {

213 ià(
lše
[0] == '#')

215 
	`´štf
("\nRun: %s", 
lše
);

216 
	`ssÿnf
(
lše
, "%c:%1023[^:\n]", &
o
, 
cÚ‹Á
);

218 
o
) {

219 
	`OPERATION_CASE
(
ADDDISK
)

220 
	`OPERATION_CASE
(
REMDISK
)

221 
	`OPERATION_CASE
(
CREATERAID
)

222 
	`OPERATION_CASE
(
STOPRAID
)

223 
	`OPERATION_CASE
(
DELETERAID
)

229 
	`OPERATION_CASE
(
ASSEMBLERAID
)

230 
	`OPERATION_CASE
(
MANAGEMDDISK
)

231 
	`OPERATION_CASE
(
DONOTHING
)

236 
	`¦“p
(10);

240 
	`fşo£
(
pFe
);

241 
	}
}

	@
1
.
0
47
1089
FilesystemManager.cpp
FilesystemManager.h
RAIDManager.cpp
RAIDManager.h
build/CMakeFiles/2.8.12.2/CompilerIdCXX/CMakeCXXCompilerId.cpp
common_util.h
libe2fsck/build/CMakeFiles/2.8.12.2/CompilerIdCXX/CMakeCXXCompilerId.cpp
libe2fsck/crc32defs.h
libe2fsck/crc32table.h
libe2fsck/dict.h
libe2fsck/e2fsck.h
libe2fsck/e2fsck_err.h
libe2fsck/e2fsck_lib.h
libe2fsck/jfs_compat.h
libe2fsck/jfs_user.h
libe2fsck/kernel-jbd.h
libe2fsck/kernel-list.h
libe2fsck/problem.h
libe2fsck/problemP.h
libe2fsck/profile.h
libmdadm/bitmap.h
libmdadm/build/CMakeFiles/2.8.12.2/CompilerIdCXX/CMakeCXXCompilerId.cpp
libmdadm/crc32.h
libmdadm/dlink.h
libmdadm/md_p.h
libmdadm/md_u.h
libmdadm/mdadm.h
libmdadm/mdadm_errcode.h
libmdadm/mdadm_other.h
libmdadm/mdmon.h
libmdadm/msg.h
libmdadm/part.h
libmdadm/platform-intel.h
libmdadm/probe_roms.h
libmdadm/sha1.h
libmke2fs/ext2fs.h
libmke2fs/ext2fsP.h
libmke2fs/mke2fs.h
libmke2fs/mke2fs_err.h
libmke2fs/prof_err.h
libmke2fs/profile.h
libmke2fs/util.h
test_utils.cpp
test_utils.h
unitest/FilesystemManager_test.cpp
unitest/RAIDManager_test.cpp
unitest/TestingLoop.cpp
